{"version":3,"sources":["../../src/BaseChart/index.js"],"names":["iconSize","downloadPath","resetPath","lockPath","unlockPath","actionButtons","download","label","path","className","reset","xlock","ylock","axisType","scaleType","cat","d3","scaleBand","timeCat","time","scaleTime","linear","scaleLinear","log","scaleLog","sqrt","scaleSqrt","pow","scalePow","quantize","scaleQuantize","quantile","scaleQuantile","identity","scaleIdentity","timeFormat","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatMonth","formatYear","prefixSIFormat","format","exponentFormat","roundFormat","getDefaultFormat","type","date","ax","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeYear","v","computeSize","element","width","height","padding","rWidth","rHeight","w","h","style","getComputedStyle","util","isNumber","clientWidth","parseInt","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","top","right","bottom","left","pad","Array","isArray","pad0","pad1","pad2","pad3","length","Math","max","scaleLable","labelSel","scale","domain","unit","min","select","selectAll","data","join","attr","_","i","text","getScaleAxis","zoomSelection$","datum","xTransform","yTransform","scaleAxis","forEach","key","rescale$","axis","updateScale","axisScale$","dataDomains$","minDomain","maxDomain","range","width$","height$","nice","niceDomain","createScale","axisScale","ticks","tickSize","axisTop","axisLeft","axisRight","axisBottom","defaultFormat","tickFormat","val","call","transform","as","recale","rescaleX","rescaleY","updateZoom","viewExtent","scaleExtent","translateExtent","zoom","xzoom","x","yzoom","y","map","xdomain","ydomain","xMinDomain","xMaxDomain","yMinDomain","yMaxDomain","xDomainEx","yDomainEx","translate","Infinity","xMinTranslate","xMaxTranslate","yMinTranslate","yMaxTranslate","precision","xMinPrecision","xMaxPrecision","yMinPrecision","yMaxPrecision","xRate","yRate","zoomer$","extent","zoomExtent$","createZoom","transform$","tf","deltK","point","point0","tk","k","tx","ty","zoomIdentity","dx0","invertX","dx1","dy0","invertY","dy1","updateElement","size","rootSelection$","node","zw","zh","group","baselineDelt","fontSize","x2","y2","svgDiv","offset","createElement","container","svgXmlns","rootSelection","document","append","svgSelection","pathClipId","guid","groupSelection","divSelection","zoomSelection","actions","push","action","tooptip","cross","split","resize","debounce","e","destroyed","rendered","resize$","sourceEvent","target","zoomTransform","leading","trailing","window","addEventListener","unBindResize$","removeEventListener","bindEvents","pointX0","pointY0","transform0","on","xCanZoom$","yCanZoom$","pointer","invert","zoomstart$","isCanEmit","changed","p","px0","py0","xtf","ytf","zoomX","zoomY","Object","keys","zooming$","zoomend$","mouseover$","zNode","toElement","parentNode","indexOf","mouseout$","compute","crossX","crossY","x0","y0","x00","y00","result","display","noop","click$","contextmenu$","preventDefault","dblclick$","doubleZoom","setCanZoom","canZoom$","reset$","downloadImage","BaseChart","ext","args","mousemove$","ta","render","transition","duration","ease","easeLinear","canZoom","xCanZoom","yCanZoom","handler","oldHandler","computeDomain","needCompute","filter","isScale","isZoom","remove","createEvent","event","initEvent","dispatchEvent","createEventObject","fireEvent","name","content","svgSel","tempCanvas","tempCxt","getContext","clearRect","drawImage","image","tempImage","Image","src","btoa","unescape","encodeURIComponent","XMLSerializer","serializeToString","onload","a","href","toDataURL","click"],"mappings":"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","sourcesContent":["/*\n * @Author: Huangjs\n * @Date: 2021-03-17 16:23:00\n * @LastEditors: Huangjs\n * @LastEditTime: 2021-12-29 17:35:02\n * @Description: 基础图表构造器\n */\n\nimport * as d3 from 'd3';\nimport * as util from '../util';\n\nconst iconSize = 18;\nconst downloadPath =\n  'M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z';\nconst resetPath =\n  'M483.031 380.989v-61.004l-162.969 92.891 162.969 99.24v-64.04c128.025 0.122 157.093 64.052 157.093 94.107 0 33.863-29.068 97.771-157.093 97.771l-98.957 0.011v63.919l98.957-0.011c157.093 0.011 221.105-63.907 221.105-159.017 0.001-96.647-64.012-163.856-221.105-163.867 M511.372 64.548c-247.628 0-448.369 200.319-448.369 447.426S263.744 959.4 511.372 959.4s448.369-200.32 448.369-447.426S758.999 64.548 511.372 64.548z m-0.203 823.564c-207.318 0-375.382-167.71-375.382-374.592s168.064-374.592 375.382-374.592 375.382 167.71 375.382 374.592-168.064 374.592-375.382 374.592z';\nconst lockPath =\n  'M650 432.6v-99.4c0-76.3-61.8-138.1-138.1-138.1S373.8 258 373.8 334.3v99.4H650z m-382.9 1.1l-0.1-3.1V322.5c0-59.9 23.8-117.4 66.2-159.8C375.6 120.3 433 96.5 493 96.5h37.9c124.8 0 225.9 101.2 225.9 225.9v111.3c58.2 8.1 101.5 57.9 101.5 116.7v258.3c0 65.1-52.7 117.8-117.8 117.8H283.3c-65.1 0-117.8-52.7-117.8-117.8V550.5c0-58.8 43.3-108.6 101.6-116.8z m217.6 266v77c0 15 12.2 27.2 27.2 27.2s27.2-12.2 27.2-27.2v-77c33.5-13.1 53-48.2 46.3-83.5-6.7-35.4-37.5-61-73.5-61s-66.9 25.6-73.5 61c-6.7 35.3 12.8 70.4 46.3 83.5z';\nconst unlockPath =\n  'M650 432.6v-99.4c0-76.3-61.8-138.1-138.1-138.1S373.8 258 373.8 334.3v99.4H650z m-382.9 1.1l-0.1-3.1V322.5c0-59.9 23.8-117.4 66.2-159.8C375.6 120.3 433 96.5 493 96.5h37.9c124.8 0 225.9 101.2 225.9 225.9v111.3c58.2 8.1 101.5 57.9 101.5 116.7v258.3c0 65.1-52.7 117.8-117.8 117.8H283.3c-65.1 0-117.8-52.7-117.8-117.8V550.5c0-58.8 43.3-108.6 101.6-116.8z m217.6 266v77c0 15 12.2 27.2 27.2 27.2s27.2-12.2 27.2-27.2v-77c33.5-13.1 53-48.2 46.3-83.5-6.7-35.4-37.5-61-73.5-61s-66.9 25.6-73.5 61c-6.7 35.3 12.8 70.4 46.3 83.5zm272 -369h-106.5v103h106.5z';\nconst actionButtons = {\n  download: {\n    label: '下载视图',\n    path: downloadPath,\n    className: 'download',\n  },\n  reset: {\n    label: '重置视图',\n    path: resetPath,\n    className: 'reset',\n  },\n  xlock: {\n    label: 'X轴缩放开关',\n    path: unlockPath,\n    className: 'xlock',\n  },\n  ylock: {\n    label: 'Y轴缩放开关',\n    path: unlockPath,\n    className: 'ylock',\n  },\n};\nconst axisType = ['x', 'x2', 'y', 'y2'];\nconst scaleType = {\n  cat: () => d3.scaleBand(),\n  timeCat: () => d3.scaleBand(),\n  time: () => d3.scaleTime(),\n  linear: () => d3.scaleLinear(),\n  log: () => d3.scaleLog(),\n  sqrt: () => d3.scaleSqrt(),\n  pow: () => d3.scalePow(),\n  // sequential: () => d3.scaleSequential(),\n  quantize: () => d3.scaleQuantize(),\n  quantile: () => d3.scaleQuantile(),\n  identity: () => d3.scaleIdentity(),\n};\nconst timeFormat = d3.timeFormat('%Y-%m-%d %H:%M:%S');\nconst formatMillisecond = d3.timeFormat('.%L');\nconst formatSecond = d3.timeFormat(':%S');\nconst formatMinute = d3.timeFormat('%H:%M');\nconst formatHour = d3.timeFormat('%H:00');\nconst formatDay = d3.timeFormat('%m-%d');\nconst formatMonth = d3.timeFormat('%m月');\nconst formatYear = d3.timeFormat('%Y年');\nconst prefixSIFormat = d3.format('.4~s');\nconst exponentFormat = d3.format('.4~g');\nconst roundFormat = d3.format('.4~r');\nconst getDefaultFormat = (type) => {\n  if (type === 'time') {\n    return (date, ax) => {\n      if (!ax) {\n        return timeFormat(date);\n      }\n      if (d3.timeSecond(date) < date) {\n        return formatMillisecond(date);\n      }\n      if (d3.timeMinute(date) < date) {\n        return formatSecond(date);\n      }\n      if (d3.timeHour(date) < date) {\n        return formatMinute(date);\n      }\n      if (d3.timeDay(date) < date) {\n        return formatHour(date);\n      }\n      if (d3.timeMonth(date) < date) {\n        return formatDay(date);\n      }\n      if (d3.timeYear(date) < date) {\n        return formatMonth(date);\n      }\n      return formatYear(date);\n    };\n  }\n  if (type === 'log') {\n    return exponentFormat;\n  }\n  if (type === 'sqrt') {\n    return roundFormat;\n  }\n  if (type === 'linear' || type === 'pow') {\n    return prefixSIFormat;\n  }\n  return (v) => v;\n};\nconst computeSize = (element, { width, height, padding, rWidth, rHeight }) => {\n  let w = width;\n  let h = height;\n  const style = getComputedStyle(element);\n  if (!(util.isNumber(width) && width > 1)) {\n    w =\n      (element.clientWidth || parseInt(style.width, 10)) -\n      parseInt(style.paddingLeft, 10) -\n      parseInt(style.paddingRight, 10);\n  }\n  if (!(util.isNumber(height) && height > 1)) {\n    h =\n      (element.clientHeight || parseInt(style.height, 10)) -\n      parseInt(style.paddingTop, 10) -\n      parseInt(style.paddingBottom, 10);\n  }\n  // @ts-ignore\n  let [top, right, bottom, left] = [];\n  const pad = Array.isArray(padding) ? padding : [];\n  let [pad0, pad1, pad2, pad3] = pad;\n  pad0 = !util.isNumber(pad0) || pad0 < 0 ? 0 : pad0;\n  pad1 = !util.isNumber(pad1) || pad1 < 0 ? 0 : pad1;\n  pad2 = !util.isNumber(pad2) || pad2 < 0 ? 0 : pad2;\n  pad3 = !util.isNumber(pad3) || pad3 < 0 ? 0 : pad3;\n  if (!pad.length) {\n    // @ts-ignore\n    top = 0;\n    right = top;\n    bottom = top;\n    left = top;\n  } else if (pad.length === 1) {\n    top = pad0;\n    right = top;\n    bottom = top;\n    left = top;\n  } else if (pad.length === 2) {\n    top = pad0;\n    right = pad1;\n    bottom = top;\n    left = right;\n  } else if (pad.length === 3) {\n    top = pad0;\n    right = pad1;\n    bottom = pad2;\n    left = right;\n  } else {\n    top = pad0;\n    right = pad1;\n    bottom = pad2;\n    left = pad3;\n  }\n  return {\n    width: Math.max(util.isNumber(w) ? w : 1, 1),\n    height: Math.max(util.isNumber(h) ? h : 1, 1),\n    padding: [top, right, bottom, left],\n    rWidth: util.isNumber(rWidth) ? rWidth : 0,\n    rHeight: util.isNumber(rHeight) ? rHeight : 0,\n  };\n};\nconst scaleLable = (labelSel, [scale, domain]) => {\n  let { type, format, label, unit } = scale;\n  type = type || 'linear';\n  label = label || '';\n  unit = !label || !unit ? '' : ` ( ${unit} )`;\n  format = format || getDefaultFormat(type);\n  let [min, max] = domain;\n  min = min || 0;\n  max = max || 0;\n  labelSel\n    .select('text')\n    .selectAll('tspan')\n    .data([0, 1])\n    .join('tspan')\n    .attr('dx', (_, i) => {\n      if (!label) return 0;\n      return i === 0 ? -12 : 12;\n    })\n    .text((_, i) => (i === 0 ? `${label}${unit}` : `${format(min)} - ${format(max)}`));\n};\nfunction getScaleAxis() {\n  const [xTransform, yTransform] = this.zoomSelection$.datum();\n  const scaleAxis = {};\n  axisType.forEach((key) => {\n    if (this.scale[key]) {\n      const { scale, axis } = this.rescale$(key === 'x' || key === 'x2' ? xTransform : yTransform, key);\n      scaleAxis[key] = {\n        axis,\n        scale,\n      };\n    }\n  });\n  return scaleAxis;\n}\nfunction updateScale() {\n  axisType.forEach((key) => {\n    if (this.axisScale$[key]) {\n      const [minDomain, maxDomain] = this.scale[key].domain || this.dataDomains$[key] || [0, 1];\n      this.axisScale$[key].scale\n        .range(key === 'x' || key === 'x2' ? [0, this.width$] : [this.height$, 0])\n        .domain([minDomain || 0, maxDomain || 1]);\n      if (this.scale[key].nice) {\n        this.axisScale$[key].scale.nice();\n        const niceDomain = this.axisScale$[key].scale.domain();\n        if (this.scale[key].domain) {\n          this.scale[key].domain = niceDomain;\n        }\n        if (this.dataDomains$[key]) {\n          this.dataDomains$[key] = niceDomain;\n        }\n      }\n    }\n  });\n}\nfunction createScale() {\n  const axisScale = {};\n  axisType.forEach((key) => {\n    // @ts-ignore\n    if (this.scale[key]) {\n      // @ts-ignore\n      const { type = 'linear', ticks = 5, tickSize, format } = this.scale[key];\n      const scale = scaleType[type]();\n      let axis = null;\n      if (key === 'x2') {\n        axis = d3.axisTop(scale);\n      } else if (key === 'y') {\n        axis = d3.axisLeft(scale);\n      } else if (key === 'y2') {\n        axis = d3.axisRight(scale);\n      } else {\n        axis = d3.axisBottom(scale);\n      }\n      if (ticks) {\n        axis = axis.ticks(ticks);\n      }\n      if (tickSize) {\n        axis = axis.tickSize(tickSize);\n      }\n      const defaultFormat = getDefaultFormat(type);\n      if (!format) {\n        // @ts-ignore\n        this.scale[key].format = defaultFormat;\n      }\n      // @ts-ignore\n      axis = axis.tickFormat(format || ((val) => defaultFormat(val, true)));\n      axisScale[key] = { scale, axis };\n    }\n  });\n  this.axisScale$ = axisScale;\n  updateScale.call(this);\n  this.rescale$ = (transform, key) => {\n    const as = this.axisScale$[key];\n    if (as) {\n      const { scale, axis } = as;\n      const recale = key === 'x' || key === 'x2' ? transform.rescaleX(scale) : transform.rescaleY(scale);\n      return {\n        scale: recale,\n        axis: axis.scale(recale),\n      };\n    }\n    return as;\n  };\n}\nfunction updateZoom() {\n  const viewExtent = [\n    [0, 0],\n    // @ts-ignore\n    [this.width$, this.height$],\n  ];\n  let scaleExtent = [\n    [1, 1],\n    [1, 1],\n  ];\n  let translateExtent = [\n    [0, 0],\n    [0, 0],\n  ];\n  // @ts-ignore\n  const { x: xzoom, y: yzoom } = this.zoom;\n  if (xzoom || yzoom) {\n    const [xdomain, ydomain] = [xzoom, yzoom].map((zoom, i) => {\n      const key = zoom.domain || (i === 0 ? 'x' : 'y');\n      let domain = [0, 1];\n      // @ts-ignore\n      if (this.scale[key]) {\n        // @ts-ignore\n        domain = this.scale[key].domain || this.dataDomains$[key] || [0, 1];\n      }\n      return domain;\n    });\n    const [xMinDomain, xMaxDomain] = xdomain;\n    const [yMinDomain, yMaxDomain] = ydomain;\n    const xDomainEx = (xMaxDomain || 1) - (xMinDomain || 0);\n    const yDomainEx = (yMaxDomain || 1) - (yMinDomain || 0);\n    const [xMinTranslate = 0, xMaxTranslate = 0] = xzoom.translate || [-Infinity, Infinity];\n    const [yMinTranslate = 0, yMaxTranslate = 0] = yzoom.translate || [-Infinity, Infinity];\n    const [xMinPrecision = xDomainEx / 10, xMaxPrecision = xDomainEx * 10] = xzoom.precision || [\n      xDomainEx / 10,\n      xDomainEx * 10,\n    ];\n    const [yMinPrecision = yDomainEx / 10, yMaxPrecision = yDomainEx * 10] = yzoom.precision || [\n      yDomainEx / 10,\n      yDomainEx * 10,\n    ];\n    // @ts-ignore\n    const xRate = this.width$ / xDomainEx;\n    // @ts-ignore\n    const yRate = this.height$ / yDomainEx;\n    scaleExtent = [\n      [xDomainEx / xMaxPrecision || 1, yDomainEx / yMaxPrecision || 1],\n      [xDomainEx / xMinPrecision || 1, yDomainEx / yMinPrecision || 1],\n    ];\n    translateExtent = [\n      [\n        (xMinTranslate - (xMinDomain || 0)) * xRate || xMinDomain || 0,\n        ((yMaxDomain || 1) - yMaxTranslate) * yRate || yMinDomain || 0,\n      ],\n      [\n        (xMaxTranslate - (xMinDomain || 0)) * xRate || xMaxDomain || 1,\n        ((yMaxDomain || 1) - yMinTranslate) * yRate || yMaxDomain || 1,\n      ],\n    ];\n  }\n  // @ts-ignore\n  this.zoomer$\n    .extent(viewExtent)\n    .scaleExtent([(scaleExtent[0][0] * scaleExtent[0][1]) ** 2, (scaleExtent[1][0] * scaleExtent[1][1]) ** 2])\n    .translateExtent(translateExtent);\n  this.zoomExtent$ = { viewExtent, scaleExtent, translateExtent };\n}\nfunction createZoom() {\n  this.zoomExtent$ = null;\n  updateZoom.call(this);\n  this.transform$ = (axis, tf, deltK, point, point0) => {\n    let transform = tf;\n    if (this.zoomExtent$) {\n      const { viewExtent, translateExtent, scaleExtent } = this.zoomExtent$;\n      const tk = Math.max(\n        axis === 'x' ? scaleExtent[0][0] : scaleExtent[0][1],\n        Math.min(axis === 'x' ? scaleExtent[1][0] : scaleExtent[1][1], transform.k * deltK)\n      );\n      const tx = point[0] - tk * point0[0];\n      const ty = point[1] - tk * point0[1];\n      if (tk !== transform.k || tx !== transform.x || ty !== transform.y) {\n        transform = d3.zoomIdentity.translate(tx, ty).scale(tk);\n        const dx0 = transform.invertX(viewExtent[0][0]) - translateExtent[0][0];\n        const dx1 = transform.invertX(viewExtent[1][0]) - translateExtent[1][0];\n        const dy0 = transform.invertY(viewExtent[0][1]) - translateExtent[0][1];\n        const dy1 = transform.invertY(viewExtent[1][1]) - translateExtent[1][1];\n        transform = transform.translate(\n          dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n          dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n        );\n      }\n    }\n    return transform;\n  };\n}\nfunction updateElement(size) {\n  // @ts-ignore\n  const { width, height, padding, rWidth, rHeight } = computeSize(this.rootSelection$.node(), size);\n  // @ts-ignore\n  let zw = width - rWidth - padding[3] - padding[1];\n  // @ts-ignore\n  let zh = height - rHeight - padding[0] - padding[2];\n  if (zw < 1) zw = 1;\n  if (zh < 1) zh = 1;\n  // @ts-ignore\n  const group = this.rootSelection$\n    .select('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .select('g.group')\n    .attr('transform', `translate(${padding[3]},${padding[0]})`);\n  // @ts-ignore\n  this.rootSelection$.select('clipPath').select('rect').attr('width', zw).attr('height', zh);\n  // @ts-ignore\n  const baselineDelt = this.fontSize + 2;\n  // @ts-ignore\n  if (this.scale.x) {\n    group.select('.xAxis').attr('transform', `translate(0,${zh})`);\n    // @ts-ignore\n    group\n      .select('.xLabel')\n      // @ts-ignore\n      .attr('transform', `translate(${zw / 2} ${zh + padding[2] - iconSize + baselineDelt}) rotate(0)`);\n  }\n  // @ts-ignore\n  if (this.scale.x2) {\n    group\n      .select('.x2Label')\n      // @ts-ignore\n      .attr('transform', `translate(${zw / 2} ${baselineDelt - padding[0]}) rotate(0)`);\n  }\n  // @ts-ignore\n  if (this.scale.y) {\n    group\n      .select('.yLabel')\n      // @ts-ignore\n      .attr('transform', `translate(${baselineDelt - padding[3]} ${zh / 2}) rotate(-90)`);\n  }\n  // @ts-ignore\n  if (this.scale.y2) {\n    group.select('.y2Axis').attr('transform', `translate(${zw},0)`);\n    // @ts-ignore\n    group\n      .select('.y2Label')\n      // @ts-ignore\n      .attr('transform', `translate(${zw + padding[1] - iconSize + baselineDelt} ${zh / 2}) rotate(-90)`);\n  }\n  // @ts-ignore\n  const svgDiv = this.rootSelection$\n    .select('div.actions')\n    .style('width', `${zw}px`)\n    .style('height', `${zh}px`)\n    .style('top', `${padding[0]}px`)\n    .style('left', `${padding[3]}px`);\n  // @ts-ignore\n  if (this.zoom.x) {\n    svgDiv\n      .select('.xlock')\n      // @ts-ignore\n      .style('top', `${this.scale.x ? zh + padding[2] - iconSize : -padding[0]}px`)\n      // @ts-ignore\n      .style('left', `${this.scale.y ? zw - iconSize / 2 : -iconSize / 2}px`);\n  }\n  // @ts-ignore\n  if (this.zoom.y) {\n    svgDiv\n      .select('.ylock')\n      // @ts-ignore\n      .style('top', `${this.scale.x ? -iconSize / 2 : zh - iconSize / 2}px`)\n      // @ts-ignore\n      .style('left', `${this.scale.y ? -padding[3] : zw + padding[1] - iconSize}px`);\n  }\n  let offset = 5;\n  // @ts-ignore\n  if (this.zoom.x || this.zoom.y) {\n    svgDiv\n      .select('.reset')\n      // @ts-ignore\n      .style('top', `${this.scale.x ? -padding[0] : zh + padding[2] - iconSize}px`)\n      // @ts-ignore\n      .style('left', `${this.scale.y ? zw - offset - iconSize : offset}px`);\n    offset += 23;\n  }\n  // @ts-ignore\n  if (this.download) {\n    svgDiv\n      .select('.download')\n      // @ts-ignore\n      .style('top', `${this.scale.x ? -padding[0] : zh + padding[2] - iconSize}px`)\n      // @ts-ignore\n      .style('left', `${this.scale.y ? zw - offset - iconSize : offset}px`);\n    offset += 23;\n  }\n  group\n    .select('.zLabel')\n    // @ts-ignore\n    .attr(\n      'transform',\n      // @ts-ignore\n      `translate(${this.scale.y ? zw - offset : offset} ${\n        // @ts-ignore\n        (this.scale.x ? -padding[0] : zh + padding[2] - iconSize) + baselineDelt\n      })`\n    );\n\n  this.width = width;\n  this.height = height;\n  this.padding = padding;\n  this.width$ = zw;\n  this.height$ = zh;\n}\nfunction createElement(container, size) {\n  const svgXmlns = 'http://www.w3.org/2000/svg';\n  const rootSelection = d3\n    .select(container || document.createElement('div'))\n    .append('div')\n    .attr('class', 'd3chart')\n    .style('position', 'relative')\n    // .style('overflow', 'hidden')\n    .style('width', '100%')\n    .style('height', '100%');\n  const svgSelection = rootSelection\n    .append('svg')\n    .attr('xmlns', svgXmlns)\n    .attr('width', 1) // 清除默认宽高\n    .attr('height', 1) // 清除默认宽高\n    .attr('fill', 'none')\n    .attr('text-anchor', 'middle')\n    // @ts-ignore\n    .attr('font-size', this.fontSize)\n    .attr('stroke', 'none')\n    .attr('stroke-width', 1)\n    .attr('stroke-linejoin', 'round')\n    .attr('stroke-linecap', 'round')\n    .style('position', 'absolute');\n  const pathClipId = util.guid('clip');\n  svgSelection.append('defs').append('svg:clipPath').attr('id', pathClipId).append('rect');\n  const groupSelection = svgSelection.append('g').attr('class', 'group');\n  axisType.forEach((key) => {\n    // @ts-ignore\n    if (this.scale[key]) {\n      groupSelection.append('g').attr('class', `${key}Axis`);\n      groupSelection.append('g').attr('class', `${key}Label`).attr('fill', 'currentColor').append('text');\n    }\n  });\n  groupSelection.append('g').attr('class', 'zAxis').attr('clip-path', `url(#${pathClipId})`);\n  groupSelection.append('g').attr('class', 'zLabel').attr('fill', 'currentColor');\n  const divSelection = rootSelection\n    .append('div')\n    .attr('class', 'actions')\n    .style('position', 'absolute')\n    .style('top', 0)\n    .style('left', 0);\n  const zoomSelection = divSelection\n    .append('div')\n    .attr('class', 'xyzoom')\n    .style('position', 'absolute')\n    // .style('overflow', 'hidden')\n    .style('background', 'rgba(0,0,0,0)') // IE9,10的层级（z-index）不起作用，需要加个背景使鼠标事件生效\n    .style('width', '100%')\n    .style('height', '100%')\n    .style('top', 0)\n    .style('left', 0);\n  const actions = [];\n  // @ts-ignore\n  if (this.zoom) {\n    // @ts-ignore\n    if (this.zoom.x) {\n      actions.push(actionButtons.xlock);\n    }\n    // @ts-ignore\n    if (this.zoom.y) {\n      actions.push(actionButtons.ylock);\n    }\n    // @ts-ignore\n    if (this.zoom.x || this.zoom.y) {\n      actions.push(actionButtons.reset);\n    }\n  }\n  // @ts-ignore\n  if (this.download) {\n    actions.push(actionButtons.download);\n  }\n  actions.forEach((action) => {\n    divSelection\n      .append('div')\n      .attr('class', action.className)\n      .style('position', 'absolute')\n      .attr('title', action.label)\n      .style('display', 'inline-flex')\n      .style('font-size', `${iconSize}px`)\n      .append('svg')\n      .attr('xmlns', svgXmlns)\n      .attr('fill', 'currentColor')\n      .attr('viewBox', '0 0 1024 1024')\n      .attr('width', '1em')\n      .attr('height', '1em')\n      .append('path')\n      .attr('d', action.path);\n  });\n  // @ts-ignore\n  if (this.tooptip) {\n    // @ts-ignore\n    const { cross } = this.tooptip;\n    zoomSelection\n      .append('div')\n      .attr('class', 'tooptip')\n      .style('display', 'none')\n      .style('z-index', '999')\n      .style('border-radius', '8px')\n      .style('transition', 'none')\n      .style('padding', '10px 14px')\n      // @ts-ignore\n      .style('font-size', `${this.fontSize}px`)\n      .style('line-height', '22px')\n      .style('position', 'absolute')\n      .style('top', 0)\n      .style('left', 0);\n    cross.split('').forEach((key) => {\n      if (key) {\n        zoomSelection\n          .append('div')\n          .attr('class', `${key}-cross`)\n          .style('display', 'none')\n          .style('position', 'absolute')\n          .style('transition', 'none')\n          .style('width', key === 'x' ? '1px' : '100%')\n          .style('height', key === 'x' ? '100%' : '1px')\n          .style('top', 0)\n          .style('left', 0);\n      }\n    });\n  }\n  this.rootSelection$ = rootSelection;\n  this.zoomSelection$ = zoomSelection;\n  updateElement.call(this, size);\n  if (!(util.isNumber(size.width) && size.width > 1 && util.isNumber(size.height) && size.height > 1)) {\n    const resize = util.debounce(\n      (e) => {\n        // @ts-ignore\n        if (this.destroyed) return;\n        updateElement.call(this, size);\n        updateScale.call(this);\n        updateZoom.call(this);\n        // @ts-ignore\n        if (this.rendered) {\n          // @ts-ignore\n          this.reset();\n        }\n        // @ts-ignore\n        this.resize$.call(\n          null,\n          {\n            sourceEvent: e || null,\n            target: this.rootSelection$,\n            transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n            scaleAxis: getScaleAxis.call(this),\n            type: 'resize',\n          },\n          {\n            // @ts-ignore\n            width: this.width$,\n            // @ts-ignore\n            height: this.height$,\n            // @ts-ignore\n            padding: this.padding,\n          }\n        );\n      },\n      250,\n      { leading: false, trailing: true }\n    );\n    window.addEventListener('resize', resize);\n    this.unBindResize$ = () => {\n      window.removeEventListener('resize', resize);\n    };\n  }\n}\nfunction bindEvents() {\n  let pointX0 = [0, 0];\n  let pointY0 = [0, 0];\n  let point0 = [0, 0];\n  let transform0 = d3.zoomIdentity;\n  // @ts-ignore\n  this.zoomSelection$.datum([d3.zoomIdentity, d3.zoomIdentity]);\n  // @ts-ignore\n  this.zoomer$\n    .on('start', (e) => {\n      // @ts-ignore\n      if (this.destroyed || !this.rendered) return;\n      // @ts-ignore\n      const [xTransform, yTransform] = this.zoomSelection$.datum();\n      const { transform, sourceEvent } = e;\n      if (sourceEvent.type !== 'call') {\n        if (!this.xCanZoom$ && !this.yCanZoom$) return;\n        // @ts-ignore\n        const point = d3.pointer(e, this.zoomSelection$.node());\n        if (this.xCanZoom$) {\n          pointX0 = xTransform.invert(point);\n        }\n        if (this.yCanZoom$) {\n          pointY0 = yTransform.invert(point);\n        }\n        point0 = point;\n        transform0 = transform;\n      }\n      // @ts-ignore\n      this.zoomstart$.call(null, {\n        ...e,\n        transform: [transform, xTransform, yTransform],\n        scaleAxis: getScaleAxis.call(this),\n      });\n    })\n    .on('zoom', (e) => {\n      // @ts-ignore\n      if (this.destroyed || !this.rendered) return;\n      // @ts-ignore\n      let [xTransform, yTransform] = this.zoomSelection$.datum();\n      const { transform, sourceEvent } = e;\n      // sourceEvent存在表示事鼠标触发，如滚轮和移动\n      if (sourceEvent.type !== 'call') {\n        if (!this.xCanZoom$ && !this.yCanZoom$) return;\n        // @ts-ignore\n        const point = d3.pointer(e, this.zoomSelection$.node());\n        // @ts-ignore\n        if (sourceEvent.type === 'mousemove' && !util.isCanEmit(point0, point)) return;\n        const deltK = transform.k / transform0.k;\n        const changed = point[0] !== point0[0] || point[1] !== point0[1];\n        let p = point;\n        if (sourceEvent.type === 'wheel') {\n          // @ts-ignore\n          p = changed ? point : point0;\n        }\n        if (this.xCanZoom$) {\n          let px0 = pointX0;\n          if (sourceEvent.type === 'wheel') {\n            px0 = changed ? xTransform.invert(point) : pointX0;\n          }\n          // @ts-ignore\n          xTransform = this.transform$('x', xTransform, deltK, p, px0);\n        }\n        if (this.yCanZoom$) {\n          let py0 = pointY0;\n          if (sourceEvent.type === 'wheel') {\n            py0 = changed ? yTransform.invert(point) : pointY0;\n          }\n          // @ts-ignore\n          yTransform = this.transform$('y', yTransform, deltK, p, py0);\n        }\n        transform0 = transform;\n      } else if (sourceEvent.transform) {\n        // 如果存在xy缩放，则会有补间调用，万一补间一半，触发了滚轮或移动，则补间会停止，造成无法到达指定缩放位置，所以xy锁定的时候应该忽略补间\n        // e.transform和sourceEvent.transform原本是一样的，但是动画补间的每一次调用时e.transform会变化，直到最后一次才会和sourceEvent.transform一样\n        // sourceEvent.transform是不变的，是最终的指定的transform\n        let xtf = transform;\n        let ytf = transform;\n        if (Array.isArray(sourceEvent.transform)) {\n          xtf = sourceEvent.transform[1];\n          ytf = sourceEvent.transform[2];\n        } else {\n          if (!this.xCanZoom$) xtf = sourceEvent.transform;\n          if (!this.yCanZoom$) ytf = sourceEvent.transform;\n        }\n        if (sourceEvent.zoomX) {\n          xTransform = xtf;\n        }\n        if (sourceEvent.zoomY) {\n          yTransform = ytf;\n        }\n      }\n      // @ts-ignore\n      this.zoomSelection$.datum([xTransform, yTransform]);\n      const scaleAxis = getScaleAxis.call(this);\n      Object.keys(scaleAxis).forEach((key) => {\n        const { axis, scale } = scaleAxis[key];\n        // @ts-ignore\n        this.rootSelection$.select(`.${key}Axis`).call(axis);\n        // @ts-ignore\n        this.rootSelection$.select(`.${key}Label`).call(scaleLable, [this.scale[key], scale.domain()]);\n      });\n      // @ts-ignore\n      this.zooming$.call(null, {\n        ...e,\n        transform: [transform, xTransform, yTransform],\n        scaleAxis,\n      });\n    })\n    .on('end', (e) => {\n      // @ts-ignore\n      if (this.destroyed || !this.rendered) return;\n      const { transform, sourceEvent } = e;\n      if (sourceEvent.type !== 'call') {\n        if (!this.xCanZoom$ && !this.yCanZoom$) return;\n        // @ts-ignore\n        const point = d3.pointer(e, this.zoomSelection$.node());\n        // @ts-ignore\n        if (sourceEvent.type === 'mousemove' && !util.isCanEmit(point0, point)) return;\n        pointX0 = [0, 0];\n        pointY0 = [0, 0];\n        point0 = [0, 0];\n        transform0 = d3.zoomIdentity;\n      }\n      // @ts-ignore\n      this.zoomend$.call(null, {\n        ...e,\n        // @ts-ignore\n        transform: [transform, ...this.zoomSelection$.datum()],\n        scaleAxis: getScaleAxis.call(this),\n      });\n    });\n\n  // @ts-ignore\n  this.zoomSelection$\n    // @ts-ignore\n    .call(this.zoomer$)\n    .on('mouseover', (e) => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      this.mouseover$.call(null, {\n        sourceEvent: e,\n        // @ts-ignore\n        target: this.zoomSelection$,\n        // @ts-ignore\n        transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'mouseover',\n      });\n    })\n    .on('mouseout', (e) => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      if (this.tooptip) {\n        // @ts-ignore\n        const { cross } = this.tooptip;\n        // @ts-ignore\n        const zNode = this.zoomSelection$.node();\n        const { toElement } = e;\n        if (!toElement || (toElement.parentNode !== zNode && toElement.parentNode.parentNode !== zNode)) {\n          if (cross.indexOf('x') !== -1) {\n            // @ts-ignore\n            this.zoomSelection$.select('.x-cross').style('display', 'none');\n          }\n          if (cross.indexOf('y') !== -1) {\n            // @ts-ignore\n            this.zoomSelection$.select('.y-cross').style('display', 'none');\n          }\n          // @ts-ignore\n          this.zoomSelection$.select('.tooptip').style('display', 'none');\n        }\n      }\n      // @ts-ignore\n      this.mouseout$.call(null, {\n        sourceEvent: e,\n        // @ts-ignore\n        target: this.zoomSelection$,\n        // @ts-ignore\n        transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'mouseout',\n      });\n    })\n    .on('mousemove', (e) => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      const scaleAxis = getScaleAxis.call(this);\n      // @ts-ignore\n      if (this.tooptip) {\n        // @ts-ignore\n        const { cross, compute } = this.tooptip;\n        const crossX = cross.indexOf('x') !== -1;\n        const crossY = cross.indexOf('y') !== -1;\n        if (crossX || crossY) {\n          const [x0, y0] = d3.pointer(e);\n          let { x0: x00, y0: y00, result } = compute([x0, y0], scaleAxis);\n          x00 = x00 || x00 === 0 ? x00 : x0;\n          y00 = y00 || y00 === 0 ? y00 : y0;\n          let display = 'none';\n          if (typeof result !== 'function') {\n            result = util.noop;\n          } else {\n            display = 'block';\n          }\n          if (crossX) {\n            // @ts-ignore\n            this.zoomSelection$.select('.x-cross').style('left', `${x00}px`).style('display', display);\n          }\n          if (crossY) {\n            // @ts-ignore\n            this.zoomSelection$.select('.y-cross').style('top', `${y00}px`).style('display', display);\n          }\n          // @ts-ignore\n          const tooptip = this.zoomSelection$.select('.tooptip');\n          tooptip.style('display', display).call(result);\n          if (display !== 'none') {\n            const width = tooptip.node().clientWidth;\n            const height = tooptip.node().clientHeight;\n            let left = x0 + 10;\n            let top = y0 - height - 10;\n            // @ts-ignore\n            if (this.width$ - left < width) {\n              left = x0 - 10 - width;\n            }\n            left = left <= -60 ? -60 : left;\n            top = top <= -20 ? -20 : top;\n            tooptip.style('left', `${left}px`).style('top', `${top}px`);\n          }\n        }\n      }\n      // @ts-ignore\n      this.mouseout$.call(null, {\n        sourceEvent: e,\n        // @ts-ignore\n        target: this.zoomSelection$,\n        // @ts-ignore\n        transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n        scaleAxis,\n        type: 'mousemove',\n      });\n    })\n    .on('click', (e) => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      this.click$.call(null, {\n        sourceEvent: e,\n        // @ts-ignore\n        target: this.zoomSelection$,\n        // @ts-ignore\n        transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'click',\n      });\n    })\n    .on('contextmenu', (e) => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      this.contextmenu$.call(null, {\n        sourceEvent: e,\n        // @ts-ignore\n        target: this.zoomSelection$,\n        // @ts-ignore\n        transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'contextmenu',\n      });\n      e.preventDefault();\n    })\n    .on('dblclick', (e) => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      this.dblclick$.call(null, {\n        sourceEvent: e,\n        // @ts-ignore\n        target: this.zoomSelection$,\n        // @ts-ignore\n        transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'dblclick',\n      });\n    });\n  // @ts-ignore\n  if (!this.zoom.doubleZoom) {\n    // 取消双击放大\n    // @ts-ignore\n    this.zoomSelection$.on('dblclick.zoom', null);\n  }\n  // @ts-ignore\n  if (this.zoom.x) {\n    // @ts-ignore\n    const xlock = this.rootSelection$.select('.xlock');\n    xlock.on('click', () => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      this.setCanZoom('x', !this.xCanZoom$);\n      // @ts-ignore\n      this.canZoom$('x', this.xCanZoom$);\n    });\n  }\n  // @ts-ignore\n  if (this.zoom.y) {\n    // @ts-ignore\n    const ylock = this.rootSelection$.select('.ylock');\n    ylock.on('click', () => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      this.setCanZoom('y', !this.yCanZoom$);\n      // @ts-ignore\n      this.canZoom$('y', this.yCanZoom$);\n    });\n  }\n  // @ts-ignore\n  if (this.zoom.x || this.zoom.y) {\n    // @ts-ignore\n    this.rootSelection$.select('.reset').on('click', () => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      this.reset();\n      // @ts-ignore\n      this.reset$();\n    });\n  }\n  // @ts-ignore\n  if (this.download) {\n    // @ts-ignore\n    this.rootSelection$.select('.download').on('click', () => {\n      // @ts-ignore\n      if (this.destroyed) return;\n      // @ts-ignore\n      if (this.download.action) {\n        // @ts-ignore\n        this.download.action(() => {\n          // @ts-ignore\n          this.downloadImage();\n          // @ts-ignore\n        }, this.rootSelection$);\n      } else {\n        // @ts-ignore\n        this.downloadImage();\n      }\n    });\n  }\n}\nclass BaseChart {\n  constructor(...params) {\n    const {\n      container,\n      width,\n      height,\n      padding = [0, 0, 0, 0],\n      rWidth,\n      rHeight,\n      fontSize = 12,\n      download,\n      tooptip,\n      zoom,\n      scale,\n      data,\n    } = params[0] || {};\n    this.destroyed = false;\n    this.rendered = false;\n    if (typeof download === 'function') {\n      this.download = { action: download };\n    } else if (typeof download === 'string') {\n      this.download = { ext: download };\n    } else {\n      this.download = download || false;\n    }\n    this.tooptip = !tooptip\n      ? false\n      : {\n          cross: '',\n          ...tooptip,\n          compute: (...args) => {\n            let result = {};\n            if (typeof tooptip.compute === 'function') {\n              result = tooptip.compute.call(this, result, ...args);\n            }\n            return result;\n          },\n        };\n    this.zoom = {\n      /* x: {\n\t\t\t\t\t// 一旦domain设置了x或x2的某一类型，则translate和precision都要按照这一类型数据设置\n\t\t\t\t\tdomain: 'x', // 坐标缩放为1，位移为0时的坐标范围（会默认取scale的x或x2的domain)\n\t\t\t\t\ttranslate: [-Infinity, Infinity], // 坐标标尺可以拖动的范围值\n\t\t\t\t\tprecision: [(1 - 0) / 10, (1 - 0) * 10], // 坐标标尺缩到最小和最大的跨度值\n\t\t\t\t}, */\n      x: null,\n      y: null,\n      doubleZoom: false,\n      ...zoom,\n    };\n    this.scale = {\n      /* x: {\n\t\t\t\t\ttype: 'linear', // 坐标类型\n\t\t\t\t\tticks: 5, // 坐标刻度数目\n\t\t\t\t\tformat: (v) => v, // 坐标值格式化函数\n\t\t\t\t\tdomain: [0, 1], // 横坐标缩放为1，位移为0时的坐标范围\n\t\t\t\t\tlabel: '', // 坐标名称\n\t\t\t\t\tunit: '', // 坐标值单位\n\t\t\t\t}, */\n      x: null,\n      x2: null,\n      y: null,\n      y2: null,\n      ...scale,\n    };\n    this.fontSize = fontSize;\n    this.data = data || {};\n    this.dataDomains$ = {};\n    this.zoomer$ = d3.zoom();\n    this.xCanZoom$ = !!this.zoom.x;\n    this.yCanZoom$ = !!this.zoom.y;\n    createElement.call(this, container, { width, height, padding, rWidth, rHeight });\n    createScale.call(this);\n    createZoom.call(this);\n    bindEvents.call(this);\n    this.click$ = util.noop;\n    this.dblclick$ = util.noop;\n    this.contextmenu$ = util.noop;\n    this.mouseover$ = util.noop;\n    this.mousemove$ = util.noop;\n    this.mouseout$ = util.noop;\n    this.zoomstart$ = util.noop;\n    this.zooming$ = util.noop;\n    this.zoomend$ = util.noop;\n    this.resize$ = util.noop;\n    this.reset$ = util.noop;\n    this.canZoom$ = util.noop;\n  }\n\n  reset(ta) {\n    this.render(d3.zoomIdentity, 'xy', ta);\n    return this;\n  }\n\n  render(tf, ax = 'xy', ta = true) {\n    this.rendered = true;\n    // @ts-ignore\n    const transform = (Array.isArray(tf) ? tf[0] : tf) || d3.zoomTransform(this.zoomSelection$.node());\n    // 对this.zoomSelection$调用this.zoomer$.transform函数变换到指定的transform\n    // 变换过程中用240ms及ease函数进行transition\n    // @ts-ignore\n    (!ta ? this.zoomSelection$ : this.zoomSelection$.transition().duration(240).ease(d3.easeLinear)).call(\n      this.zoomer$.transform,\n      transform,\n      null,\n      {\n        type: 'call',\n        transform: tf,\n        zoomX: ax.indexOf('x') !== -1,\n        zoomY: ax.indexOf('y') !== -1,\n      }\n    );\n    return this;\n  }\n\n  getCanZoom() {\n    return [this.xCanZoom$, this.yCanZoom$];\n  }\n\n  getTransform() {\n    // @ts-ignore\n    return [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()];\n  }\n\n  setCanZoom(ax = 'xy', canZoom = true) {\n    let xCanZoom = canZoom;\n    let yCanZoom = canZoom;\n    if (Array.isArray(canZoom)) {\n      [xCanZoom = true, yCanZoom = true] = canZoom;\n    }\n    if (ax.indexOf('x') !== -1) {\n      this.xCanZoom$ = xCanZoom;\n      this.rootSelection$\n        .select('.xlock')\n        .select('path')\n        .attr('d', xCanZoom ? unlockPath : lockPath);\n    }\n    if (ax.indexOf('y') !== -1) {\n      this.yCanZoom$ = yCanZoom;\n      this.rootSelection$\n        .select('.ylock')\n        .select('path')\n        .attr('d', yCanZoom ? unlockPath : lockPath);\n    }\n    return this;\n  }\n\n  setEvent(type, handler) {\n    if (typeof handler === 'function') {\n      const oldHandler = this[`${type}$`];\n      this[`${type}$`] = (...args) => {\n        handler.call(null, ...args, oldHandler.call(null, ...args));\n      };\n    }\n  }\n\n  runEvent(type, data = {}) {\n    if (this.destroyed) return;\n    const { sourceEvent, transform, scaleAxis, target } = data;\n    this[`${type}$`].call(null, {\n      type,\n      sourceEvent: sourceEvent || null,\n      // @ts-ignore\n      target: target || this.zoomSelection$,\n      // @ts-ignore\n      transform: transform || [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n      scaleAxis: scaleAxis || getScaleAxis.call(this),\n    });\n  }\n\n  getData() {\n    return this.data;\n  }\n\n  setData(data, render, computeDomain = util.noop) {\n    if (!data) return this;\n    this.rendered = false;\n    this.data = data;\n    // 根据data计算domain\n    const needCompute = axisType.filter((key) => this.scale[key] && !this.scale[key].domain);\n    if (needCompute.length > 0) {\n      // @ts-ignore\n      this.dataDomains$ = computeDomain(this.data, needCompute) || {};\n      updateScale.call(this);\n      updateZoom.call(this);\n    }\n    if (render) {\n      this.render();\n    }\n    return this;\n  }\n\n  setDomain(domain, render) {\n    if (!domain) return this;\n    let isScale = false;\n    axisType.forEach((key) => {\n      if (this.scale[key] && domain[key]) {\n        this.scale[key].domain = domain[key];\n        isScale = true;\n      }\n    });\n    if (isScale) {\n      this.rendered = false;\n      updateScale.call(this);\n      let isZoom = false;\n      ['x', 'y'].forEach((key) => {\n        isZoom = this.zoom[key] && ((this.scale[key] && domain[key]) || (this.scale[`${key}2`] && domain[`${key}2`]));\n      });\n      if (isZoom) {\n        updateZoom.call(this);\n      }\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setTranslate(translate, render) {\n    if (!translate) return this;\n    let isZoom = false;\n    ['x', 'y'].forEach((key) => {\n      if (this.zoom[key]) {\n        this.zoom[key].translate = translate[key];\n        isZoom = true;\n      }\n    });\n    if (isZoom) {\n      this.rendered = false;\n      updateZoom.call(this);\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setPrecision(precision, render) {\n    if (!precision) return this;\n    let isZoom = false;\n    ['x', 'y'].forEach((key) => {\n      if (this.zoom[key]) {\n        this.zoom[key].precision = precision[key];\n        isZoom = true;\n      }\n    });\n    if (isZoom) {\n      this.rendered = false;\n      updateZoom.call(this);\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setLabel(label, render) {\n    if (!label) return this;\n    let isScale = false;\n    axisType.forEach((key) => {\n      if (this.scale[key] && label[key]) {\n        this.scale[key].label = label[key].label;\n        this.scale[key].unit = label[key].unit;\n        isScale = true;\n      }\n    });\n    if (isScale) {\n      this.rendered = false;\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  destroy() {\n    this.destroyed = true;\n    this.rendered = false;\n    this.data = {};\n    this.zoomer$.on('start', null).on('zoom', null).on('end', null);\n    // @ts-ignore\n    this.zoomSelection$\n      .on('mouseover', null)\n      .on('mouseout', null)\n      .on('mousemove', null)\n      .on('dblclick.zoom', null)\n      .on('click', null)\n      .on('contextmenu', null);\n    // @ts-ignore\n    if (this.unBindResize$) this.unBindResize$();\n    this.rootSelection$.remove();\n    this.rootSelection$ = null;\n  }\n\n  resize() {\n    if (document.createEvent) {\n      const event = document.createEvent('Event');\n      event.initEvent('resize', true, true);\n      window.dispatchEvent(event);\n      // @ts-ignore\n    } else if (document.createEventObject) {\n      // @ts-ignore\n      const event = document.createEventObject();\n      event.type = 'onresize';\n      // @ts-ignore\n      window.fireEvent('onresize', event);\n    }\n    return this;\n  }\n\n  downloadImage(name, content) {\n    const svgSel = this.rootSelection$.select('svg');\n    const width = +svgSel.attr('width');\n    const height = +svgSel.attr('height');\n    const tempCanvas = document.createElement('canvas');\n    tempCanvas.width = width;\n    tempCanvas.height = height;\n    const tempCxt = tempCanvas.getContext('2d');\n    tempCxt.clearRect(0, 0, width, height);\n    if (content) {\n      tempCxt.drawImage(content.image, content.x, content.y);\n    }\n    const tempImage = new Image();\n    tempImage.src = `data:image/svg+xml;base64,${window.btoa(\n      window.unescape(\n        window.encodeURIComponent(\n          `<?xml version=\"1.0\" standalone=\"no\"?>\n          ${new XMLSerializer().serializeToString(svgSel.node())}`\n        )\n      )\n    )}`;\n    const ext = this.download.ext || 'png';\n    tempImage.onload = () => {\n      tempCxt.drawImage(tempImage, 0, 0);\n      const a = document.createElement('a');\n      a.download = `${name || 'basechart'}.${ext}`;\n      a.href = tempCanvas.toDataURL(`image/${ext}`);\n      a.click();\n    };\n  }\n}\n\nexport default BaseChart;\n"],"file":"index.js"}