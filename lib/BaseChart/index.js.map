{"version":3,"sources":["../../src/BaseChart/index.js"],"names":["iconSize","downloadPath","resetPath","lockPath","unlockPath","actionButtons","download","label","path","className","reset","xlock","ylock","axisType","scaleType","cat","d3","scaleBand","timeCat","time","scaleTime","linear","scaleLinear","log","scaleLog","sqrt","scaleSqrt","pow","scalePow","quantize","scaleQuantize","quantile","scaleQuantile","identity","scaleIdentity","timeFormat","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatMonth","formatYear","prefixSIFormat","format","exponentFormat","roundFormat","getDefaultFormat","type","date","ax","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeYear","v","computeSize","element","width","height","padding","rWidth","rHeight","w","h","style","getComputedStyle","util","isNumber","clientWidth","parseInt","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","top","right","bottom","left","pad","Array","isArray","pad0","pad1","pad2","pad3","length","Math","max","scaleLable","labelSel","scale","domain","unit","min","select","selectAll","data","join","attr","_","i","text","getScaleAxis","zoomSelection$","datum","xTransform","yTransform","scaleAxis","forEach","key","rescale$","axis","updateScale","axisScale$","dataDomains$","minDomain","maxDomain","range","width$","height$","nice","niceDomain","createScale","axisScale","ticks","tickSize","axisTop","axisLeft","axisRight","axisBottom","defaultFormat","tickFormat","val","call","transform","as","recale","rescaleX","rescaleY","updateZoom","viewExtent","scaleExtent","translateExtent","zoom","xzoom","x","yzoom","y","map","xdomain","ydomain","xMinDomain","xMaxDomain","yMinDomain","yMaxDomain","xDomainEx","yDomainEx","translate","Infinity","xMinTranslate","xMaxTranslate","yMinTranslate","yMaxTranslate","precision","xMinPrecision","xMaxPrecision","yMinPrecision","yMaxPrecision","xRate","yRate","zoomer$","extent","zoomExtent$","createZoom","transform$","tf","t","p","l","tk","k","tx","ty","constrain","zoomIdentity","updateElement","size","rootSelection$","node","zw","zh","group","baselineDelt","fontSize","showRange","x2","y2","svgDiv","offset","createElement","container","svgXmlns","rootSelection","document","append","svgSelection","pathClipId","guid","groupSelection","divSelection","zoomSelection","actions","push","action","tooptip","cross","split","resize","debounce","e","destroyed","rendered","resize$","sourceEvent","target","zoomTransform","leading","trailing","window","addEventListener","unBindResize$","removeEventListener","bindEvents","point","transform0","longPress","showTooptip","compute","crossX","indexOf","crossY","x0","y0","x00","y00","result","display","noop","selection","hideTooptip","zNode","parentNode","on","restEvent","touches","xCanZoom$","yCanZoom$","len","touch","item","pointer","invert","identifier","setTimeout","zoomstart$","newXTransform","newYTransform","eventTransform","lx","ly","np","np1","pt","p1","lx1","ly1","changed","wheel","xtf","ytf","zoomX","zoomY","Object","keys","clearTimeout","zooming$","zoomend$","click$","dblclick$","contextmenu$","preventDefault","navigator","maxTouchPoints","relatedTarget","doubleZoom","setCanZoom","canZoom$","reset$","downloadImage","BaseChart","ext","args","ta","render","transition","duration","ease","easeLinear","canZoom","xCanZoom","yCanZoom","handler","oldHandler","computeDomain","needCompute","filter","isScale","isZoom","remove","createEvent","event","initEvent","dispatchEvent","createEventObject","fireEvent","name","content","svgSel","tempCanvas","tempCxt","getContext","clearRect","drawImage","image","tempImage","Image","src","btoa","unescape","encodeURIComponent","XMLSerializer","serializeToString","onload","a","href","toDataURL","click"],"mappings":"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","sourcesContent":["// @ts-nocheck\n/*\n * @Author: Huangjs\n * @Date: 2021-03-17 16:23:00\n * @LastEditors: Huangjs\n * @LastEditTime: 2022-07-05 11:29:27\n * @Description: 基础图表构造器\n */\n\nimport * as d3 from 'd3';\nimport * as util from '../util';\n\nconst iconSize = 18;\nconst downloadPath =\n  'M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z';\nconst resetPath =\n  'M483.031 380.989v-61.004l-162.969 92.891 162.969 99.24v-64.04c128.025 0.122 157.093 64.052 157.093 94.107 0 33.863-29.068 97.771-157.093 97.771l-98.957 0.011v63.919l98.957-0.011c157.093 0.011 221.105-63.907 221.105-159.017 0.001-96.647-64.012-163.856-221.105-163.867 M511.372 64.548c-247.628 0-448.369 200.319-448.369 447.426S263.744 959.4 511.372 959.4s448.369-200.32 448.369-447.426S758.999 64.548 511.372 64.548z m-0.203 823.564c-207.318 0-375.382-167.71-375.382-374.592s168.064-374.592 375.382-374.592 375.382 167.71 375.382 374.592-168.064 374.592-375.382 374.592z';\nconst lockPath =\n  'M650 432.6v-99.4c0-76.3-61.8-138.1-138.1-138.1S373.8 258 373.8 334.3v99.4H650z m-382.9 1.1l-0.1-3.1V322.5c0-59.9 23.8-117.4 66.2-159.8C375.6 120.3 433 96.5 493 96.5h37.9c124.8 0 225.9 101.2 225.9 225.9v111.3c58.2 8.1 101.5 57.9 101.5 116.7v258.3c0 65.1-52.7 117.8-117.8 117.8H283.3c-65.1 0-117.8-52.7-117.8-117.8V550.5c0-58.8 43.3-108.6 101.6-116.8z m217.6 266v77c0 15 12.2 27.2 27.2 27.2s27.2-12.2 27.2-27.2v-77c33.5-13.1 53-48.2 46.3-83.5-6.7-35.4-37.5-61-73.5-61s-66.9 25.6-73.5 61c-6.7 35.3 12.8 70.4 46.3 83.5z';\nconst unlockPath =\n  'M650 432.6v-99.4c0-76.3-61.8-138.1-138.1-138.1S373.8 258 373.8 334.3v99.4H650z m-382.9 1.1l-0.1-3.1V322.5c0-59.9 23.8-117.4 66.2-159.8C375.6 120.3 433 96.5 493 96.5h37.9c124.8 0 225.9 101.2 225.9 225.9v111.3c58.2 8.1 101.5 57.9 101.5 116.7v258.3c0 65.1-52.7 117.8-117.8 117.8H283.3c-65.1 0-117.8-52.7-117.8-117.8V550.5c0-58.8 43.3-108.6 101.6-116.8z m217.6 266v77c0 15 12.2 27.2 27.2 27.2s27.2-12.2 27.2-27.2v-77c33.5-13.1 53-48.2 46.3-83.5-6.7-35.4-37.5-61-73.5-61s-66.9 25.6-73.5 61c-6.7 35.3 12.8 70.4 46.3 83.5zm272 -369h-106.5v103h106.5z';\nconst actionButtons = {\n  download: {\n    label: '下载视图',\n    path: downloadPath,\n    className: 'download',\n  },\n  reset: {\n    label: '重置视图',\n    path: resetPath,\n    className: 'reset',\n  },\n  xlock: {\n    label: 'X轴缩放开关',\n    path: unlockPath,\n    className: 'xlock',\n  },\n  ylock: {\n    label: 'Y轴缩放开关',\n    path: unlockPath,\n    className: 'ylock',\n  },\n};\nconst axisType = ['x', 'x2', 'y', 'y2'];\nconst scaleType = {\n  cat: () => d3.scaleBand(),\n  timeCat: () => d3.scaleBand(),\n  time: () => d3.scaleTime(),\n  linear: () => d3.scaleLinear(),\n  log: () => d3.scaleLog(),\n  sqrt: () => d3.scaleSqrt(),\n  pow: () => d3.scalePow(),\n  // sequential: () => d3.scaleSequential(),\n  quantize: () => d3.scaleQuantize(),\n  quantile: () => d3.scaleQuantile(),\n  identity: () => d3.scaleIdentity(),\n};\nconst timeFormat = d3.timeFormat('%Y-%m-%d %H:%M:%S');\nconst formatMillisecond = d3.timeFormat('.%L');\nconst formatSecond = d3.timeFormat(':%S');\nconst formatMinute = d3.timeFormat('%H:%M');\nconst formatHour = d3.timeFormat('%H:00');\nconst formatDay = d3.timeFormat('%m-%d');\nconst formatMonth = d3.timeFormat('%m月');\nconst formatYear = d3.timeFormat('%Y年');\nconst prefixSIFormat = d3.format('.4~s');\nconst exponentFormat = d3.format('.4~g');\nconst roundFormat = d3.format('.4~r');\nconst getDefaultFormat = (type) => {\n  if (type === 'time') {\n    return (date, ax) => {\n      if (!ax) {\n        return timeFormat(date);\n      }\n      if (d3.timeSecond(date) < date) {\n        return formatMillisecond(date);\n      }\n      if (d3.timeMinute(date) < date) {\n        return formatSecond(date);\n      }\n      if (d3.timeHour(date) < date) {\n        return formatMinute(date);\n      }\n      if (d3.timeDay(date) < date) {\n        return formatHour(date);\n      }\n      if (d3.timeMonth(date) < date) {\n        return formatDay(date);\n      }\n      if (d3.timeYear(date) < date) {\n        return formatMonth(date);\n      }\n      return formatYear(date);\n    };\n  }\n  if (type === 'log') {\n    return exponentFormat;\n  }\n  if (type === 'sqrt') {\n    return roundFormat;\n  }\n  if (type === 'linear' || type === 'pow') {\n    return prefixSIFormat;\n  }\n  return (v) => v;\n};\nconst computeSize = (element, { width, height, padding, rWidth, rHeight }) => {\n  let w = width;\n  let h = height;\n  const style = getComputedStyle(element);\n  if (!(util.isNumber(width) && width > 1)) {\n    w =\n      (element.clientWidth || parseInt(style.width, 10)) -\n      parseInt(style.paddingLeft, 10) -\n      parseInt(style.paddingRight, 10);\n  }\n  if (!(util.isNumber(height) && height > 1)) {\n    h =\n      (element.clientHeight || parseInt(style.height, 10)) -\n      parseInt(style.paddingTop, 10) -\n      parseInt(style.paddingBottom, 10);\n  }\n  let [top, right, bottom, left] = [];\n  const pad = Array.isArray(padding) ? padding : [];\n  let [pad0, pad1, pad2, pad3] = pad;\n  pad0 = !util.isNumber(pad0) || pad0 < 0 ? 0 : pad0;\n  pad1 = !util.isNumber(pad1) || pad1 < 0 ? 0 : pad1;\n  pad2 = !util.isNumber(pad2) || pad2 < 0 ? 0 : pad2;\n  pad3 = !util.isNumber(pad3) || pad3 < 0 ? 0 : pad3;\n  if (!pad.length) {\n    top = 0;\n    right = top;\n    bottom = top;\n    left = top;\n  } else if (pad.length === 1) {\n    top = pad0;\n    right = top;\n    bottom = top;\n    left = top;\n  } else if (pad.length === 2) {\n    top = pad0;\n    right = pad1;\n    bottom = top;\n    left = right;\n  } else if (pad.length === 3) {\n    top = pad0;\n    right = pad1;\n    bottom = pad2;\n    left = right;\n  } else {\n    top = pad0;\n    right = pad1;\n    bottom = pad2;\n    left = pad3;\n  }\n  return {\n    width: Math.max(util.isNumber(w) ? w : 1, 1),\n    height: Math.max(util.isNumber(h) ? h : 1, 1),\n    padding: [top, right, bottom, left],\n    rWidth: util.isNumber(rWidth) ? rWidth : 0,\n    rHeight: util.isNumber(rHeight) ? rHeight : 0,\n  };\n};\nconst scaleLable = (labelSel, [scale, domain]) => {\n  let { type, format, label, unit } = scale;\n  type = type || 'linear';\n  label = label || '';\n  unit = !label || !unit ? '' : ` ( ${unit} )`;\n  format = format || getDefaultFormat(type);\n  let [min, max] = domain;\n  min = min || 0;\n  max = max || 0;\n  labelSel\n    .select('text')\n    .selectAll('tspan')\n    .data([0, 1])\n    .join('tspan')\n    .attr('dx', (_, i) => {\n      if (!label) return 0;\n      return i === 0 ? -12 : 12;\n    })\n    .text((_, i) => (i === 0 ? `${label}${unit}` : `${format(min)} - ${format(max)}`));\n};\nfunction getScaleAxis() {\n  const [xTransform, yTransform] = this.zoomSelection$.datum();\n  const scaleAxis = {};\n  axisType.forEach((key) => {\n    if (this.scale[key]) {\n      const { scale, axis } = this.rescale$(key === 'x' || key === 'x2' ? xTransform : yTransform, key);\n      scaleAxis[key] = {\n        axis,\n        scale,\n      };\n    }\n  });\n  return scaleAxis;\n}\nfunction updateScale() {\n  axisType.forEach((key) => {\n    if (this.axisScale$[key]) {\n      const [minDomain, maxDomain] = this.scale[key].domain || this.dataDomains$[key] || [0, 1];\n      this.axisScale$[key].scale\n        .range(key === 'x' || key === 'x2' ? [0, this.width$] : [this.height$, 0])\n        .domain([minDomain || 0, maxDomain || 1]);\n      if (this.scale[key].nice) {\n        this.axisScale$[key].scale.nice();\n        const niceDomain = this.axisScale$[key].scale.domain();\n        if (this.scale[key].domain) {\n          this.scale[key].domain = niceDomain;\n        }\n        if (this.dataDomains$[key]) {\n          this.dataDomains$[key] = niceDomain;\n        }\n      }\n    }\n  });\n}\nfunction createScale() {\n  const axisScale = {};\n  axisType.forEach((key) => {\n    if (this.scale[key]) {\n      const { type = 'linear', ticks = 5, tickSize, format } = this.scale[key];\n      const scale = scaleType[type]();\n      let axis = null;\n      if (key === 'x2') {\n        axis = d3.axisTop(scale);\n      } else if (key === 'y') {\n        axis = d3.axisLeft(scale);\n      } else if (key === 'y2') {\n        axis = d3.axisRight(scale);\n      } else {\n        axis = d3.axisBottom(scale);\n      }\n      if (ticks) {\n        axis = axis.ticks(ticks);\n      }\n      if (tickSize) {\n        axis = axis.tickSize(tickSize);\n      }\n      const defaultFormat = getDefaultFormat(type);\n      if (!format) {\n        this.scale[key].format = defaultFormat;\n      }\n      axis = axis.tickFormat(format || ((val) => defaultFormat(val, true)));\n      axisScale[key] = { scale, axis };\n    }\n  });\n  this.axisScale$ = axisScale;\n  updateScale.call(this);\n  this.rescale$ = (transform, key) => {\n    const as = this.axisScale$[key];\n    if (as) {\n      const { scale, axis } = as;\n      const recale = key === 'x' || key === 'x2' ? transform.rescaleX(scale) : transform.rescaleY(scale);\n      return {\n        scale: recale,\n        axis: axis.scale(recale),\n      };\n    }\n    return as;\n  };\n}\nfunction updateZoom() {\n  const viewExtent = [\n    [0, 0],\n    [this.width$, this.height$],\n  ];\n  let scaleExtent = [\n    [1, 1],\n    [1, 1],\n  ];\n  let translateExtent = [\n    [0, 0],\n    [0, 0],\n  ];\n  const { x: xzoom, y: yzoom } = this.zoom;\n  if (xzoom || yzoom) {\n    const [xdomain, ydomain] = [xzoom, yzoom].map((zoom, i) => {\n      const key = zoom.domain || (i === 0 ? 'x' : 'y');\n      let domain = [0, 1];\n      if (this.scale[key]) {\n        domain = this.scale[key].domain || this.dataDomains$[key] || [0, 1];\n      }\n      return domain;\n    });\n    const [xMinDomain, xMaxDomain] = xdomain;\n    const [yMinDomain, yMaxDomain] = ydomain;\n    const xDomainEx = (xMaxDomain || 1) - (xMinDomain || 0);\n    const yDomainEx = (yMaxDomain || 1) - (yMinDomain || 0);\n    const [xMinTranslate = 0, xMaxTranslate = 0] = xzoom.translate || [-Infinity, Infinity];\n    const [yMinTranslate = 0, yMaxTranslate = 0] = yzoom.translate || [-Infinity, Infinity];\n    const [xMinPrecision = xDomainEx / 10, xMaxPrecision = xDomainEx * 10] = xzoom.precision || [\n      xDomainEx / 10,\n      xDomainEx * 10,\n    ];\n    const [yMinPrecision = yDomainEx / 10, yMaxPrecision = yDomainEx * 10] = yzoom.precision || [\n      yDomainEx / 10,\n      yDomainEx * 10,\n    ];\n    const xRate = this.width$ / xDomainEx;\n    const yRate = this.height$ / yDomainEx;\n    scaleExtent = [\n      [xDomainEx / xMaxPrecision || 1, yDomainEx / yMaxPrecision || 1],\n      [xDomainEx / xMinPrecision || 1, yDomainEx / yMinPrecision || 1],\n    ];\n    translateExtent = [\n      [\n        (xMinTranslate - (xMinDomain || 0)) * xRate || xMinDomain || 0,\n        ((yMaxDomain || 1) - yMaxTranslate) * yRate || yMinDomain || 0,\n      ],\n      [\n        (xMaxTranslate - (xMinDomain || 0)) * xRate || xMaxDomain || 1,\n        ((yMaxDomain || 1) - yMinTranslate) * yRate || yMaxDomain || 1,\n      ],\n    ];\n  }\n  this.zoomer$\n    .extent(viewExtent)\n    .scaleExtent([(scaleExtent[0][0] * scaleExtent[0][1]) ** 2, (scaleExtent[1][0] * scaleExtent[1][1]) ** 2])\n    .translateExtent(translateExtent);\n  this.zoomExtent$ = { viewExtent, scaleExtent, translateExtent };\n}\nfunction createZoom() {\n  this.zoomExtent$ = null;\n  updateZoom.call(this);\n  this.transform$ = (axis, tf, t, p, l) => {\n    let transform = tf;\n    if (this.zoomExtent$) {\n      const { viewExtent, translateExtent, scaleExtent } = this.zoomExtent$;\n      const tk = Math.max(\n        axis === 'x' ? scaleExtent[0][0] : scaleExtent[0][1],\n        Math.min(axis === 'x' ? scaleExtent[1][0] : scaleExtent[1][1], transform.k * t)\n      );\n      const tx = p[0] - tk * l[0];\n      const ty = p[1] - tk * l[1];\n      if (tk !== transform.k || tx !== transform.x || ty !== transform.y) {\n        transform = this.zoomer$.constrain()(d3.zoomIdentity.translate(tx, ty).scale(tk), viewExtent, translateExtent);\n      }\n    }\n    return transform;\n  };\n}\nfunction updateElement(size) {\n  const { width, height, padding, rWidth, rHeight } = computeSize(this.rootSelection$.node(), size);\n  let zw = width - rWidth - padding[3] - padding[1];\n  let zh = height - rHeight - padding[0] - padding[2];\n  if (zw < 1) zw = 1;\n  if (zh < 1) zh = 1;\n  const group = this.rootSelection$\n    .select('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .select('g.group')\n    .attr('transform', `translate(${padding[3]},${padding[0]})`);\n  this.rootSelection$.select('clipPath').select('rect').attr('width', zw).attr('height', zh);\n  const baselineDelt = this.fontSize + 2;\n  if (this.scale.x) {\n    group.select('.xAxis').attr('transform', `translate(0,${zh})`);\n    if (this.scale.x.showRange || typeof this.scale.x.showRange === 'undefined') {\n      group\n        .select('.xLabel')\n        .attr('transform', `translate(${zw / 2} ${zh + padding[2] - iconSize + baselineDelt}) rotate(0)`);\n    }\n  }\n  if (this.scale.x2 && (this.scale.x2.showRange || typeof this.scale.x2.showRange === 'undefined')) {\n    group.select('.x2Label').attr('transform', `translate(${zw / 2} ${baselineDelt - padding[0]}) rotate(0)`);\n  }\n  if (this.scale.y && (this.scale.y.showRange || typeof this.scale.y.showRange === 'undefined')) {\n    group.select('.yLabel').attr('transform', `translate(${baselineDelt - padding[3]} ${zh / 2}) rotate(-90)`);\n  }\n  if (this.scale.y2) {\n    group.select('.y2Axis').attr('transform', `translate(${zw},0)`);\n    if (this.scale.y2.showRange || typeof this.scale.y2.showRange === 'undefined') {\n      group\n        .select('.y2Label')\n        .attr('transform', `translate(${zw + padding[1] - iconSize + baselineDelt} ${zh / 2}) rotate(-90)`);\n    }\n  }\n  const svgDiv = this.rootSelection$\n    .select('div.actions')\n    .style('width', `${zw}px`)\n    .style('height', `${zh}px`)\n    .style('top', `${padding[0]}px`)\n    .style('left', `${padding[3]}px`);\n  if (this.zoom.x) {\n    svgDiv\n      .select('.xlock')\n      .style('top', `${this.scale.x ? zh + padding[2] - iconSize : -padding[0]}px`)\n      .style('left', `${this.scale.y ? zw - iconSize / 2 : -iconSize / 2}px`);\n  }\n  if (this.zoom.y) {\n    svgDiv\n      .select('.ylock')\n      .style('top', `${this.scale.x ? -iconSize / 2 : zh - iconSize / 2}px`)\n      .style('left', `${this.scale.y ? -padding[3] : zw + padding[1] - iconSize}px`);\n  }\n  let offset = 5;\n  if (this.zoom.x || this.zoom.y) {\n    svgDiv\n      .select('.reset')\n      .style('top', `${this.scale.x ? -padding[0] : zh + padding[2] - iconSize}px`)\n      .style('left', `${this.scale.y ? zw - offset - iconSize : offset}px`);\n    offset += 23;\n  }\n  if (this.download) {\n    svgDiv\n      .select('.download')\n      .style('top', `${this.scale.x ? -padding[0] : zh + padding[2] - iconSize}px`)\n      .style('left', `${this.scale.y ? zw - offset - iconSize : offset}px`);\n    offset += 23;\n  }\n  group\n    .select('.zLabel')\n    .attr(\n      'transform',\n      `translate(${this.scale.y ? zw - offset : offset} ${\n        (this.scale.x ? -padding[0] : zh + padding[2] - iconSize) + baselineDelt\n      })`\n    );\n\n  this.width = width;\n  this.height = height;\n  this.padding = padding;\n  this.width$ = zw;\n  this.height$ = zh;\n}\nfunction createElement(container, size) {\n  const svgXmlns = 'http://www.w3.org/2000/svg';\n  const rootSelection = d3\n    .select(container || document.createElement('div'))\n    .append('div')\n    .attr('class', 'd3chart')\n    .style('position', 'relative')\n    // .style('overflow', 'hidden')\n    .style('width', '100%')\n    .style('height', '100%');\n  const svgSelection = rootSelection\n    .append('svg')\n    .attr('xmlns', svgXmlns)\n    .attr('width', 1) // 清除默认宽高\n    .attr('height', 1) // 清除默认宽高\n    .attr('fill', 'none')\n    .attr('text-anchor', 'middle')\n    .attr('font-size', this.fontSize)\n    .attr('stroke', 'none')\n    .attr('stroke-width', 1)\n    .attr('stroke-linejoin', 'round')\n    .attr('stroke-linecap', 'round')\n    .style('position', 'absolute');\n  const pathClipId = util.guid('clip');\n  svgSelection.append('defs').append('svg:clipPath').attr('id', pathClipId).append('rect');\n  const groupSelection = svgSelection.append('g').attr('class', 'group');\n  axisType.forEach((key) => {\n    if (this.scale[key]) {\n      groupSelection.append('g').attr('class', `${key}Axis`);\n      if (this.scale[key].showRange || typeof this.scale[key].showRange === 'undefined') {\n        groupSelection.append('g').attr('class', `${key}Label`).attr('fill', 'currentColor').append('text');\n      }\n    }\n  });\n  groupSelection.append('g').attr('class', 'zAxis').attr('clip-path', `url(#${pathClipId})`);\n  groupSelection.append('g').attr('class', 'zLabel').attr('fill', 'currentColor');\n  const divSelection = rootSelection\n    .append('div')\n    .attr('class', 'actions')\n    .style('position', 'absolute')\n    .style('top', 0)\n    .style('left', 0);\n  const zoomSelection = divSelection\n    .append('div')\n    .attr('class', 'xyzoom')\n    .style('position', 'absolute')\n    // .style('overflow', 'hidden')\n    .style('background', 'rgba(0,0,0,0)') // IE9,10的层级（z-index）不起作用，需要加个背景使鼠标事件生效\n    .style('width', '100%')\n    .style('height', '100%')\n    .style('top', 0)\n    .style('left', 0);\n  const actions = [];\n  if (this.zoom) {\n    if (this.zoom.x) {\n      actions.push(actionButtons.xlock);\n    }\n    if (this.zoom.y) {\n      actions.push(actionButtons.ylock);\n    }\n    if (this.zoom.x || this.zoom.y) {\n      actions.push(actionButtons.reset);\n    }\n  }\n  if (this.download) {\n    actions.push(actionButtons.download);\n  }\n  actions.forEach((action) => {\n    divSelection\n      .append('div')\n      .attr('class', action.className)\n      .style('position', 'absolute')\n      .attr('title', action.label)\n      .style('display', 'inline-flex')\n      .style('font-size', `${iconSize}px`)\n      .append('svg')\n      .attr('xmlns', svgXmlns)\n      .attr('fill', 'currentColor')\n      .attr('viewBox', '0 0 1024 1024')\n      .attr('width', '1em')\n      .attr('height', '1em')\n      .append('path')\n      .attr('d', action.path);\n  });\n  if (this.tooptip) {\n    const { cross } = this.tooptip;\n    zoomSelection\n      .append('div')\n      .attr('class', 'tooptip')\n      .style('display', 'none')\n      .style('z-index', '999')\n      .style('border-radius', '8px')\n      .style('transition', 'none')\n      .style('padding', '10px 14px')\n      .style('font-size', `${this.fontSize}px`)\n      .style('line-height', '22px')\n      .style('position', 'absolute')\n      .style('top', 0)\n      .style('left', 0);\n    cross.split('').forEach((key) => {\n      if (key) {\n        zoomSelection\n          .append('div')\n          .attr('class', `${key}-cross`)\n          .style('display', 'none')\n          .style('position', 'absolute')\n          .style('transition', 'none')\n          .style('width', key === 'x' ? '1px' : '100%')\n          .style('height', key === 'x' ? '100%' : '1px')\n          .style('top', 0)\n          .style('left', 0);\n      }\n    });\n  }\n  this.rootSelection$ = rootSelection;\n  this.zoomSelection$ = zoomSelection;\n  updateElement.call(this, size);\n  if (!(util.isNumber(size.width) && size.width > 1 && util.isNumber(size.height) && size.height > 1)) {\n    const resize = util.debounce(\n      (e) => {\n        if (this.destroyed) return;\n        updateElement.call(this, size);\n        updateScale.call(this);\n        updateZoom.call(this);\n        if (this.rendered) {\n          this.reset();\n        }\n        this.resize$.call(\n          null,\n          {\n            sourceEvent: e || null,\n            target: this.rootSelection$,\n            transform: [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n            scaleAxis: getScaleAxis.call(this),\n            type: 'resize',\n          },\n          {\n            width: this.width$,\n            height: this.height$,\n            padding: this.padding,\n          }\n        );\n      },\n      250,\n      { leading: false, trailing: true }\n    );\n    window.addEventListener('resize', resize);\n    this.unBindResize$ = () => {\n      window.removeEventListener('resize', resize);\n    };\n  }\n}\nfunction bindEvents() {\n  let point = null;\n  let transform0 = null;\n  let longPress = 0;\n  const showTooptip = (point) => {\n    if (this.tooptip) {\n      const { cross, compute } = this.tooptip;\n      const crossX = cross.indexOf('x') !== -1;\n      const crossY = cross.indexOf('y') !== -1;\n      if (crossX || crossY) {\n        const [x0, y0] = point;\n        let { x0: x00, y0: y00, result } = compute([x0, y0], getScaleAxis.call(this));\n        x00 = x00 || x00 === 0 ? x00 : x0;\n        y00 = y00 || y00 === 0 ? y00 : y0;\n        let display = 'none';\n        if (typeof result !== 'function') {\n          result = util.noop;\n        } else {\n          display = 'block';\n        }\n        if (crossX) {\n          selection.select('.x-cross').style('left', `${x00}px`).style('display', display);\n        }\n        if (crossY) {\n          selection.select('.y-cross').style('top', `${y00}px`).style('display', display);\n        }\n        const tooptip = selection.select('.tooptip');\n        tooptip.style('display', display).call(result);\n        if (display !== 'none') {\n          const width = tooptip.node().clientWidth;\n          const height = tooptip.node().clientHeight;\n          let left = x0 + 10;\n          let top = y0 - height - 10;\n          if (this.width$ - left < width) {\n            left = x0 - 10 - width;\n          }\n          left = left <= -60 ? -60 : left;\n          top = top <= -20 ? -20 : top;\n          tooptip.style('left', `${left}px`).style('top', `${top}px`);\n        }\n      }\n    }\n  };\n  const hideTooptip = (target) => {\n    if (this.tooptip) {\n      const { cross } = this.tooptip;\n      const zNode = element;\n      if (!target || (target !== zNode && target.parentNode !== zNode)) {\n        if (cross.indexOf('x') !== -1) {\n          selection.select('.x-cross').style('display', 'none');\n        }\n        if (cross.indexOf('y') !== -1) {\n          selection.select('.y-cross').style('display', 'none');\n        }\n        selection.select('.tooptip').style('display', 'none');\n      }\n    }\n  };\n  const selection = this.zoomSelection$;\n  const element = selection\n    .call(\n      this.zoomer$\n        .on('start', ({ transform, sourceEvent, ...restEvent }, [xTransform, yTransform]) => {\n          if (this.destroyed || !this.rendered) return;\n          const { type, touches } = sourceEvent;\n          if (type !== 'call' && (this.xCanZoom$ || this.yCanZoom$)) {\n            let p = null;\n            if (touches) {\n              // 表示移动端触摸事件\n              point = [];\n              for (let i = 0, len = touches.length; i < len; i += 1) {\n                const touch = touches.item(i);\n                p = d3.pointer(touch, element);\n                p = [p, [xTransform.invert(p), yTransform.invert(p)], touch.identifier];\n                if (!point[0]) point[0] = p;\n                else if (!point[1] && point[0][2] !== p[2]) point[1] = p;\n              }\n            } else {\n              p = d3.pointer(sourceEvent, element);\n              p = [p, [xTransform.invert(p), yTransform.invert(p)]];\n              point = p;\n            }\n            transform0 = transform;\n          }\n          if (touches) {\n            longPress = setTimeout(() => {\n              showTooptip(d3.pointer(touches.item(0), element));\n              longPress = 0;\n            }, 500);\n          }\n          this.zoomstart$.call(null, {\n            ...restEvent,\n            sourceEvent,\n            scaleAxis: getScaleAxis.call(this),\n            transform: [transform, xTransform, yTransform],\n          });\n        })\n        .on('zoom', ({ transform, sourceEvent, ...restEvent }, [xTransform, yTransform]) => {\n          if (this.destroyed || !this.rendered) return;\n          let [newXTransform, newYTransform] = [xTransform, yTransform];\n          const { type, touches, transform: eventTransform } = sourceEvent;\n          if (type !== 'call') {\n            // 表示事用户主动触发，如滚轮和移动，触摸缩放\n            if (!this.xCanZoom$ && !this.yCanZoom$) return;\n            const t = transform.k / transform0.k;\n            let p = null;\n            let lx = null;\n            let ly = null;\n            if (touches) {\n              // 表示移动端触摸事件\n              let np = null;\n              let np1 = null;\n              for (let i = 0, len = touches.length; i < len; i += 1) {\n                const touch = touches.item(i);\n                const pt = d3.pointer(touch, element);\n                if (point[0] && point[0][2] === touch.identifier) np = pt;\n                else if (point[1] && point[1][2] === touch.identifier) np1 = pt;\n              }\n              if (point[0]) {\n                p = np || point[0][0];\n                lx = this.xCanZoom$ && point[0][1][0];\n                ly = this.yCanZoom$ && point[0][1][1];\n                if (point[1]) {\n                  const p1 = np1 || point[1][0];\n                  const [lx1, ly1] = point[1][1];\n                  p = [(p[0] + p1[0]) / 2, (p[1] + p1[1]) / 2];\n                  lx = this.xCanZoom$ && [(lx[0] + lx1[0]) / 2, (lx[1] + lx1[1]) / 2];\n                  ly = this.yCanZoom$ && [(ly[0] + ly1[0]) / 2, (ly[1] + ly1[1]) / 2];\n                }\n              }\n            } else {\n              p = d3.pointer(sourceEvent, element);\n              const changed = p[0] !== point[0][0] || p[1] !== point[0][1]; // zoom的时候点（鼠标）是否移动过\n              const wheel = type === 'wheel'; // 是否是滚轮\n              if (wheel && !changed) p = point[0];\n              lx = this.xCanZoom$ && (wheel && changed ? xTransform.invert(p) : point[1][0]);\n              ly = this.yCanZoom$ && (wheel && changed ? yTransform.invert(p) : point[1][1]);\n            }\n            if (p) {\n              if (lx) {\n                newXTransform = this.transform$('x', xTransform, t, p, lx);\n              }\n              if (ly) {\n                newYTransform = this.transform$('y', yTransform, t, p, ly);\n              }\n            }\n            transform0 = transform;\n          } else if (eventTransform) {\n            // 如果存在xy缩放，则会有补间调用，万一补间一半，触发了滚轮或移动，则补间会停止，造成无法到达指定缩放位置，所以xy锁定的时候应该忽略补间\n            // transform和eventTransform原本是一样的，但是动画补间的每一次调用时transform会变化，直到最后一次才会和eventTransform一样\n            // eventTransform是不变的，是最终的指定的变换结果\n            let xtf = transform;\n            let ytf = transform;\n            if (Array.isArray(eventTransform)) {\n              xtf = eventTransform[1];\n              ytf = eventTransform[2];\n            } else {\n              if (!this.xCanZoom$) xtf = eventTransform;\n              if (!this.yCanZoom$) ytf = eventTransform;\n            }\n            if (sourceEvent.zoomX) {\n              newXTransform = xtf;\n            }\n            if (sourceEvent.zoomY) {\n              newYTransform = ytf;\n            }\n          }\n          selection.datum([newXTransform, newYTransform]);\n          const scaleAxis = getScaleAxis.call(this);\n          Object.keys(scaleAxis).forEach((key) => {\n            const { axis, scale } = scaleAxis[key];\n            this.rootSelection$.select(`.${key}Axis`).call(axis);\n            this.rootSelection$.select(`.${key}Label`).call(scaleLable, [this.scale[key], scale.domain()]);\n          });\n          if (touches) {\n            if (longPress != 0) {\n              clearTimeout(longPress);\n              longPress = 0;\n            }\n            hideTooptip();\n          }\n          this.zooming$.call(null, {\n            ...restEvent,\n            sourceEvent,\n            transform: [transform, newXTransform, newYTransform],\n            scaleAxis,\n          });\n        })\n        .on('end', ({ transform, sourceEvent, ...restEvent }, [xTransform, yTransform]) => {\n          if (this.destroyed || !this.rendered) return;\n          if (sourceEvent.type !== 'call' && (this.xCanZoom$ || this.yCanZoom$)) {\n            point = null;\n            transform0 = null;\n          }\n          if (sourceEvent.touches) {\n            if (longPress != 0) {\n              clearTimeout(longPress);\n              longPress = 0;\n              hideTooptip();\n            }\n          }\n          this.zoomend$.call(null, {\n            ...restEvent,\n            sourceEvent,\n            transform: [transform, xTransform, yTransform],\n            scaleAxis: getScaleAxis.call(this),\n          });\n        })\n    )\n    .on('click', (e) => {\n      if (this.destroyed) return;\n      this.click$.call(null, {\n        sourceEvent: e,\n        target: selection,\n        transform: [d3.zoomTransform(element), ...selection.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'click',\n      });\n    })\n    .on('dblclick', (e) => {\n      if (this.destroyed) return;\n      this.dblclick$.call(null, {\n        sourceEvent: e,\n        target: selection,\n        transform: [d3.zoomTransform(element), ...selection.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'dblclick',\n      });\n    })\n    .on('contextmenu', (e) => {\n      if (this.destroyed) return;\n      this.contextmenu$.call(null, {\n        sourceEvent: e,\n        target: selection,\n        transform: [d3.zoomTransform(element), ...selection.datum()],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'contextmenu',\n      });\n      e.preventDefault();\n    })\n    .datum([d3.zoomIdentity, d3.zoomIdentity])\n    .node();\n  if (!(window.navigator.maxTouchPoints || 'ontouchstart' in window)) {\n    selection\n      .on('mouseout', (e) => {\n        if (this.destroyed || !this.rendered) return;\n        hideTooptip(e.relatedTarget);\n      })\n      .on('mousemove', (e) => {\n        if (this.destroyed || !this.rendered) return;\n        showTooptip(d3.pointer(e));\n      });\n  }\n  if (!this.zoom.doubleZoom) {\n    // 取消双击放大\n    selection.on('dblclick.zoom', null);\n  }\n  if (this.zoom.x) {\n    const xlock = this.rootSelection$.select('.xlock');\n    xlock.on('click', () => {\n      if (this.destroyed) return;\n      this.setCanZoom('x', !this.xCanZoom$);\n      this.canZoom$('x', this.xCanZoom$);\n    });\n  }\n  if (this.zoom.y) {\n    const ylock = this.rootSelection$.select('.ylock');\n    ylock.on('click', () => {\n      if (this.destroyed) return;\n      this.setCanZoom('y', !this.yCanZoom$);\n      this.canZoom$('y', this.yCanZoom$);\n    });\n  }\n  if (this.zoom.x || this.zoom.y) {\n    this.rootSelection$.select('.reset').on('click', () => {\n      if (this.destroyed) return;\n      this.reset();\n      this.reset$();\n    });\n  }\n  if (this.download) {\n    this.rootSelection$.select('.download').on('click', () => {\n      if (this.destroyed) return;\n      if (this.download.action) {\n        this.download.action(() => {\n          this.downloadImage();\n        }, this.rootSelection$);\n      } else {\n        this.downloadImage();\n      }\n    });\n  }\n}\n\nclass BaseChart {\n  constructor(...params) {\n    const {\n      container,\n      width,\n      height,\n      padding = [0, 0, 0, 0],\n      rWidth,\n      rHeight,\n      fontSize = 12,\n      download,\n      tooptip,\n      zoom,\n      scale,\n      data,\n    } = params[0] || {};\n    this.destroyed = false;\n    this.rendered = false;\n    if (typeof download === 'function') {\n      this.download = { action: download };\n    } else if (typeof download === 'string') {\n      this.download = { ext: download };\n    } else {\n      this.download = download || false;\n    }\n    this.tooptip = !tooptip\n      ? false\n      : {\n          cross: '',\n          ...tooptip,\n          compute: (...args) => {\n            let result = {};\n            if (typeof tooptip.compute === 'function') {\n              result = tooptip.compute.call(this, result, ...args);\n            }\n            return result;\n          },\n        };\n    this.zoom = {\n      /* x: {\n\t\t\t\t\t// 一旦domain设置了x或x2的某一类型，则translate和precision都要按照这一类型数据设置\n\t\t\t\t\tdomain: 'x', // 坐标缩放为1，位移为0时的坐标范围（会默认取scale的x或x2的domain)\n\t\t\t\t\ttranslate: [-Infinity, Infinity], // 坐标标尺可以拖动的范围值\n\t\t\t\t\tprecision: [(1 - 0) / 10, (1 - 0) * 10], // 坐标标尺缩到最小和最大的跨度值\n\t\t\t\t}, */\n      x: null,\n      y: null,\n      doubleZoom: false,\n      ...zoom,\n    };\n    this.scale = {\n      /* x: {\n\t\t\t\t\ttype: 'linear', // 坐标类型\n\t\t\t\t\tticks: 5, // 坐标刻度数目\n\t\t\t\t\tformat: (v) => v, // 坐标值格式化函数\n\t\t\t\t\tdomain: [0, 1], // 横坐标缩放为1，位移为0时的坐标范围\n\t\t\t\t\tlabel: '', // 坐标名称\n\t\t\t\t\tunit: '', // 坐标值单位\n\t\t\t\t}, */\n      x: null,\n      x2: null,\n      y: null,\n      y2: null,\n      ...scale,\n    };\n    this.fontSize = fontSize;\n    this.data = data || {};\n    this.dataDomains$ = {};\n    this.zoomer$ = d3.zoom();\n    this.xCanZoom$ = !!this.zoom.x;\n    this.yCanZoom$ = !!this.zoom.y;\n    createElement.call(this, container, { width, height, padding, rWidth, rHeight });\n    createScale.call(this);\n    createZoom.call(this);\n    bindEvents.call(this);\n    this.click$ = util.noop;\n    this.dblclick$ = util.noop;\n    this.contextmenu$ = util.noop;\n    this.zoomstart$ = util.noop;\n    this.zooming$ = util.noop;\n    this.zoomend$ = util.noop;\n    this.resize$ = util.noop;\n    this.reset$ = util.noop;\n    this.canZoom$ = util.noop;\n  }\n\n  reset(ta) {\n    this.render(d3.zoomIdentity, 'xy', ta);\n    return this;\n  }\n\n  render(tf, ax = 'xy', ta = true) {\n    this.rendered = true;\n    const transform = (Array.isArray(tf) ? tf[0] : tf) || d3.zoomTransform(this.zoomSelection$.node());\n    // 对this.zoomSelection$调用this.zoomer$.transform函数变换到指定的transform\n    // 变换过程中用240ms及ease函数进行transition\n    (!ta ? this.zoomSelection$ : this.zoomSelection$.transition().duration(240).ease(d3.easeLinear)).call(\n      this.zoomer$.transform,\n      transform,\n      null,\n      {\n        type: 'call',\n        transform: tf,\n        zoomX: ax.indexOf('x') !== -1,\n        zoomY: ax.indexOf('y') !== -1,\n      }\n    );\n    return this;\n  }\n\n  getCanZoom() {\n    return [this.xCanZoom$, this.yCanZoom$];\n  }\n\n  getTransform() {\n    return [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()];\n  }\n\n  setCanZoom(ax = 'xy', canZoom = true) {\n    let xCanZoom = canZoom;\n    let yCanZoom = canZoom;\n    if (Array.isArray(canZoom)) {\n      [xCanZoom = true, yCanZoom = true] = canZoom;\n    }\n    if (ax.indexOf('x') !== -1) {\n      this.xCanZoom$ = xCanZoom;\n      this.rootSelection$\n        .select('.xlock')\n        .select('path')\n        .attr('d', xCanZoom ? unlockPath : lockPath);\n    }\n    if (ax.indexOf('y') !== -1) {\n      this.yCanZoom$ = yCanZoom;\n      this.rootSelection$\n        .select('.ylock')\n        .select('path')\n        .attr('d', yCanZoom ? unlockPath : lockPath);\n    }\n    return this;\n  }\n\n  setEvent(type, handler) {\n    if (typeof handler === 'function') {\n      const oldHandler = this[`${type}$`];\n      this[`${type}$`] = (...args) => {\n        handler.call(null, ...args, oldHandler.call(null, ...args));\n      };\n    }\n  }\n\n  runEvent(type, data = {}) {\n    if (this.destroyed) return;\n    const { sourceEvent, transform, scaleAxis, target } = data;\n    this[`${type}$`].call(null, {\n      type,\n      sourceEvent: sourceEvent || null,\n      target: target || this.zoomSelection$,\n      transform: transform || [d3.zoomTransform(this.zoomSelection$.node()), ...this.zoomSelection$.datum()],\n      scaleAxis: scaleAxis || getScaleAxis.call(this),\n    });\n  }\n\n  getData() {\n    return this.data;\n  }\n\n  setData(data, render, computeDomain = util.noop) {\n    if (!data) return this;\n    this.rendered = false;\n    this.data = data;\n    // 根据data计算domain\n    const needCompute = axisType.filter((key) => this.scale[key] && !this.scale[key].domain);\n    if (needCompute.length > 0) {\n      this.dataDomains$ = computeDomain(this.data, needCompute) || {};\n      updateScale.call(this);\n      updateZoom.call(this);\n    }\n    if (render) {\n      this.render();\n    }\n    return this;\n  }\n\n  setDomain(domain, render) {\n    if (!domain) return this;\n    let isScale = false;\n    axisType.forEach((key) => {\n      if (this.scale[key] && domain[key]) {\n        this.scale[key].domain = domain[key];\n        isScale = true;\n      }\n    });\n    if (isScale) {\n      this.rendered = false;\n      updateScale.call(this);\n      let isZoom = false;\n      ['x', 'y'].forEach((key) => {\n        isZoom = this.zoom[key] && ((this.scale[key] && domain[key]) || (this.scale[`${key}2`] && domain[`${key}2`]));\n      });\n      if (isZoom) {\n        updateZoom.call(this);\n      }\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setTranslate(translate, render) {\n    if (!translate) return this;\n    let isZoom = false;\n    ['x', 'y'].forEach((key) => {\n      if (this.zoom[key]) {\n        this.zoom[key].translate = translate[key];\n        isZoom = true;\n      }\n    });\n    if (isZoom) {\n      this.rendered = false;\n      updateZoom.call(this);\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setPrecision(precision, render) {\n    if (!precision) return this;\n    let isZoom = false;\n    ['x', 'y'].forEach((key) => {\n      if (this.zoom[key]) {\n        this.zoom[key].precision = precision[key];\n        isZoom = true;\n      }\n    });\n    if (isZoom) {\n      this.rendered = false;\n      updateZoom.call(this);\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setLabel(label, render) {\n    if (!label) return this;\n    let isScale = false;\n    axisType.forEach((key) => {\n      if (this.scale[key] && label[key]) {\n        this.scale[key].label = label[key].label;\n        this.scale[key].unit = label[key].unit;\n        isScale = true;\n      }\n    });\n    if (isScale) {\n      this.rendered = false;\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  destroy() {\n    this.destroyed = true;\n    this.rendered = false;\n    this.data = {};\n    this.zoomer$.on('start', null).on('zoom', null).on('end', null);\n    this.zoomSelection$\n      .on('click', null)\n      .on('dblclick', null)\n      .on('contextmenu', null)\n      .on('mouseout', null)\n      .on('mousemove', null);\n    if (this.unBindResize$) this.unBindResize$();\n    this.rootSelection$.remove();\n    this.rootSelection$ = null;\n  }\n\n  resize() {\n    if (document.createEvent) {\n      const event = document.createEvent('Event');\n      event.initEvent('resize', true, true);\n      window.dispatchEvent(event);\n    } else if (document.createEventObject) {\n      const event = document.createEventObject();\n      event.type = 'onresize';\n      window.fireEvent('onresize', event);\n    }\n    return this;\n  }\n\n  downloadImage(name, content) {\n    const svgSel = this.rootSelection$.select('svg');\n    const width = +svgSel.attr('width');\n    const height = +svgSel.attr('height');\n    const tempCanvas = document.createElement('canvas');\n    tempCanvas.width = width;\n    tempCanvas.height = height;\n    const tempCxt = tempCanvas.getContext('2d');\n    tempCxt.clearRect(0, 0, width, height);\n    if (content) {\n      tempCxt.drawImage(content.image, content.x, content.y);\n    }\n    const tempImage = new Image();\n    tempImage.src = `data:image/svg+xml;base64,${window.btoa(\n      window.unescape(\n        window.encodeURIComponent(\n          `<?xml version=\"1.0\" standalone=\"no\"?>\n          ${new XMLSerializer().serializeToString(svgSel.node())}`\n        )\n      )\n    )}`;\n    const ext = this.download.ext || 'png';\n    tempImage.onload = () => {\n      tempCxt.drawImage(tempImage, 0, 0);\n      const a = document.createElement('a');\n      a.download = `${name || 'basechart'}.${ext}`;\n      a.href = tempCanvas.toDataURL(`image/${ext}`);\n      a.click();\n    };\n  }\n}\n\nexport default BaseChart;\n"],"file":"index.js"}