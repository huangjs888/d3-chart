{"version":3,"sources":["../../src/util/index.js"],"names":["measureSvgText","text","fontSize","svgXmlns","svgDom","document","createElementNS","svgText","style","appendChild","createTextNode","body","width","getBBox","clientWidth","removeChild","findNearIndex","val","arr","single","start","end","length","middle","Math","ceil","abs","isNumber","v","Number","isNaN","isCanEmit","x0","y0","x1","y1","l","guid","prefix","n","Date","getTime","toString","i","floor","random"],"mappings":"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","sourcesContent":["// @ts-nocheck\n/*\n * @Author: Huangjs\n * @Date: 2021-03-17 16:23:00\n * @LastEditors: Huangjs\n * @LastEditTime: 2022-07-01 14:36:41\n * @Description: ******\n */\n\nimport differenceWith from 'lodash/differenceWith';\nimport debounce from 'lodash/debounce';\nimport noop from 'lodash/noop';\nimport delay from 'lodash/delay';\nimport uniqueId from 'lodash/uniqueId';\n\nconst measureSvgText = (text, fontSize) => {\n  const svgXmlns = 'http://www.w3.org/2000/svg';\n  const svgDom = document.createElementNS(svgXmlns, 'svg');\n  const svgText = document.createElementNS(svgXmlns, 'text');\n  svgText.style.fontSize = fontSize;\n  svgText.appendChild(document.createTextNode(text));\n  svgDom.appendChild(svgText);\n  document.body.appendChild(svgDom);\n  const width = !svgDom.getBBox ? svgDom.clientWidth : svgDom.getBBox().width;\n  document.body.removeChild(svgDom);\n  return width;\n};\n\n// 查找给定值在数组中哪两个数据之间的索引值，数组已排序\nconst findNearIndex = (val, arr, single) => {\n  let start = 0;\n  let end = arr.length - 1;\n  if (val < arr[start]) {\n    return single ? start : [-1, start];\n  }\n  if (val > arr[end]) {\n    return single ? end : [end, -1];\n  }\n  // 二分查找\n  while (start <= end) {\n    const middle = Math.ceil((end + start) / 2);\n    if (val === arr[middle]) {\n      return single ? middle : [middle, middle];\n    }\n    if (val < arr[middle]) {\n      end = middle - 1;\n    } else {\n      start = middle + 1;\n    }\n  }\n  if (single) {\n    // 取最接近数值的索引\n    return Math.abs(arr[end] - val) < Math.abs(arr[start] - val) ? end : start;\n  }\n  // 取夹在中间的两边数值的索引\n  return [end, start];\n};\n\nconst isNumber = (v) => typeof v === 'number' && !Number.isNaN(v);\nconst isCanEmit = ([x0, y0], [x1, y1], l = 3) => (x1 - x0) ** 2 + (y1 - y0) ** 2 > l ** 2;\nconst guid = (prefix) => {\n  let n = new Date().getTime().toString(32);\n  for (let i = 0; i < 5; i += 1) {\n    n += Math.floor(Math.random() * 65535).toString(32);\n  }\n  n += uniqueId(prefix).toString(32);\n  return prefix ? `${prefix}-${n}` : n;\n};\n\nexport { measureSvgText, findNearIndex, isNumber, isCanEmit, guid, differenceWith, debounce, noop, delay };\n"],"file":"index.js"}