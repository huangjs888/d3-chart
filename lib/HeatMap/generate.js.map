{"version":3,"sources":["../../src/HeatMap/generate.js"],"names":["iconSize","prefixSIFormat","d3","format","searchValIndex","val","arr","n1","n2","length","c","binSize","n","test","a","b","v","Math","floor","window","console","log","min","max","computeFactor","val0","val1","bin0","bin1","factor","getInterpFactor","pixel","valPixs","index0","index1","matrixAverage","xFactor","val00","val01","yFactor","val10","val11","undefined","dx","dy","dxy","valueForPixel","value","reverse","len","minVal","maxVal","i","round","matrixInterp","w","h","d","x","y","z","x0","y0","x1","y1","cw","ch","xValPixs","yValPixs","pixels","index","Uint8Array","e","Array","xInterpArray","j","yInterp","yInvalidIndex","invalid","yInvalid","findIndex","o","rgba","r","g","opacity","xInterp","xInvalidIndex","xInvalid","drawend","zContext","xScale","yScale","save","clearRect","width$","height$","showHeat$","zScale","zScale$","viewRange","data","heat","xMinPx","xMaxPx","yMinPx","yMaxPx","width","height","xcMinPx","xcMaxPx","ycMinPx","ycMaxPx","xMin","xMax","yMin","yMax","dataRange","cWidth","cHeight","pixelData","color","imageData","createImageData","set","cdata","putImageData","canvas","tempCanvas$","getContext","range","map","invert","restore","drawing","lineMarkX","lineMark$","node","xp","datum","scale","style","lineMarkY","yp","drawImage","tipCompute","prevRes","point","scaleAxis","scaleOpt","tooptip","cross","average","xyzValue","x2","y2","xval","yval","zval","util","findNearIndex","xi0","xi1","yi0","yi1","xval0","xval1","yval0","yval1","xi","abs","yi","push","prevValue","slice","ndata","result","selection","selectAll","join","attr","html","label","unit","updateScale","zFormat","domain","copy","clamp","colorBar","linearGradient","rootSelection$","select","heatColorBar","startDomain","deltDomain","_","enter","tick","append","text","update","doubleClick","heatData","setLineMark","res","generateHeatMap","superName","HeatMap","restOptions","restData","rWidth","show","left","isNumber","right","compute","args","call","tempText","subLabel","baselineDelt","fontSize","heatLabel","padding","measureSvgText","split","forEach","key","zoomSelection$","lineMark","zCanvasParent","insert","zCanvas","gradientId","guid","scaleLinear","document","createElement","dblclick$$","dblclick$","sourceEvent","pointer","contextmenu$$","contextmenu$","lm","zooming$$","zooming$","zoomend$$","zoomend$","debounceDrawend$","debounce","leading","trailing","type","delay","flush","resize$$","resize$","rest","ticks","on","destroyed","rendered","render","cb","xSelect","ySelect","xBin","vv","yBin","v0","v1","computeDomain","needDomain","domains","extent","svgDiv","parseInt","top","image","cancel","BaseChart","mixin","replace","LineGraph"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,QAAQ,GAAG,EAAjB;AAEA,IAAMC,cAAc,GAAGC,EAAE,CAACC,MAAH,CAAU,IAAV,CAAvB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,GAAD,EAAMC,GAAN,EAAc;AACnC,MAAIC,EAAE,GAAG,CAAT;AACA,MAAIC,EAAE,GAAGF,GAAG,CAACG,MAAb;AACA,MAAIC,CAAC,GAAG,CAAR;AACA,MAAMC,OAAO,GAAGH,EAAE,GAAG,CAAL,GAAS,CAACF,GAAG,CAACE,EAAE,GAAG,CAAN,CAAH,GAAcF,GAAG,CAAC,CAAD,CAAlB,KAA0BE,EAAE,GAAG,CAA/B,CAAT,GAA6C,CAA7D;AACA,MAAII,CAAJ;AACA,MAAIC,IAAJ;;AACA,MAAIF,OAAO,IAAI,CAAf,EAAkB;AAChBE,IAAAA,IAAI,GAAG,cAACC,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,IAAIC,CAAf;AAAA,KAAP;AACD,GAFD,MAEO;AACLF,IAAAA,IAAI,GAAG,cAACC,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,GAAGC,CAAd;AAAA,KAAP;AACD,GAXkC,CAYnC;;;AACA,MAAMC,CAAC,GAAGX,GAAG,GAAGM,OAAO,GAAG,IAAV,IAAkBA,OAAO,IAAI,CAAX,GAAe,CAAf,GAAmB,CAAC,CAAtC,CAAhB,CAbmC,CAcnC;;AACA,SAAOJ,EAAE,GAAGC,EAAL,IAAWE,CAAC,GAAG,GAAtB,EAA2B;AACzBA,IAAAA,CAAC,IAAI,CAAL;AACAE,IAAAA,CAAC,GAAGK,IAAI,CAACC,KAAL,CAAW,CAACX,EAAE,GAAGC,EAAN,IAAY,CAAvB,CAAJ;AACA,QAAIK,IAAI,CAACP,GAAG,CAACM,CAAD,CAAJ,EAASI,CAAT,CAAR,EAAqBT,EAAE,GAAGK,CAAC,GAAG,CAAT,CAArB,KACKJ,EAAE,GAAGI,CAAL;AACN;;AACD,MAAIF,CAAC,GAAG,EAAR,EAAYS,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,uBAAnB;AACZ,SAAOJ,IAAI,CAACK,GAAL,CAASL,IAAI,CAACM,GAAL,CAAShB,EAAE,GAAG,CAAd,EAAiB,CAAjB,CAAT,EAA8BD,GAAG,CAACG,MAAJ,GAAa,CAA3C,CAAP;AACD,CAvBD,C,CAwBA;;;AACA,IAAMe,aAAa,GAAG,SAAhBA,aAAgB,CAACnB,GAAD,EAAMoB,IAAN,EAAYC,IAAZ,EAAkBC,IAAlB,EAAwBC,IAAxB,EAAiC;AACrD,MAAMC,MAAM,GAAG,CAACxB,GAAG,GAAGoB,IAAP,KAAgBC,IAAI,GAAGD,IAAvB,KAAgC,CAA/C;;AACA,MAAII,MAAM,IAAI,CAAd,EAAiB;AACf,WAAO;AACLA,MAAAA,MAAM,EAAE,CADH;AAELF,MAAAA,IAAI,EAAJA,IAFK;AAGLC,MAAAA,IAAI,EAAED;AAHD,KAAP;AAKD;;AACD,MAAIE,MAAM,GAAG,GAAb,EAAkB;AAChB,WAAO;AACLA,MAAAA,MAAM,EAAE,IAAIA,MADP;AAELF,MAAAA,IAAI,EAAEC,IAFD;AAGLA,MAAAA,IAAI,EAAED;AAHD,KAAP;AAKD;;AACD,SAAO;AACLE,IAAAA,MAAM,EAANA,MADK;AAELF,IAAAA,IAAI,EAAJA,IAFK;AAGLC,IAAAA,IAAI,EAAJA;AAHK,GAAP;AAKD,CArBD,C,CAsBA;;;AACA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,OAAR,EAAoB;AAC1C,MAAMC,MAAM,GAAG7B,cAAc,CAAC2B,KAAD,EAAQC,OAAR,CAA7B;AACA,MAAME,MAAM,GAAGD,MAAM,GAAG,CAAxB;AACA,SAAOT,aAAa,CAACO,KAAD,EAAQC,OAAO,CAACC,MAAD,CAAf,EAAyBD,OAAO,CAACE,MAAD,CAAhC,EAA0CD,MAA1C,EAAkDC,MAAlD,CAApB;AACD,CAJD,C,CAKA;;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,OAAxB,EAAiCC,KAAjC,EAAwCC,KAAxC,EAAkD;AACtE,MAAIpC,GAAG,GAAG,CAAV;;AACA,MAAIgC,KAAK,KAAKK,SAAd,EAAyB;AACvB,QAAMC,EAAE,GAAGL,KAAK,GAAGD,KAAR,IAAiB,CAA5B;AACA,QAAMO,EAAE,GAAGJ,KAAK,GAAGH,KAAR,IAAiB,CAA5B;AACA,QAAIQ,GAAG,GAAG,CAAV;;AACA,QAAIP,KAAK,KAAKI,SAAd,EAAyB;AACvB,UAAID,KAAK,KAAKC,SAAd,EAAyBG,GAAG,GAAG,CAAN,CAAzB,KACK,IAAIL,KAAK,KAAKE,SAAd,EAAyBG,GAAG,GAAG,KAAKJ,KAAK,GAAGJ,KAAb,CAAN,CAAzB,KACAQ,GAAG,GAAI,CAAC,IAAIJ,KAAJ,GAAYD,KAAZ,GAAoBH,KAArB,IAA8B,CAA/B,GAAoC,CAA1C;AACN,KAJD,MAIO,IAAII,KAAK,KAAKC,SAAd,EAAyB;AAC9B,UAAIF,KAAK,KAAKE,SAAd,EAAyBG,GAAG,GAAG,CAAN,CAAzB,KACKA,GAAG,GAAI,CAAC,IAAIR,KAAJ,GAAYC,KAAZ,GAAoBE,KAArB,IAA8B,CAA/B,GAAoC,CAA1C;AACN,KAHM,MAGA,IAAIA,KAAK,KAAKE,SAAd,EAAyBG,GAAG,GAAI,CAAC,IAAIJ,KAAJ,GAAYH,KAAZ,GAAoBD,KAArB,IAA8B,CAA/B,GAAoC,CAA1C,CAAzB,KACFQ,GAAG,GAAGJ,KAAK,GAAGJ,KAAR,GAAgBC,KAAhB,GAAwBE,KAA9B;;AACLnC,IAAAA,GAAG,GAAGgC,KAAK,GAAG,CAACD,OAAO,IAAI,CAAZ,IAAiBO,EAAzB,GAA8B,CAACJ,OAAO,IAAI,CAAZ,KAAkBK,EAAE,GAAG,CAACR,OAAO,IAAI,CAAZ,IAAiBS,GAAxC,CAApC;AACD;;AACD,SAAOxC,GAAP;AACD,CAlBD,C,CAmBA;AACA;AACA;;;AACA,IAAMyC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAQhB,KAAR,EAAeiB,OAAf,EAA2B;AAC/C,MAAMhB,OAAO,GAAG,EAAhB;AACA,MAAMiB,GAAG,GAAGF,KAAK,CAACtC,MAAlB;AACA,MAAMyC,MAAM,GAAGH,KAAK,CAAC,CAAD,CAApB;AACA,MAAMI,MAAM,GAAGJ,KAAK,CAACE,GAAG,GAAG,CAAP,CAApB;;AACA,OAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAApB,EAAyBG,CAAC,IAAI,CAA9B,EAAiC;AAC/BpB,IAAAA,OAAO,CAACgB,OAAO,GAAGC,GAAG,GAAG,CAAN,GAAUG,CAAb,GAAiBA,CAAzB,CAAP,GAAqCnC,IAAI,CAACoC,KAAL,CACnCpC,IAAI,CAACoC,KAAL,CAAW,MAAMtB,KAAN,IAAe,CAACgB,KAAK,CAACK,CAAD,CAAL,GAAWF,MAAZ,KAAuBC,MAAM,GAAGD,MAAhC,CAAf,CAAX,IAAsE,GADnC,CAArC;AAGD;;AACD,SAAOlB,OAAP;AACD,CAXD,C,CAYA;;;AACA,IAAMsB,YAAY,GAAG,SAAfA,YAAe,cAA2B5C,CAA3B,EAAiC;AAAA,MAA9B6C,CAA8B,QAA9BA,CAA8B;AAAA,MAA3BC,CAA2B,QAA3BA,CAA2B;AAAA,MAAxBC,CAAwB,QAAxBA,CAAwB;AAAA,MAAjBC,CAAiB,SAAjBA,CAAiB;AAAA,MAAdC,CAAc,SAAdA,CAAc;AAAA,MAAXC,CAAW,SAAXA,CAAW;;AACpD,wCAA6BH,CAA7B;AAAA;AAAA,MAAQI,EAAR;AAAA,MAAYC,EAAZ;AAAA;AAAA,MAAkBC,EAAlB;AAAA,MAAsBC,EAAtB;;AACA,MAAMC,EAAE,GAAGF,EAAE,GAAGF,EAAhB;AACA,MAAMK,EAAE,GAAGF,EAAE,GAAGF,EAAhB;AACA,MAAMK,QAAQ,GAAGrB,aAAa,CAACY,CAAD,EAAIH,CAAJ,CAA9B;AACA,MAAMa,QAAQ,GAAGtB,aAAa,CAACa,CAAD,EAAIH,CAAJ,EAAO,IAAP,CAA9B;AACA,MAAIa,MAAJ;AACA,MAAIC,KAAK,GAAG,CAAZ;;AACA,MAAI;AACFD,IAAAA,MAAM,GAAG,IAAIE,UAAJ,CAAeN,EAAE,GAAGC,EAAL,GAAU,CAAzB,CAAT;AACD,GAFD,CAEE,OAAOM,CAAP,EAAU;AACVH,IAAAA,MAAM,GAAG,IAAII,KAAJ,CAAUR,EAAE,GAAGC,EAAL,GAAU,CAApB,CAAT;AACD;;AACD,MAAMQ,YAAY,GAAG,EAArB;;AAboD,6BAc3CC,CAd2C;AAelD,QAAMC,OAAO,GAAG9C,eAAe,CAAC6C,CAAD,EAAIP,QAAJ,CAA/B;AACA,QAAM3C,IAAI,GAAGmC,CAAC,CAACgB,OAAO,CAACjD,IAAT,CAAD,IAAmB,EAAhC;AACA,QAAMD,IAAI,GAAGkC,CAAC,CAACgB,OAAO,CAAChD,IAAT,CAAD,IAAmB,EAAhC,CAjBkD,CAkBlD;;AACA,QAAMiD,aAAa,GAAGlB,CAAC,CAACmB,OAAF,IAAa,EAAnC,CAnBkD,CAoBlD;;AACA,QAAMC,QAAQ,GAAGF,aAAa,CAACG,SAAd,CAAwB,UAACC,CAAD;AAAA,aAAOA,CAAC,KAAKL,OAAO,CAACjD,IAAd,IAAsBsD,CAAC,KAAKL,OAAO,CAAChD,IAA3C;AAAA,KAAxB,MAA6E,CAAC,CAA/F;;AACA,SAAK,IAAIwB,CAAC,GAAGS,EAAb,EAAiBT,CAAC,GAAGW,EAArB,EAAyBX,CAAC,IAAI,CAA9B,EAAiC;AAC/B,UAAI8B,IAAI,GAAG;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,CAAX;AAAcrE,QAAAA,CAAC,EAAE,CAAjB;AAAoBsE,QAAAA,OAAO,EAAE;AAA7B,OAAX,CAD+B,CAE/B;;AACA,UAAI,CAACN,QAAL,EAAe;AAAA;AACb,cAAIO,OAAO,GAAGZ,YAAY,CAACtB,CAAD,CAA1B;;AACA,cAAI,CAACkC,OAAL,EAAc;AACZA,YAAAA,OAAO,GAAGxD,eAAe,CAACsB,CAAD,EAAIe,QAAJ,CAAzB;AACAO,YAAAA,YAAY,CAACtB,CAAD,CAAZ,GAAkBkC,OAAlB;AACD,WALY,CAMb;;;AACA,cAAMC,aAAa,GAAG7B,CAAC,CAACoB,OAAF,IAAa,EAAnC,CAPa,CAQb;;AACA,cAAMU,QAAQ,GAAGD,aAAa,CAACP,SAAd,CAAwB,UAACC,CAAD;AAAA,mBAAOA,CAAC,KAAKK,OAAO,CAAC3D,IAAd,IAAsBsD,CAAC,KAAKK,OAAO,CAAC1D,IAA3C;AAAA,WAAxB,MAA6E,CAAC,CAA/F,CATa,CAUb;;AACA,cAAI,CAAC4D,QAAL,EAAe;AACbN,YAAAA,IAAI,GAAGxE,CAAC,CACNyB,aAAa,CACXmD,OAAO,CAACzD,MADG,EAEXJ,IAAI,CAAC6D,OAAO,CAAC3D,IAAT,CAFO,EAGXF,IAAI,CAAC6D,OAAO,CAAC1D,IAAT,CAHO,EAIXgD,OAAO,CAAC/C,MAJG,EAKXH,IAAI,CAAC4D,OAAO,CAAC3D,IAAT,CALO,EAMXD,IAAI,CAAC4D,OAAO,CAAC1D,IAAT,CANO,CADP,CAAR;AAUD;AAtBY;AAuBd;;AACDyC,MAAAA,MAAM,CAACC,KAAD,CAAN,GAAgBY,IAAI,CAACC,CAArB;AACAd,MAAAA,MAAM,CAACC,KAAK,GAAG,CAAT,CAAN,GAAoBY,IAAI,CAACE,CAAzB;AACAf,MAAAA,MAAM,CAACC,KAAK,GAAG,CAAT,CAAN,GAAoBY,IAAI,CAACnE,CAAzB;AACAsD,MAAAA,MAAM,CAACC,KAAK,GAAG,CAAT,CAAN,GAAoBY,IAAI,CAACG,OAAL,GAAe,GAAnC,CA9B+B,CA8BS;;AACxCf,MAAAA,KAAK,IAAI,CAAT;AACD;AAtDiD;;AAcpD,OAAK,IAAIK,CAAC,GAAGb,EAAb,EAAiBa,CAAC,GAAGX,EAArB,EAAyBW,CAAC,IAAI,CAA9B,EAAiC;AAAA,UAAxBA,CAAwB;AAyChC;;AACD,SAAON,MAAP;AACD,CAzDD;;AA2DA,SAASoB,OAAT,CAAiBC,QAAjB,SAA+C;AAAA,MAAlBC,MAAkB,SAAlBA,MAAkB;AAAA,MAAVC,MAAU,SAAVA,MAAU;AAC7CF,EAAAA,QAAQ,CAACG,IAAT,GAD6C,CAE7C;;AACAH,EAAAA,QAAQ,CAACI,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKC,MAA9B,EAAsC,KAAKC,OAA3C;;AACA,MAAI,KAAKC,SAAT,EAAoB;AAClB,QAAMC,MAAM,GAAG,KAAKC,OAApB;AACA,QAAIC,SAAS,GAAG,IAAhB;AACA,0BAAoB,KAAKC,IAAL,CAAUC,IAA9B;AAAA,QAAQ5C,CAAR,mBAAQA,CAAR;AAAA,QAAWC,CAAX,mBAAWA,CAAX;AAAA,QAAcC,CAAd,mBAAcA,CAAd,CAHkB,CAIlB;AACA;;AACA,QAAM2C,MAAM,GAAGZ,MAAM,CAACjC,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAT,CAArB;AACA,QAAM8C,MAAM,GAAGb,MAAM,CAACjC,CAAC,CAACA,CAAC,CAACjD,MAAF,GAAW,CAAZ,CAAD,IAAmB,CAApB,CAArB,CAPkB,CAQlB;;AACA,QAAMgG,MAAM,GAAGb,MAAM,CAACjC,CAAC,CAACA,CAAC,CAAClD,MAAF,GAAW,CAAZ,CAAD,IAAmB,CAApB,CAArB;AACA,QAAMiG,MAAM,GAAGd,MAAM,CAACjC,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAT,CAArB,CAVkB,CAWlB;;AACA,QAAMgD,KAAK,GAAG1F,IAAI,CAACoC,KAAL,CAAWmD,MAAM,GAAGD,MAApB,CAAd;AACA,QAAMK,MAAM,GAAG3F,IAAI,CAACoC,KAAL,CAAWqD,MAAM,GAAGD,MAApB,CAAf,CAbkB,CAclB;;AACA,QAAIE,KAAK,GAAG,CAAR,IAAaC,MAAM,GAAG,CAA1B,EAA6B;AAC3B;AACA;AACA,UAAMC,OAAO,GAAG,CAAhB;AACA,UAAMC,OAAO,GAAG,KAAKf,MAAL,GAAcc,OAA9B;AACA,UAAME,OAAO,GAAG,CAAhB;AACA,UAAMC,OAAO,GAAG,KAAKhB,OAAL,GAAee,OAA/B,CAN2B,CAO3B;AACA;AACA;AACA;AACA;;AACA,UAAME,IAAI,GAAGhG,IAAI,CAACM,GAAL,CAASsF,OAAT,EAAkBN,MAAlB,CAAb,CAZ2B,CAYa;;AACxC,UAAMW,IAAI,GAAGjG,IAAI,CAACK,GAAL,CAASwF,OAAT,EAAkBN,MAAlB,CAAb,CAb2B,CAaa;;AACxC,UAAMW,IAAI,GAAGlG,IAAI,CAACM,GAAL,CAASwF,OAAT,EAAkBN,MAAlB,CAAb,CAd2B,CAca;;AACxC,UAAMW,IAAI,GAAGnG,IAAI,CAACK,GAAL,CAAS0F,OAAT,EAAkBN,MAAlB,CAAb,CAf2B,CAea;AACxC;;AACA,UAAMW,SAAS,GAAG,CAChB,CAACpG,IAAI,CAACoC,KAAL,CAAW4D,IAAI,GAAGV,MAAlB,CAAD,EAA4BtF,IAAI,CAACoC,KAAL,CAAW8D,IAAI,GAAGV,MAAlB,CAA5B,CADgB,EACwC;AACxD,OAACxF,IAAI,CAACoC,KAAL,CAAW6D,IAAI,GAAGX,MAAlB,CAAD,EAA4BtF,IAAI,CAACoC,KAAL,CAAW+D,IAAI,GAAGX,MAAlB,CAA5B,CAFgB,CAEwC;AAFxC,OAAlB;AAIA,UAAMa,MAAM,GAAGD,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,IAAkBA,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAAjC;AACA,UAAME,OAAO,GAAGF,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,IAAkBA,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAAlC,CAtB2B,CAuB3B;;AACA,UAAIC,MAAM,GAAG,CAAT,IAAcC,OAAO,GAAG,CAA5B,EAA+B;AAC7B;AACA,YAAMC,SAAS,GAAGlE,YAAY,CAC5B;AACEC,UAAAA,CAAC,EAAEoD,KADL;AAEEnD,UAAAA,CAAC,EAAEoD,MAFL;AAGEnD,UAAAA,CAAC,EAAE4D;AAHL,SAD4B,EAM5B;AAAE3D,UAAAA,CAAC,EAADA,CAAF;AAAKC,UAAAA,CAAC,EAADA,CAAL;AAAQC,UAAAA,CAAC,EAADA;AAAR,SAN4B,EAO5B,UAAC5C,CAAD,EAAO;AACL;AACA,cAAMkE,IAAI,GAAGgB,MAAM,CAAClF,CAAD,CAAnB;AACA,iBAAO,OAAOkE,IAAP,KAAgB,QAAhB,GAA2BhF,EAAE,CAACuH,KAAH,CAASvC,IAAT,CAA3B,GAA4CA,IAAnD;AACD,SAX2B,CAA9B,CAF6B,CAe7B;;AACA,YAAMwC,SAAS,GAAGhC,QAAQ,CAACiC,eAAT,CAAyBL,MAAzB,EAAiCC,OAAjC,CAAlB,CAhB6B,CAiB7B;;AACA,YAAI;AACFG,UAAAA,SAAS,CAACrB,IAAV,CAAeuB,GAAf,CAAmBJ,SAAnB;AACD,SAFD,CAEE,OAAOhD,CAAP,EAAU;AACV,cAAMqD,KAAK,GAAGH,SAAS,CAACrB,IAAxB;AACA,cAAMpD,GAAG,GAAG4E,KAAK,CAACpH,MAAlB;;AACA,eAAK,IAAI2C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAApB,EAAyBG,CAAC,IAAI,CAA9B,EAAiC;AAC/ByE,YAAAA,KAAK,CAACzE,CAAD,CAAL,GAAWoE,SAAS,CAACpE,CAAD,CAApB;AACD;AACF,SA1B4B,CA2B7B;;;AACAgD,QAAAA,SAAS,GAAG,CACV,CAACa,IAAI,GAAGJ,OAAR,EAAiBM,IAAI,GAAGJ,OAAxB,CADU,EAEV,CAACG,IAAI,GAAGL,OAAR,EAAiBO,IAAI,GAAGL,OAAxB,CAFU,CAAZ,CA5B6B,CAgC7B;;AACArB,QAAAA,QAAQ,CAACoC,YAAT,CAAsBJ,SAAtB,EAAiCzG,IAAI,CAACoC,KAAL,CAAW+C,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAAX,CAAjC,EAA8DnF,IAAI,CAACoC,KAAL,CAAW+C,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAAX,CAA9D;AACA,YAAQ2B,MAAR,GAAmB,KAAKC,WAAxB,CAAQD,MAAR;;AACA,YAAIA,MAAJ,EAAY;AACV;AACAA,UAAAA,MAAM,CAACpB,KAAP,GAAeW,MAAf;AACAS,UAAAA,MAAM,CAACnB,MAAP,GAAgBW,OAAhB;AACAQ,UAAAA,MAAM,CAACE,UAAP,CAAkB,IAAlB,EAAwBH,YAAxB,CAAqCJ,SAArC,EAAgD,CAAhD,EAAmD,CAAnD;AACD;AACF;AACF;;AACD,SAAKM,WAAL,CAAiBE,KAAjB,GAAyB,CAAC9B,SAAD,GACrB,IADqB,GAErBA,SAAS,CAAC+B,GAAV,CAAc,UAAChD,CAAD;AAAA,aAAOA,CAAC,CAACgD,GAAF,CAAM,UAACnH,CAAD,EAAIoC,CAAJ;AAAA,eAAU,CAACA,CAAC,KAAK,CAAN,GAAUuC,MAAV,GAAmBC,MAApB,EAA4BwC,MAA5B,CAAmCpH,CAAnC,CAAV;AAAA,OAAN,CAAP;AAAA,KAAd,CAFJ;AAGD;;AACD0E,EAAAA,QAAQ,CAAC2C,OAAT;AACD;;AAED,SAASC,OAAT,CAAiB5C,QAAjB,SAA+C;AAAA,MAAlBC,MAAkB,SAAlBA,MAAkB;AAAA,MAAVC,MAAU,SAAVA,MAAU;;AAC7C,MAAI,KAAKK,SAAT,EAAoB;AAClB,QAAMsC,SAAS,GAAG,KAAKC,SAAL,CAAe,CAAf,CAAlB;;AACA,QAAID,SAAS,CAACE,IAAV,EAAJ,EAAsB;AACpB,UAAMC,EAAE,GAAG/C,MAAM,CAAC4C,SAAS,CAACI,KAAV,EAAD,CAAN,KAA8B,CAAC,KAAKC,KAAL,CAAWlF,CAAZ,GAAgB,KAAKqC,MAArB,GAA8B,CAA5D,CAAX;AACAwC,MAAAA,SAAS,CAACM,KAAV,CAAgB,MAAhB,YAA2BH,EAA3B,SAAmCG,KAAnC,CAAyC,SAAzC,EAAoDH,EAAE,GAAG,CAAL,IAAUA,EAAE,IAAI,KAAK3C,MAArB,GAA8B,MAA9B,GAAuC,OAA3F;AACD;;AACD,QAAM+C,SAAS,GAAG,KAAKN,SAAL,CAAe,CAAf,CAAlB;;AACA,QAAIM,SAAS,CAACL,IAAV,EAAJ,EAAsB;AACpB,UAAMM,EAAE,GAAGnD,MAAM,CAACkD,SAAS,CAACH,KAAV,EAAD,CAAN,KAA8B,CAAC,KAAKC,KAAL,CAAWjF,CAAZ,GAAgB,CAAhB,GAAoB,KAAKqC,OAAvD,CAAX;AACA8C,MAAAA,SAAS,CAACD,KAAV,CAAgB,KAAhB,YAA0BE,EAA1B,SAAkCF,KAAlC,CAAwC,SAAxC,EAAmDE,EAAE,GAAG,CAAL,IAAUA,EAAE,IAAI,KAAK/C,OAArB,GAA+B,MAA/B,GAAwC,OAA3F;AACD;;AACD,4BAA0B,KAAKgC,WAA/B;AAAA,QAAQD,MAAR,qBAAQA,MAAR;AAAA,QAAgBG,KAAhB,qBAAgBA,KAAhB;;AACA,QAAIA,KAAJ,EAAW;AACT;AACA,uBAA6BA,KAAK,CAACC,GAAN,CAAU,UAAChD,CAAD;AAAA,eAAOA,CAAC,CAACgD,GAAF,CAAM,UAACnH,CAAD,EAAIoC,CAAJ;AAAA,iBAAU,CAACA,CAAC,KAAK,CAAN,GAAUuC,MAAV,GAAmBC,MAApB,EAA4B5E,CAA5B,CAAV;AAAA,SAAN,CAAP;AAAA,OAAV,CAA7B;AAAA;AAAA;AAAA,UAAQ6C,EAAR;AAAA,UAAYC,EAAZ;AAAA;AAAA,UAAkBC,EAAlB;AAAA,UAAsBC,EAAtB;;AACA0B,MAAAA,QAAQ,CAACG,IAAT;AACAH,MAAAA,QAAQ,CAACI,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKC,MAA9B,EAAsC,KAAKC,OAA3C;AACAN,MAAAA,QAAQ,CAACsD,SAAT,CAAmBjB,MAAnB,EAA2BlE,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAE,GAAGF,EAAxC,EAA4CG,EAAE,GAAGF,EAAjD;AACA4B,MAAAA,QAAQ,CAAC2C,OAAT;AACD;AACF;AACF;;AAED,SAASY,UAAT,CAAoBC,OAApB,EAA6BC,KAA7B,EAAoCC,SAApC,EAA+C;AAC7C,MAAM/C,IAAI,GAAG,KAAKA,IAAL,CAAUC,IAAvB;AACA,MAAM+C,QAAQ,GAAG,KAAKT,KAAtB;AACA,sBAA2B,KAAKU,OAAhC;AAAA,MAAQC,KAAR,iBAAQA,KAAR;AAAA,MAAeC,OAAf,iBAAeA,OAAf;;AACA,4CAAeL,KAAf;AAAA,MAAKtF,EAAL;AAAA,MAASC,EAAT;;AACA,MAAM2F,QAAQ,GAAG,EAAjB;;AACA,MAAI,KAAKxD,SAAL,IAAkBsD,KAAK,KAAK,IAAhC,EAAsC;AACpC,QAAM5D,MAAM,GAAG,CAACyD,SAAS,CAAC1F,CAAV,IAAe0F,SAAS,CAACM,EAA1B,EAA8Bd,KAA7C;AACA,QAAMhD,MAAM,GAAG,CAACwD,SAAS,CAACzF,CAAV,IAAeyF,SAAS,CAACO,EAA1B,EAA8Bf,KAA7C;AACA,QAAIgB,IAAI,GAAGjE,MAAM,CAACyC,MAAP,CAAcvE,EAAd,CAAX;AACA,QAAIgG,IAAI,GAAGjE,MAAM,CAACwC,MAAP,CAActE,EAAd,CAAX;AACA,QAAIgG,IAAI,GAAG,CAAX,CALoC,CAMpC;;AACA,8BAAmBC,IAAI,CAACC,aAAL,CAAmB,CAACJ,IAApB,EAA0BvD,IAAI,CAAC3C,CAA/B,CAAnB;AAAA;AAAA,QAAOuG,GAAP;AAAA,QAAYC,GAAZ;;AACA,+BAAmBH,IAAI,CAACC,aAAL,CAAmB,CAACH,IAApB,EAA0BxD,IAAI,CAAC1C,CAA/B,CAAnB;AAAA;AAAA,QAAOwG,GAAP;AAAA,QAAYC,GAAZ;;AACA,QAAIH,GAAG,IAAI,CAAP,IAAYC,GAAG,IAAI,CAAnB,IAAwBC,GAAG,IAAI,CAA/B,IAAoCC,GAAG,IAAI,CAA/C,EAAkD;AAChD,UAAMC,KAAK,GAAG,CAAChE,IAAI,CAAC3C,CAAL,CAAOuG,GAAP,CAAf;AACA,UAAMK,KAAK,GAAG,CAACjE,IAAI,CAAC3C,CAAL,CAAOwG,GAAP,CAAf;AACA,UAAMK,KAAK,GAAG,CAAClE,IAAI,CAAC1C,CAAL,CAAOwG,GAAP,CAAf;AACA,UAAMK,KAAK,GAAG,CAACnE,IAAI,CAAC1C,CAAL,CAAOyG,GAAP,CAAf;;AACA,UAAIC,KAAK,KAAKC,KAAV,IAAmBC,KAAK,KAAKC,KAAjC,EAAwC;AACtC;AACAV,QAAAA,IAAI,GAAG,CAACzD,IAAI,CAACzC,CAAL,CAAOuG,GAAP,KAAe,EAAhB,EAAoBF,GAApB,CAAP;AACD,OAHD,MAGO,IAAIT,OAAJ,EAAa;AAClB,YAAMlE,OAAO,GAAG9D,aAAa,CAAC,CAACoI,IAAF,EAAQS,KAAR,EAAeC,KAAf,EAAsBL,GAAtB,EAA2BC,GAA3B,CAA7B;AACA,YAAMtF,OAAO,GAAGpD,aAAa,CAAC,CAACqI,IAAF,EAAQU,KAAR,EAAeC,KAAf,EAAsBL,GAAtB,EAA2BC,GAA3B,CAA7B;AACA,YAAM/H,KAAK,GAAG,CAACgE,IAAI,CAACzC,CAAL,CAAOgB,OAAO,CAACjD,IAAf,KAAwB,EAAzB,EAA6B2D,OAAO,CAAC3D,IAArC,CAAd;AACA,YAAMW,KAAK,GAAG,CAAC+D,IAAI,CAACzC,CAAL,CAAOgB,OAAO,CAACjD,IAAf,KAAwB,EAAzB,EAA6B2D,OAAO,CAAC1D,IAArC,CAAd;AACA,YAAMY,KAAK,GAAG,CAAC6D,IAAI,CAACzC,CAAL,CAAOgB,OAAO,CAAChD,IAAf,KAAwB,EAAzB,EAA6B0D,OAAO,CAAC3D,IAArC,CAAd;AACA,YAAMc,KAAK,GAAG,CAAC4D,IAAI,CAACzC,CAAL,CAAOgB,OAAO,CAAChD,IAAf,KAAwB,EAAzB,EAA6B0D,OAAO,CAAC1D,IAArC,CAAd;AACAkI,QAAAA,IAAI,GAAG3H,aAAa,CAACmD,OAAO,CAACzD,MAAT,EAAiBQ,KAAjB,EAAwBC,KAAxB,EAA+BsC,OAAO,CAAC/C,MAAvC,EAA+CW,KAA/C,EAAsDC,KAAtD,CAApB;AACD,OARM,MAQA;AACL,YAAMgI,EAAE,GAAGxJ,IAAI,CAACyJ,GAAL,CAASd,IAAI,GAAGS,KAAhB,IAAyBpJ,IAAI,CAACyJ,GAAL,CAASd,IAAI,GAAGU,KAAhB,CAAzB,GAAkDJ,GAAlD,GAAwDD,GAAnE;AACA,YAAMU,EAAE,GAAG1J,IAAI,CAACyJ,GAAL,CAASb,IAAI,GAAGU,KAAhB,IAAyBtJ,IAAI,CAACyJ,GAAL,CAASb,IAAI,GAAGW,KAAhB,CAAzB,GAAkDJ,GAAlD,GAAwDD,GAAnE;AACAP,QAAAA,IAAI,GAAG,CAACvD,IAAI,CAAC3C,CAAL,CAAO+G,EAAP,CAAR;AACAZ,QAAAA,IAAI,GAAG,CAACxD,IAAI,CAAC1C,CAAL,CAAOgH,EAAP,CAAR;AACAb,QAAAA,IAAI,GAAG,CAACzD,IAAI,CAACzC,CAAL,CAAO+G,EAAP,KAAc,EAAf,EAAmBF,EAAnB,CAAP;AACA5G,QAAAA,EAAE,GAAG8B,MAAM,CAACiE,IAAD,CAAX;AACA9F,QAAAA,EAAE,GAAG8B,MAAM,CAACiE,IAAD,CAAX;AACD;;AACDJ,MAAAA,QAAQ,CAACmB,IAAT,iCAEOvB,QAAQ,CAACD,SAAS,CAAC1F,CAAV,GAAc,GAAd,GAAoB,IAArB,CAFf;AAGIX,QAAAA,KAAK,EAAE6G;AAHX,0CAMOP,QAAQ,CAACD,SAAS,CAACzF,CAAV,GAAc,GAAd,GAAoB,IAArB,CANf;AAOIZ,QAAAA,KAAK,EAAE8G;AAPX,0CAUOR,QAAQ,CAACzF,CAVhB;AAWIb,QAAAA,KAAK,EAAE+G;AAXX;AAcD;AACF;;AACD,MAAIL,QAAQ,CAAChJ,MAAT,GAAkB,CAAtB,EAAyB;AACvB;AACA,QAAMoK,SAAS,GAAG,CAAC3B,OAAO,CAAC7C,IAAR,IAAgB,EAAjB,EAAqByE,KAArB,CAA2B,CAA3B,CAAlB;AACA,QAAMC,KAAK,aAAOtB,QAAP,mCAAoBoB,SAApB,EAAX;;AACA,QAAMG,MAAM,GAAG,SAATA,MAAS,CAACC,SAAD,EAAe;AAC5BA,MAAAA,SAAS,CACNC,SADH,CACa,KADb,EAEG7E,IAFH,CAEQ0E,KAFR,EAGGI,IAHH,CAGQ,KAHR,EAIGC,IAJH,CAIQ,OAJR,EAIiB,sBAJjB,EAKGC,IALH,CAKQ,UAAC5H,CAAD,EAAIL,CAAJ;AAAA,eACJA,CAAC,KAAK,CAAN,aACOK,CAAC,CAAC6H,KADT,mBACkB7H,CAAC,CAACtD,MAAF,CAASsD,CAAC,CAACV,KAAX,CADlB,SACsCU,CAAC,CAAC8H,IADxC,cAGM,CAAC9H,CAAC,CAACgE,KAAH,GACI,EADJ,uCAEgChE,CAAC,CAACgE,KAFlC,uGAHN,mBAMahE,CAAC,CAAC6H,KANf,2DAOM,CAAC7H,CAAC,CAACgE,KAAH,GAAW,EAAX,GAAgB,oBAPtB,gBAQShE,CAAC,CAACtD,MAAF,CAASsD,CAAC,CAACV,KAAX,CART,SAQ6BU,CAAC,CAAC8H,IAR/B,YADI;AAAA,OALR;AAgBD,KAjBD;;AAkBA,WAAO;AAAE1H,MAAAA,EAAE,EAAFA,EAAF;AAAMC,MAAAA,EAAE,EAAFA,EAAN;AAAUuC,MAAAA,IAAI,EAAE0E,KAAhB;AAAuBC,MAAAA,MAAM,EAANA;AAAvB,KAAP;AACD;;AACD,2BAAY9B,OAAZ;AACD;;AAED,SAASsC,WAAT,GAAuB;AACrB,MAAI,KAAK5C,KAAL,CAAWhF,CAAf,EAAkB;AAChB,QAAM6H,OAAO,GAAG,KAAK7C,KAAL,CAAWhF,CAAX,CAAazD,MAA7B;;AACA,gBAA+B,KAAKyI,KAAL,CAAWhF,CAAX,CAAa8H,MAAb,IAAuB,EAAtD;AAAA;AAAA,QAAKrG,OAAL;AAAA,QAAc6C,KAAd;AAAA,QAAqBwD,MAArB;;AACArG,IAAAA,OAAO,GAAGA,OAAO,IAAI,CAArB;AACA6C,IAAAA,KAAK,GAAGA,KAAK,IAAI,CAAC,MAAD,EAAS,MAAT,CAAjB;AACAwD,IAAAA,MAAM,GAAGA,MAAM,IAAI,CAAC,CAAD,EAAI,CAAJ,CAAnB;AACA,SAAKvF,OAAL,CACG+B,KADH,CACSA,KAAK,CAACC,GAAN,CAAU,UAACzH,CAAD;AAAA,aAAOR,EAAE,CAACuH,KAAH,CAAS/G,CAAT,EAAYiL,IAAZ,CAAiB;AAAEtG,QAAAA,OAAO,EAAPA;AAAF,OAAjB,CAAP;AAAA,KAAV,CADT,EAEGqG,MAFH,CAEUA,MAFV,EAGGE,KAHH,CAGS,IAHT,EANgB,CASA;;AAChB,QAAI,KAAKC,QAAT,EAAmB;AACjB,UAAMC,cAAc,GAAG,KAAKC,cAAL,CAAoBC,MAApB,CAA2B,gBAA3B,CAAvB;AACA,UAAMC,YAAY,GAAG,KAAKF,cAAL,CAAoBC,MAApB,CAA2B,eAA3B,CAArB;AACA,UAAMpF,MAAM,GAAG,KAAKZ,OAApB;AACA,UAAMkG,WAAW,GAAGR,MAAM,CAAC,CAAD,CAA1B;AACA,UAAMS,UAAU,GAAGT,MAAM,CAACA,MAAM,CAACjL,MAAP,GAAgB,CAAjB,CAAN,GAA4ByL,WAA/C;AACA,UAAMvF,KAAK,GAAG,KAAKkF,QAAL,CAAclF,KAA5B;AACAmF,MAAAA,cAAc,CACXZ,SADH,CACa,MADb,EAEG7E,IAFH,CAEQqF,MAFR,EAGGP,IAHH,CAGQ,MAHR,EAIGC,IAJH,CAIQ,QAJR,EAIkB,UAACpK,CAAD;AAAA,yBAAW,OAAOA,CAAC,GAAGkL,WAAX,CAAD,GAA4BC,UAAtC;AAAA,OAJlB,EAKGf,IALH,CAKQ,YALR,EAKsB,UAACgB,CAAD,EAAIhJ,CAAJ;AAAA,eAAU8E,KAAK,CAAC9E,CAAD,CAAf;AAAA,OALtB;AAMA6I,MAAAA,YAAY,CACTf,SADH,CACa,GADb,EAEG7E,IAFH,CAEQqF,MAFR,EAGGP,IAHH,CAII,UAACkB,KAAD,EAAW;AACT,YAAMC,IAAI,GAAGD,KAAK,CACfE,MADU,CACH,GADG,EAEVnB,IAFU,CAEL,OAFK,EAEI,MAFJ,EAGVA,IAHU,CAGL,WAHK,EAGQ,UAACpK,CAAD;AAAA,qCAAoB2F,KAApB,cAA6BC,MAAM,IAAI,IAAI,CAAC5F,CAAC,GAAGkL,WAAL,IAAoBC,UAA5B,CAAnC;AAAA,SAHR,CAAb;AAIAG,QAAAA,IAAI,CAACC,MAAL,CAAY,MAAZ,EAAoBnB,IAApB,CAAyB,GAAzB,EAA8B,mBAA9B;AACAkB,QAAAA,IAAI,CACDC,MADH,CACU,MADV,EAEGnB,IAFH,CAEQ,GAFR,EAEa,CAFb,EAGGA,IAHH,CAGQ,IAHR,EAGc,QAHd,EAIGA,IAJH,CAIQ,aAJR,EAIuB,OAJvB,EAKGoB,IALH,CAKQ,UAACxL,CAAD;AAAA,iBAAOyK,OAAO,CAACzK,CAAD,CAAd;AAAA,SALR;AAMA,eAAOsL,IAAP;AACD,OAjBL,EAkBI,UAACG,MAAD,EAAY;AACVA,QAAAA,MAAM,CAACrB,IAAP,CAAY,WAAZ,EAAyB,UAACpK,CAAD;AAAA,qCAAoB2F,KAApB,cAA6BC,MAAM,IAAI,IAAI,CAAC5F,CAAC,GAAGkL,WAAL,IAAoBC,UAA5B,CAAnC;AAAA,SAAzB;AACAM,QAAAA,MAAM,CAACT,MAAP,CAAc,MAAd,EAAsBQ,IAAtB,CAA2B,UAACxL,CAAD;AAAA,iBAAOyK,OAAO,CAACzK,CAAD,CAAd;AAAA,SAA3B;AACA,eAAOyL,MAAP;AACD,OAtBL;AAwBD;AACF;AACF;;AAED,SAASC,WAAT,CAAqBvD,KAArB,SAAgD;AAAA,MAAlBxD,MAAkB,SAAlBA,MAAkB;AAAA,MAAVC,MAAU,SAAVA,MAAU;AAC9C,MAAIoF,MAAM,GAAG,EAAb;;AACA,MAAI,KAAK/E,SAAT,EAAoB;AAClB,QAAM0G,QAAQ,GAAG,KAAKtG,IAAL,CAAUC,IAA3B;;AACA,+CAAe6C,KAAf;AAAA,QAAKtF,EAAL;AAAA,QAASC,EAAT,cAFkB,CAGlB;;;AACA,gBAAmB,EAAnB;AAAA,QAAK8F,IAAL;AAAA,QAAWC,IAAX;AACA,QAAMtB,SAAS,GAAG,KAAKC,SAAL,CAAe,CAAf,CAAlB;;AACA,QAAID,SAAS,CAACE,IAAV,EAAJ,EAAsB;AACpB;AACAmB,MAAAA,IAAI,GAAG3I,IAAI,CAACM,GAAL,CAASN,IAAI,CAACK,GAAL,CAAS,CAACqE,MAAM,CAACyC,MAAP,CAAcvE,EAAd,CAAV,EAA6B8I,QAAQ,CAACjJ,CAAT,CAAWiJ,QAAQ,CAACjJ,CAAT,CAAWjD,MAAX,GAAoB,CAA/B,CAA7B,CAAT,EAA0EkM,QAAQ,CAACjJ,CAAT,CAAW,CAAX,CAA1E,CAAP;AACAG,MAAAA,EAAE,GAAG8B,MAAM,CAACiE,IAAD,CAAX;AACArB,MAAAA,SAAS,CAACM,KAAV,CAAgB,MAAhB,YAA2BhF,EAA3B,SAAmCgF,KAAnC,CAAyC,SAAzC,EAAoD,OAApD;AACD;;AACD,QAAMC,SAAS,GAAG,KAAKN,SAAL,CAAe,CAAf,CAAlB;;AACA,QAAIM,SAAS,CAACL,IAAV,EAAJ,EAAsB;AACpB;AACAoB,MAAAA,IAAI,GAAG5I,IAAI,CAACM,GAAL,CAASN,IAAI,CAACK,GAAL,CAAS,CAACsE,MAAM,CAACwC,MAAP,CAActE,EAAd,CAAV,EAA6B6I,QAAQ,CAAChJ,CAAT,CAAWgJ,QAAQ,CAAChJ,CAAT,CAAWlD,MAAX,GAAoB,CAA/B,CAA7B,CAAT,EAA0EkM,QAAQ,CAAChJ,CAAT,CAAW,CAAX,CAA1E,CAAP;AACAG,MAAAA,EAAE,GAAG8B,MAAM,CAACiE,IAAD,CAAX;AACAf,MAAAA,SAAS,CAACD,KAAV,CAAgB,KAAhB,YAA0B/E,EAA1B,SAAkC+E,KAAlC,CAAwC,SAAxC,EAAmD,OAAnD;AACD;;AACD,SAAK+D,WAAL,CAAiB,CAAChD,IAAD,EAAOC,IAAP,CAAjB,EAA+B,UAACgD,GAAD,EAAS;AACtC7B,MAAAA,MAAM,GAAG6B,GAAT;AACD,KAFD;AAGD;;AACD,SAAO7B,MAAP;AACD;;AAEc,SAAS8B,eAAT,CAAyBC,SAAzB,EAAoC;AAAA,MAC3CC,OAD2C;AAAA;;AAAA;;AAE/C,uBAAuB;AAAA;;AAAA;;AACrB,kBAA2D,sDAAa,EAAxE;AAAA,UAAQ3G,IAAR,SAAQA,IAAR;AAAA,UAAciD,OAAd,SAAcA,OAAd;AAAA,UAAuBuC,QAAvB,SAAuBA,QAAvB;AAAA,UAAiCjD,KAAjC,SAAiCA,KAAjC;AAAA,UAA2CqE,WAA3C;;AACA,mBAA8B5G,IAAI,IAAI,EAAtC;AAAA,UAAQC,IAAR,UAAQA,IAAR;AAAA,UAAiB4G,QAAjB;;AACA,UAAIC,MAAM,GAAGF,WAAW,CAACE,MAAzB;;AACA,UAAItB,QAAJ,EAAc;AACZA,QAAAA,QAAQ,CAACuB,IAAT,GAAgB,CAAC,CAACvB,QAAQ,CAACuB,IAA3B;AACAvB,QAAAA,QAAQ,CAACwB,IAAT,GAAgBtD,IAAI,CAACuD,QAAL,CAAczB,QAAQ,CAACwB,IAAvB,IAA+BxB,QAAQ,CAACwB,IAAxC,GAA+C,CAA/D;AACAxB,QAAAA,QAAQ,CAAClF,KAAT,GAAiBoD,IAAI,CAACuD,QAAL,CAAczB,QAAQ,CAAClF,KAAvB,IAAgCkF,QAAQ,CAAClF,KAAzC,GAAiD,CAAlE;AACAkF,QAAAA,QAAQ,CAAC0B,KAAT,GAAiBxD,IAAI,CAACuD,QAAL,CAAczB,QAAQ,CAAC0B,KAAvB,IAAgC1B,QAAQ,CAAC0B,KAAzC,GAAiD,CAAlE;;AACA,YAAI1B,QAAQ,CAACuB,IAAb,EAAmB;AACjBD,UAAAA,MAAM,GAAG,CAACpD,IAAI,CAACuD,QAAL,CAAcH,MAAd,IAAwBA,MAAxB,GAAiC,CAAlC,IAAuCtB,QAAQ,CAACwB,IAAhD,GAAuDxB,QAAQ,CAAClF,KAAhE,GAAwEkF,QAAQ,CAAC0B,KAA1F;AACD;AACF;;AACD,gEACKN,WADL;AAEEE,QAAAA,MAAM,EAANA,MAFF;AAGE9G,QAAAA,IAAI;AACFC,UAAAA,IAAI,EAAE,CAACA,IAAD,GAAQ;AAAE5C,YAAAA,CAAC,EAAE,EAAL;AAASC,YAAAA,CAAC,EAAE,EAAZ;AAAgBC,YAAAA,CAAC,EAAE;AAAnB,WAAR,GAAkC;AAAEF,YAAAA,CAAC,EAAE4C,IAAI,CAAC5C,CAAL,IAAU,EAAf;AAAmBC,YAAAA,CAAC,EAAE2C,IAAI,CAAC3C,CAAL,IAAU,EAAhC;AAAoCC,YAAAA,CAAC,EAAE0C,IAAI,CAAC1C,CAAL,IAAU;AAAjD;AADtC,WAECsJ,QAFD,CAHN;AAOE5D,QAAAA,OAAO,EAAE,CAACA,OAAD,GACL,KADK;AAGHC,UAAAA,KAAK,EAAE,IAHJ;AAIHyC,UAAAA,MAAM,EAAE,EAJL;AAKHxC,UAAAA,OAAO,EAAE;AALN,WAMAF,OANA;AAOHkE,UAAAA,OAAO,EAAE,iBAACX,GAAD,EAAkB;AAAA,8CAATY,IAAS;AAATA,cAAAA,IAAS;AAAA;;AACzB,gBAAIzC,MAAM,GAAG/B,UAAU,CAACyE,IAAX,OAAAzE,UAAU,gDAAY4D,GAAZ,SAAoBY,IAApB,EAAvB;;AACA,gBAAI,OAAOnE,OAAO,CAACkE,OAAf,KAA2B,UAA/B,EAA2C;AAAA;;AACzCxC,cAAAA,MAAM,GAAG,oBAAA1B,OAAO,CAACkE,OAAR,EAAgBE,IAAhB,uEAA2B1C,MAA3B,SAAsCyC,IAAtC,EAAT;AACD;;AACD,mBAAOzC,MAAP;AACD;AAbE,UAPX;AAsBEpC,QAAAA,KAAK;AACH;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACUhF,UAAAA,CAAC,EAAE;AAAEzD,YAAAA,MAAM,EAAEF;AAAV;AATA,WAUA2I,KAVA;AAtBP;AAmCA,YAAKiD,QAAL,GAAgBA,QAAhB;AACA,YAAK5F,SAAL,GAAiB,IAAjB;AACA,UAAM0H,QAAQ,aAAM,MAAK/E,KAAL,CAAWhF,CAAX,CAAa0H,KAAb,IAAsB,EAA5B,SAAiC,MAAK1C,KAAL,CAAWhF,CAAX,CAAagK,QAAb,gBAA8B,MAAKhF,KAAL,CAAWhF,CAAX,CAAagK,QAA3C,UAA0D,EAA3F,SACZ,MAAKhF,KAAL,CAAWhF,CAAX,CAAa2H,IAAb,gBAA0B,MAAK3C,KAAL,CAAWhF,CAAX,CAAa2H,IAAvC,UAAkD,EADtC,CAAd,CAlDqB,CAqDrB;;AACA,UAAMsC,YAAY,GAAG,MAAKC,QAAL,GAAgB,CAArC;;AACA,UAAMC,SAAS,GAAG,MAAKhC,cAAL,CACfC,MADe,CACR,SADQ,EAEfO,MAFe,CAER,GAFQ,EAGfnB,IAHe,CAGV,OAHU,EAGD,WAHC,EAIfA,IAJe,CAIV,MAJU,EAIF,cAJE,EAKfA,IALe,CAMd,WANc,EAOd;AAPc,0BAQD,MAAKxC,KAAL,CAAWjF,CAAX,GAAe,EAAf,GAAoB,MAAKoC,MAAL,GAAc,EARjC,eASZ;AACA,YAAK6C,KAAL,CAAWlF,CAAX,GAAemK,YAAY,GAAG,MAAKG,OAAL,CAAa,CAAb,CAA9B,GAAgD,MAAKhI,OAAL,GAAe,MAAKgI,OAAL,CAAa,CAAb,CAAf,GAAiChO,QAAjC,GAA4C6N,YAVhF,OAAlB;;AAaAE,MAAAA,SAAS,CACNxB,MADH,CACU,MADV,EAEGnB,IAFH,CAEQ,IAFR,EAEe,CAAC,MAAKxC,KAAL,CAAWjF,CAAX,GAAe,CAAf,GAAmB,CAAC,CAArB,IAA0BoG,IAAI,CAACkE,cAAL,CAAoBN,QAApB,EAA8B,MAAKG,QAAnC,CAA3B,GAA2E,CAFzF,EAGGtB,IAHH,CAGQmB,QAHR;;AAIA,UAAI,MAAKrE,OAAT,EAAkB;AAChB,YAAQ0C,MAAR,GAAmB,MAAK1C,OAAxB,CAAQ0C,MAAR;AACAA,QAAAA,MAAM,CAACkC,KAAP,CAAa,EAAb,EAAiBC,OAAjB,CAAyB,UAACC,GAAD,EAAS;AAChC,cAAIA,GAAJ,EAAS;AACP;AACA,kBAAKC,cAAL,CACG9B,MADH,CACU,KADV,EAEGnB,IAFH,CAEQ,OAFR,YAEoBgD,GAFpB,gBAGGvF,KAHH,CAGS,YAHT,EAGuB,SAHvB,EAIGA,KAJH,CAIS,SAJT,EAIoB,MAJpB,EAKGA,KALH,CAKS,UALT,EAKqB,UALrB,EAME;AANF,aAOGA,KAPH,CAOS,KAPT,EAOgB,CAAC,MAAKD,KAAL,CAAWjF,CAAZ,GAAgB,CAAhB,GAAoB,MAAKqC,OAAL,GAAe,CAPnD,EAQE;AARF,aASG6C,KATH,CASS,MATT,EASiB,CAAC,MAAKD,KAAL,CAAWlF,CAAZ,GAAgB,MAAKqC,MAAL,GAAc,CAA9B,GAAkC,CATnD,EAUG8C,KAVH,CAUS,OAVT,EAUkBuF,GAAG,KAAK,GAAR,GAAc,KAAd,GAAsB,MAVxC,EAWGvF,KAXH,CAWS,QAXT,EAWmBuF,GAAG,KAAK,GAAR,GAAc,MAAd,GAAuB,KAX1C;AAYD;AACF,SAhBD;AAiBD,OA3FoB,CA4FrB;;;AACA,UAAME,QAAQ,GAAG,CAAC,MAAKD,cAAL,CAAoBrC,MAApB,CAA2B,aAA3B,CAAD,EAA4C,MAAKqC,cAAL,CAAoBrC,MAApB,CAA2B,aAA3B,CAA5C,CAAjB;AACA,YAAKxD,SAAL,GAAiB8F,QAAjB;;AACA,UAAMC,aAAa,GAAG,MAAKxC,cAAL,CACnByC,MADmB,CACZ,KADY,EACL,KADK,EAEnB3F,KAFmB,CAEb,UAFa,EAED,UAFC,EAGpB;AAHoB,OAInBA,KAJmB,CAIb,OAJa,YAID,MAAK9C,MAJJ,SAKpB;AALoB,OAMnB8C,KANmB,CAMb,QANa,YAMA,MAAK7C,OANL,SAOpB;AAPoB,OAQnB6C,KARmB,CAQb,KARa,YAQH,MAAKmF,OAAL,CAAa,CAAb,CARG,SASpB;AAToB,OAUnBnF,KAVmB,CAUb,MAVa,YAUF,MAAKmF,OAAL,CAAa,CAAb,CAVE,QAAtB;;AAWA,UAAMS,OAAO,GAAGF,aAAa,CAC1BhC,MADa,CACN,QADM,EAEb1D,KAFa,CAEP,OAFO,EAEE,MAFF,EAGbA,KAHa,CAGP,QAHO,EAGG,MAHH,EAId;AAJc,OAKbuC,IALa,CAKR,OALQ,EAKC,MAAKrF,MALN,EAMd;AANc,OAObqF,IAPa,CAOR,QAPQ,EAOE,MAAKpF,OAPP,CAAhB;;AAQA,UAAI6F,QAAJ,EAAc;AACZ,YAAM6C,UAAU,GAAG3E,IAAI,CAAC4E,IAAL,CAAU,UAAV,CAAnB;;AACA,cAAK5C,cAAL,CACGC,MADH,CACU,KADV,EAEGA,MAFH,CAEU,MAFV,EAGGO,MAHH,CAGU,gBAHV,EAIGnB,IAJH,CAIQ,IAJR,EAIcsD,UAJd,EAKGtD,IALH,CAKQ,IALR,EAKc,IALd,EAMGA,IANH,CAMQ,IANR,EAMc,MANd,EAOGA,IAPH,CAOQ,IAPR,EAOc,IAPd,EAQGA,IARH,CAQQ,IARR,EAQc,IARd;;AASA,cAAKW,cAAL,CACGC,MADH,CACU,KADV,EAEGA,MAFH,CAEU,QAFV,EAGGO,MAHH,CAGU,GAHV,EAIGnB,IAJH,CAIQ,OAJR,EAIiB,cAJjB,EAKGvC,KALH,CAKS,SALT,EAKoBgD,QAAQ,CAACuB,IAAT,GAAgB,OAAhB,GAA0B,MAL9C,EAMGhC,IANH,CAMQ,MANR,EAMgB,cANhB,EAOE;AAPF,SAQGA,IARH,CAQQ,WARR,sBAQkC,MAAKrF,MAAL,GAAc,MAAKiI,OAAL,CAAa,CAAb,CAAd,GAAgCnC,QAAQ,CAACwB,IAR3E,UASGd,MATH,CASU,MATV,EAUGnB,IAVH,CAUQ,GAVR,EAUa,CAVb,EAWGA,IAXH,CAWQ,GAXR,EAWa,CAXb,EAYGA,IAZH,CAYQ,OAZR,EAYiBS,QAAQ,CAAClF,KAZ1B,EAaE;AAbF,SAcGyE,IAdH,CAcQ,QAdR,EAckB,MAAKpF,OAdvB,EAeGoF,IAfH,CAeQ,MAfR,iBAewBsD,UAfxB;AAgBD;;AACD,UAAMhJ,QAAQ,GAAG+I,OAAO,CAAChG,IAAR,GAAeR,UAAf,CAA0B,IAA1B,CAAjB;AACA,YAAK9B,OAAL,GAAejG,EAAE,CAAC0O,WAAH,EAAf;AACApD,MAAAA,WAAW,CAACkC,IAAZ;AACA,YAAK1F,WAAL,GAAmB;AACjBD,QAAAA,MAAM,EAAE8G,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CADS;AAEjB5G,QAAAA,KAAK,EAAE;AAFU,OAAnB;AAIA,UAAM6G,UAAU,GAAG,MAAKC,SAAxB;;AACA,YAAKA,SAAL,GAAiB,UAACxK,CAAD,EAAgB;AAAA,2CAATiJ,IAAS;AAATA,UAAAA,IAAS;AAAA;;AAC/BsB,QAAAA,UAAU,CAACrB,IAAX,OAAAqB,UAAU,GAAM,IAAN,EAAYvK,CAAZ,SAAkBiJ,IAAlB,EAAV;AACA,2BAAyBjJ,CAAC,CAAC4E,SAA3B;AAAA,YAAQ1F,CAAR,gBAAQA,CAAR;AAAA,YAAWgG,EAAX,gBAAWA,EAAX;AAAA,YAAe/F,CAAf,gBAAeA,CAAf;AAAA,YAAkBgG,EAAlB,gBAAkBA,EAAlB;AACA,YAAMhE,MAAM,GAAG,CAACjC,CAAC,IAAIgG,EAAN,EAAUd,KAAzB;AACA,YAAMhD,MAAM,GAAG,CAACjC,CAAC,IAAIgG,EAAN,EAAUf,KAAzB;AACA,eAAO8D,WAAW,CAACgB,IAAZ,8CAAuBlJ,CAAC,CAACyK,WAAF,GAAgB/O,EAAE,CAACgP,OAAH,CAAW1K,CAAC,CAACyK,WAAb,CAAhB,GAA4C,CAAC,CAAD,EAAI,CAAJ,CAAnE,EAA2E;AAAEtJ,UAAAA,MAAM,EAANA,MAAF;AAAUC,UAAAA,MAAM,EAANA;AAAV,SAA3E,CAAP;AACD,OAND;;AAOA,UAAMuJ,aAAa,GAAG,MAAKC,YAA3B;;AACA,YAAKA,YAAL,GAAoB,UAAC5K,CAAD,EAAgB;AAAA,2CAATiJ,IAAS;AAATA,UAAAA,IAAS;AAAA;;AAClC0B,QAAAA,aAAa,CAACzB,IAAd,OAAAyB,aAAa,GAAM,IAAN,EAAY3K,CAAZ,SAAkBiJ,IAAlB,EAAb;AACAa,QAAAA,QAAQ,CAACH,OAAT,CAAiB,UAACkB,EAAD;AAAA,iBAAQA,EAAE,CAAC5G,IAAH,MAAa4G,EAAE,CAACxG,KAAH,CAAS,SAAT,EAAoB,MAApB,CAArB;AAAA,SAAjB;AACD,OAHD;;AAIA,UAAMyG,SAAS,GAAG,MAAKC,QAAvB;;AACA,YAAKA,QAAL,GAAgB,UAAC/K,CAAD,EAAgB;AAAA,2CAATiJ,IAAS;AAATA,UAAAA,IAAS;AAAA;;AAC9B6B,QAAAA,SAAS,CAAC5B,IAAV,OAAA4B,SAAS,GAAM,IAAN,EAAY9K,CAAZ,SAAkBiJ,IAAlB,EAAT;AACA,4BAAyBjJ,CAAC,CAAC4E,SAA3B;AAAA,YAAQ1F,CAAR,iBAAQA,CAAR;AAAA,YAAWgG,EAAX,iBAAWA,EAAX;AAAA,YAAe/F,CAAf,iBAAeA,CAAf;AAAA,YAAkBgG,EAAlB,iBAAkBA,EAAlB;AACA,YAAMhE,MAAM,GAAG,CAACjC,CAAC,IAAIgG,EAAN,EAAUd,KAAzB;AACA,YAAMhD,MAAM,GAAG,CAACjC,CAAC,IAAIgG,EAAN,EAAUf,KAAzB;AACAN,QAAAA,OAAO,CAACoF,IAAR,8CAAmBhI,QAAnB,EAA6B;AAAEC,UAAAA,MAAM,EAANA,MAAF;AAAUC,UAAAA,MAAM,EAANA;AAAV,SAA7B;AACD,OAND;;AAOA,UAAM4J,SAAS,GAAG,MAAKC,QAAvB;AACA,YAAKC,gBAAL,GAAwB3F,IAAI,CAAC4F,QAAL,CAAclK,OAAd,EAAuB,GAAvB,EAA4B;AAAEmK,QAAAA,OAAO,EAAE,KAAX;AAAkBC,QAAAA,QAAQ,EAAE;AAA5B,OAA5B,CAAxB;;AACA,YAAKJ,QAAL,GAAgB,UAACjL,CAAD,EAAgB;AAAA,2CAATiJ,IAAS;AAATA,UAAAA,IAAS;AAAA;;AAC9B+B,QAAAA,SAAS,CAAC9B,IAAV,OAAA8B,SAAS,GAAM,IAAN,EAAYhL,CAAZ,SAAkBiJ,IAAlB,EAAT;AACA,4BAAyBjJ,CAAC,CAAC4E,SAA3B;AAAA,YAAQ1F,CAAR,iBAAQA,CAAR;AAAA,YAAWgG,EAAX,iBAAWA,EAAX;AAAA,YAAe/F,CAAf,iBAAeA,CAAf;AAAA,YAAkBgG,EAAlB,iBAAkBA,EAAlB;AACA,YAAMhE,MAAM,GAAG,CAACjC,CAAC,IAAIgG,EAAN,EAAUd,KAAzB;AACA,YAAMhD,MAAM,GAAG,CAACjC,CAAC,IAAIgG,EAAN,EAAUf,KAAzB;;AACA,cAAK8G,gBAAL,CAAsBhC,IAAtB,8CAAiChI,QAAjC,EAA2C;AAAEC,UAAAA,MAAM,EAANA,MAAF;AAAUC,UAAAA,MAAM,EAANA;AAAV,SAA3C;;AACA,YAAI,CAACpB,CAAC,CAACyK,WAAH,IAAkBzK,CAAC,CAACyK,WAAF,CAAca,IAAd,KAAuB,MAA7C,EAAqD;AACnD/F,UAAAA,IAAI,CAACgG,KAAL,CAAW,YAAM;AACf,kBAAKL,gBAAL,CAAsBM,KAAtB;AACD,WAFD,EAEG,CAFH;AAGD;AACF,OAXD;;AAYA,UAAMC,QAAQ,GAAG,MAAKC,OAAtB;;AACA,YAAKA,OAAL,GAAe,UAAC1L,CAAD,UAAqD;AAAA,YAA/CmC,KAA+C,UAA/CA,KAA+C;AAAA,YAAxCC,MAAwC,UAAxCA,MAAwC;AAAA,YAAhCoH,OAAgC,UAAhCA,OAAgC;AAAA,YAApBmC,IAAoB;;AAAA,2CAAT1C,IAAS;AAATA,UAAAA,IAAS;AAAA;;AAClEwC,QAAAA,QAAQ,CAACvC,IAAT,OAAAuC,QAAQ,GAAM,IAAN,EAAYzL,CAAZ;AAAiBmC,UAAAA,KAAK,EAALA,KAAjB;AAAwBC,UAAAA,MAAM,EAANA,MAAxB;AAAgCoH,UAAAA,OAAO,EAAPA;AAAhC,WAA4CmC,IAA5C,UAAuD1C,IAAvD,EAAR;AACAc,QAAAA,aAAa,CACV1F,KADH,CACS,OADT,YACqBlC,KADrB,SAEGkC,KAFH,CAES,QAFT,YAEsBjC,MAFtB,SAGGiC,KAHH,CAGS,KAHT,YAGmBmF,OAAO,CAAC,CAAD,CAH1B,SAIGnF,KAJH,CAIS,MAJT,YAIoBmF,OAAO,CAAC,CAAD,CAJ3B;AAKAS,QAAAA,OAAO,CAACrD,IAAR,CAAa,OAAb,EAAsBzE,KAAtB,EAA6ByE,IAA7B,CAAkC,QAAlC,EAA4CxE,MAA5C;AACAmH,QAAAA,SAAS,CAAC3C,IAAV,CACE,WADF,sBAEe,MAAKxC,KAAL,CAAWjF,CAAX,GAAe,EAAf,GAAoBgD,KAAK,GAAG,EAF3C,cAGI,MAAKiC,KAAL,CAAWlF,CAAX,GAAemK,YAAY,GAAGG,OAAO,CAAC,CAAD,CAArC,GAA2CpH,MAAM,GAAGoH,OAAO,CAAC,CAAD,CAAhB,GAAsBhO,QAAtB,GAAiC6N,YAHhF;;AAMA,YAAIhC,QAAJ,EAAc;AACZ,cAAMI,YAAY,GAAG,MAAKF,cAAL,CAAoBC,MAApB,CAA2B,eAA3B,CAArB;;AACAC,UAAAA,YAAY,CAACb,IAAb,CAAkB,WAAlB,sBAA4CzE,KAAK,GAAGqH,OAAO,CAAC,CAAD,CAAf,GAAqBnC,QAAQ,CAACwB,IAA1E;AACApB,UAAAA,YAAY,CAACD,MAAb,CAAoB,MAApB,EAA4BZ,IAA5B,CAAiC,QAAjC,EAA2CxE,MAA3C;AACA,cAAMwJ,KAAK,GAAGnE,YAAY,CAACf,SAAb,CAAuB,OAAvB,CAAd;AACA,cAAMQ,MAAM,GAAG0E,KAAK,CAAC/J,IAAN,EAAf;AACA,cAAM6F,WAAW,GAAGR,MAAM,CAAC,CAAD,CAA1B;AACA,cAAMS,UAAU,GAAGT,MAAM,CAACA,MAAM,CAACjL,MAAP,GAAgB,CAAjB,CAAN,GAA4ByL,WAA/C;AACAkE,UAAAA,KAAK,CAAChF,IAAN,CACE,WADF,EAEE,UAACpK,CAAD;AAAA,uCAAoB6K,QAAQ,CAAClF,KAA7B,cAAsCC,MAAM,IAAI,IAAI,CAAC5F,CAAC,GAAGkL,WAAL,IAAoBC,UAA5B,CAA5C;AAAA,WAFF;AAID;AACF,OA3BD;;AA4BA4B,MAAAA,SAAS,CAACsC,EAAV,CAAa,OAAb,EAAsB,YAAM;AAC1B,YAAI,MAAKC,SAAT,EAAoB;AACpB,cAAKrK,SAAL,GAAiB,CAAC,MAAKA,SAAvB;AACAqI,QAAAA,QAAQ,CAACH,OAAT,CAAiB,UAACkB,EAAD;AAAA,iBAAQA,EAAE,CAAC5G,IAAH,MAAa4G,EAAE,CAACxG,KAAH,CAAS,SAAT,EAAoB,MAAK5C,SAAL,GAAiB,OAAjB,GAA2B,MAA/C,CAArB;AAAA,SAAjB;AACA8H,QAAAA,SAAS,CAAC3C,IAAV,CAAe,MAAf,EAAuB,CAAC,MAAKnF,SAAN,GAAkB,OAAlB,GAA4B,cAAnD;;AACA,YAAI,MAAKsK,QAAT,EAAmB;AACjB,gBAAKC,MAAL;AACD;AACF,OARD;AArNqB;AA8NtB;;AAhO8C;AAAA;AAAA,aAkO/C,uBAAc;AACZ,YAAMxF,MAAM,GAAG,EAAf;AACA,YAAMzC,SAAS,GAAG,KAAKC,SAAL,CAAe,CAAf,CAAlB;;AACA,YAAID,SAAS,CAACE,IAAV,EAAJ,EAAsB;AACpB,cAAMmB,IAAI,GAAGrB,SAAS,CAACI,KAAV,EAAb;AACAqC,UAAAA,MAAM,CAAC,CAAD,CAAN,GAAYpB,IAAZ;AACD;;AACD,YAAMd,SAAS,GAAG,KAAKN,SAAL,CAAe,CAAf,CAAlB;;AACA,YAAIM,SAAS,CAACL,IAAV,EAAJ,EAAsB;AACpB,cAAMoB,IAAI,GAAGf,SAAS,CAACH,KAAV,EAAb;AACAqC,UAAAA,MAAM,CAAC,CAAD,CAAN,GAAYnB,IAAZ;AACD;;AACD,eAAOmB,MAAP;AACD;AA/O8C;AAAA;AAAA,aAiP/C,qBAAYqE,EAAZ,EAAgBoB,EAAhB,EAAoB;AAClB,YAAMnC,QAAQ,GAAGe,EAAE,IAAI,EAAvB;AACA,YAAQ7F,OAAR,GAAoB,KAAKF,OAAzB,CAAQE,OAAR;AACA,YAAMmD,QAAQ,GAAG,KAAKtG,IAAL,CAAUC,IAA3B;AACA,YAAIoK,OAAO,GAAG,IAAd;AACA,YAAIC,OAAO,GAAG,IAAd,CALkB,CAMlB;;AACA,YAAMpI,SAAS,GAAG,KAAKC,SAAL,CAAe,CAAf,CAAlB;;AACA,YAAID,SAAS,CAACE,IAAV,EAAJ,EAAsB;AACpB,cAAMmB,IAAI,GAAG,CAAC0E,QAAQ,CAAC,CAAD,CAAT,IAAgBA,QAAQ,CAAC,CAAD,CAAR,KAAgB,CAAhC,GAAoC3B,QAAQ,CAACjJ,CAAT,CAAW,CAAX,CAApC,GAAoD4K,QAAQ,CAAC,CAAD,CAAzE;AACA/F,UAAAA,SAAS,CAACI,KAAV,CAAgBiB,IAAhB;AACA,cAAIE,IAAI,GAAG,EAAX,CAHoB,CAIpB;;AACA,cAAIF,IAAI,IAAI+C,QAAQ,CAACjJ,CAAT,CAAW,CAAX,CAAR,IAAyBkG,IAAI,IAAI+C,QAAQ,CAACjJ,CAAT,CAAWiJ,QAAQ,CAACjJ,CAAT,CAAWjD,MAAX,GAAoB,CAA/B,CAArC,EAAwE;AACtE,gBAAIgK,EAAE,GAAGV,IAAI,CAACC,aAAL,CAAmBJ,IAAnB,EAAyB+C,QAAQ,CAACjJ,CAAlC,EAAqC,CAAC8F,OAAtC,CAAT,CADsE,CAEtE;;AACA,gBAAI,CAACA,OAAL,EAAciB,EAAE,GAAG,CAACA,EAAD,EAAKA,EAAL,CAAL;AACd,gBAAImG,IAAI,GAAG,CAAX;AACA,gBAAInG,EAAE,CAAC,CAAD,CAAF,KAAUA,EAAE,CAAC,CAAD,CAAhB,EAAqBmG,IAAI,GAAG,CAAChH,IAAI,GAAG+C,QAAQ,CAACjJ,CAAT,CAAW+G,EAAE,CAAC,CAAD,CAAb,CAAR,KAA8BkC,QAAQ,CAACjJ,CAAT,CAAW+G,EAAE,CAAC,CAAD,CAAb,IAAoBkC,QAAQ,CAACjJ,CAAT,CAAW+G,EAAE,CAAC,CAAD,CAAb,CAAlD,CAAP;AACrBX,YAAAA,IAAI,GAAG6C,QAAQ,CAAC/I,CAAT,CAAWuE,GAAX,CAAe,UAACnH,CAAD,EAAO;AAC3B,kBAAM6P,EAAE,GAAG7P,CAAC,IAAI,EAAhB;AACA,qBAAO4P,IAAI,IAAI,CAACC,EAAE,CAACpG,EAAE,CAAC,CAAD,CAAH,CAAF,IAAa,CAAd,KAAoBoG,EAAE,CAACpG,EAAE,CAAC,CAAD,CAAH,CAAF,IAAa,CAAjC,CAAJ,CAAJ,IAAgDoG,EAAE,CAACpG,EAAE,CAAC,CAAD,CAAH,CAAF,IAAa,CAA7D,CAAP;AACD,aAHM,CAAP;AAID;;AACDiG,UAAAA,OAAO,GAAG;AAAEhN,YAAAA,CAAC,EAAEkG,IAAL;AAAWjG,YAAAA,CAAC,EAAEgJ,QAAQ,CAAChJ,CAAvB;AAA0BC,YAAAA,CAAC,EAAEkG;AAA7B,WAAV;AACD;;AACD,YAAMhB,SAAS,GAAG,KAAKN,SAAL,CAAe,CAAf,CAAlB;;AACA,YAAIM,SAAS,CAACL,IAAV,EAAJ,EAAsB;AACpB,cAAMoB,IAAI,GAAG,CAACyE,QAAQ,CAAC,CAAD,CAAT,IAAgBA,QAAQ,CAAC,CAAD,CAAR,KAAgB,CAAhC,GAAoC3B,QAAQ,CAAChJ,CAAT,CAAW,CAAX,CAApC,GAAoD2K,QAAQ,CAAC,CAAD,CAAzE;AACAxF,UAAAA,SAAS,CAACH,KAAV,CAAgBkB,IAAhB;AACA,cAAIC,KAAI,GAAG,EAAX,CAHoB,CAIpB;;AACA,cAAID,IAAI,IAAI8C,QAAQ,CAAChJ,CAAT,CAAW,CAAX,CAAR,IAAyBkG,IAAI,IAAI8C,QAAQ,CAAChJ,CAAT,CAAWgJ,QAAQ,CAAChJ,CAAT,CAAWlD,MAAX,GAAoB,CAA/B,CAArC,EAAwE;AACtE,gBAAIkK,EAAE,GAAGZ,IAAI,CAACC,aAAL,CAAmBH,IAAnB,EAAyB8C,QAAQ,CAAChJ,CAAlC,EAAqC,CAAC6F,OAAtC,CAAT,CADsE,CAEtE;;AACA,gBAAI,CAACA,OAAL,EAAcmB,EAAE,GAAG,CAACA,EAAD,EAAKA,EAAL,CAAL;AACd,gBAAImG,IAAI,GAAG,CAAX;AACA,gBAAInG,EAAE,CAAC,CAAD,CAAF,KAAUA,EAAE,CAAC,CAAD,CAAhB,EAAqBmG,IAAI,GAAG,CAACjH,IAAI,GAAG8C,QAAQ,CAAChJ,CAAT,CAAWgH,EAAE,CAAC,CAAD,CAAb,CAAR,KAA8BgC,QAAQ,CAAChJ,CAAT,CAAWgH,EAAE,CAAC,CAAD,CAAb,IAAoBgC,QAAQ,CAAChJ,CAAT,CAAWgH,EAAE,CAAC,CAAD,CAAb,CAAlD,CAAP;AACrBb,YAAAA,KAAI,GAAG,CAAC6C,QAAQ,CAAC/I,CAAT,CAAW+G,EAAE,CAAC,CAAD,CAAb,KAAqB,EAAtB,EAA0BxC,GAA1B,CAA8B,UAAC4I,EAAD,EAAK3N,CAAL,EAAW;AAC9C,kBAAM4N,EAAE,GAAG,CAACrE,QAAQ,CAAC/I,CAAT,CAAW+G,EAAE,CAAC,CAAD,CAAb,KAAqB,EAAtB,EAA0BvH,CAA1B,KAAgC,CAA3C;AACA,qBAAO0N,IAAI,IAAIE,EAAE,GAAGD,EAAT,CAAJ,GAAmBA,EAA1B;AACD,aAHM,CAAP;AAID;;AACDJ,UAAAA,OAAO,GAAG;AAAEjN,YAAAA,CAAC,EAAEiJ,QAAQ,CAACjJ,CAAd;AAAiBC,YAAAA,CAAC,EAAEkG,IAApB;AAA0BjG,YAAAA,CAAC,EAAEkG;AAA7B,WAAV;AACD;;AACD,YAAI,OAAO2G,EAAP,KAAc,UAAlB,EAA8B;AAC5BA,UAAAA,EAAE,CAAC;AAAEC,YAAAA,OAAO,EAAPA,OAAF;AAAWC,YAAAA,OAAO,EAAPA;AAAX,WAAD,CAAF;AACD;;AACD,eAAO,IAAP;AACD;AAlS8C;AAAA;AAAA,aAoS/C,iBAAQtK,IAAR,EAAcmK,MAAd,EAAsBS,aAAtB,EAAqC;AACnC,YAAI,CAAC5K,IAAL,EAAW,OAAO,IAAP;;AACX,qBAA8BA,IAAI,IAAI,EAAtC;AAAA,YAAQC,IAAR,UAAQA,IAAR;AAAA,YAAiB4G,QAAjB;;AACA;AAEI5G,UAAAA,IAAI,EAAE,CAACA,IAAD,GAAQ;AAAE5C,YAAAA,CAAC,EAAE,EAAL;AAASC,YAAAA,CAAC,EAAE,EAAZ;AAAgBC,YAAAA,CAAC,EAAE;AAAnB,WAAR,GAAkC;AAAEF,YAAAA,CAAC,EAAE4C,IAAI,CAAC5C,CAAL,IAAU,EAAf;AAAmBC,YAAAA,CAAC,EAAE2C,IAAI,CAAC3C,CAAL,IAAU,EAAhC;AAAoCC,YAAAA,CAAC,EAAE0C,IAAI,CAAC1C,CAAL,IAAU;AAAjD;AAF5C,WAGOsJ,QAHP,GAKE,KALF,EAME,CAAC5G,IAAD,GACI2K,aADJ,GAEI,kBAAqBC,UAArB,EAAoC;AAAA,cAA3BvE,QAA2B,UAAjCrG,IAAiC;AAClC,cAAM6K,OAAO,GAAG,EAAhB;AACAD,UAAAA,UAAU,CAAC/C,OAAX,CAAmB,UAACC,GAAD,EAAS;AAC1B,gBAAIzB,QAAQ,CAACyB,GAAD,CAAR,IAAiBzB,QAAQ,CAACyB,GAAD,CAAR,CAAc3N,MAAd,GAAuB,CAA5C,EAA+C;AAC7C0Q,cAAAA,OAAO,CAAC/C,GAAD,CAAP,GAAelO,EAAE,CAACkR,MAAH,kCAAczE,QAAQ,CAACyB,GAAD,CAAtB,EAAf;AACD;AACF,WAJD;AAKA,iBAAO+C,OAAP;AACD,SAhBP,EAHmC,CAqBnC;;AACA,aAAKvE,WAAL;;AACA,YAAI4D,MAAJ,EAAY;AACV,eAAKA,MAAL;AACD;;AACD,eAAO,IAAP;AACD;AA/T8C;AAAA;AAAA,aAiU/C,mBAAU9E,MAAV,EAAkB8E,MAAlB,EAA0B;AACxB,YAAI,CAAC9E,MAAL,EAAa,OAAO,IAAP;AACb,YAAQ9H,CAAR,GAAuB8H,MAAvB,CAAQ9H,CAAR;AAAA,YAAcuM,IAAd,0CAAuBzE,MAAvB;AACA,2GAAgByE,IAAhB;;AACA,YAAIvM,CAAC,IAAI,KAAKgF,KAAL,CAAWhF,CAApB,EAAuB;AACrB,eAAKgF,KAAL,CAAWhF,CAAX,CAAa8H,MAAb,GAAsB9H,CAAtB;AACA4H,UAAAA,WAAW,CAACkC,IAAZ,CAAiB,IAAjB;;AACA,cAAI8C,MAAJ,EAAY;AACV,iBAAKA,MAAL;AACD;AACF;;AACD,eAAO,IAAP;AACD;AA7U8C;AAAA;AAAA,aA+U/C,kBAASlF,KAAT,EAAgBkF,MAAhB,EAAwB;AACtB,YAAI,CAAClF,KAAL,EAAY,OAAO,IAAP;AACZ,YAAQ1H,CAAR,GAAuB0H,KAAvB,CAAQ1H,CAAR;AAAA,YAAcuM,IAAd,0CAAuB7E,KAAvB;AACA,0GAAe6E,IAAf;;AACA,YAAIvM,CAAC,IAAI,KAAKgF,KAAL,CAAWhF,CAApB,EAAuB;AACrB,eAAKgF,KAAL,CAAWhF,CAAX,CAAa0H,KAAb,GAAqB1H,CAAC,CAAC0H,KAAvB;AACA,eAAK1C,KAAL,CAAWhF,CAAX,CAAagK,QAAb,GAAwBhK,CAAC,CAACgK,QAA1B;AACA,eAAKhF,KAAL,CAAWhF,CAAX,CAAa2H,IAAb,GAAoB3H,CAAC,CAAC2H,IAAtB;AACA,cAAMoC,QAAQ,aAAM,KAAK/E,KAAL,CAAWhF,CAAX,CAAa0H,KAAb,IAAsB,EAA5B,SAAiC,KAAK1C,KAAL,CAAWhF,CAAX,CAAagK,QAAb,gBAA8B,KAAKhF,KAAL,CAAWhF,CAAX,CAAagK,QAA3C,UAA0D,EAA3F,SACZ,KAAKhF,KAAL,CAAWhF,CAAX,CAAa2H,IAAb,gBAA0B,KAAK3C,KAAL,CAAWhF,CAAX,CAAa2H,IAAvC,UAAkD,EADtC,CAAd;AAGA,eAAKQ,cAAL,CACGC,MADH,CACU,YADV,EAEGA,MAFH,CAEU,MAFV,EAGGZ,IAHH,CAGQ,IAHR,EAGe,CAAC,KAAKxC,KAAL,CAAWjF,CAAX,GAAe,CAAf,GAAmB,CAAC,CAArB,IAA0BoG,IAAI,CAACkE,cAAL,CAAoBN,QAApB,EAA8B,KAAKG,QAAnC,CAA3B,GAA2E,CAHzF,EAIGtB,IAJH,CAIQmB,QAJR;;AAKA,cAAI6C,MAAJ,EAAY;AACV,iBAAKA,MAAL;AACD;AACF;;AACD,eAAO,IAAP;AACD;AApW8C;AAAA;AAAA,aAsW/C,yBAAgB;AACd,YAAM/B,OAAO,GAAG,KAAK1C,cAAL,CAAoBC,MAApB,CAA2B,QAA3B,EAAqCvD,IAArC,EAAhB;AACA,YAAM4I,MAAM,GAAG,KAAKtF,cAAL,CAAoBC,MAApB,CAA2B,UAA3B,CAAf;AACA,YAAMqB,IAAI,GAAGlM,MAAM,CAACmQ,QAAP,CAAgBD,MAAM,CAACxI,KAAP,CAAa,MAAb,CAAhB,CAAb;AACA,YAAM0I,GAAG,GAAGpQ,MAAM,CAACmQ,QAAP,CAAgBD,MAAM,CAACxI,KAAP,CAAa,KAAb,CAAhB,CAAZ;AACA,+GAAoB,CAAC,KAAKD,KAAL,CAAWhF,CAAX,IAAgB,EAAjB,EAAqB0H,KAAzC,EAAgD;AAC9CkG,UAAAA,KAAK,EAAE/C,OADuC;AAE9C/K,UAAAA,CAAC,EAAE2J,IAF2C;AAG9C1J,UAAAA,CAAC,EAAE4N;AAH2C,SAAhD;AAKD;AAhX8C;AAAA;AAAA,aAkX/C,mBAAU;AACR,YAAI,KAAK7B,gBAAT,EAA2B;AACzB,eAAKA,gBAAL,CAAsB+B,MAAtB;AACA,eAAK/B,gBAAL,GAAwB,IAAxB;AACD;;AACD,YAAI,KAAKvJ,OAAT,EAAkB,KAAKA,OAAL,GAAe,IAAf,CALV,CAMR;;AACA,YAAI,KAAK6B,WAAT,EAAsB,KAAKA,WAAL,GAAmB,EAAnB;AACtB;AACA,eAAO,IAAP;AACD;AA5X8C;AAAA;AAAA,IAC3B0J,mBAD2B;;AA8XjD,MAAI3E,SAAS,KAAK,WAAlB,EAA+B;AAC7B4E,mBAAMC,OAAN,CAAc5E,OAAd,EAAuB6E,kBAAvB;AACD;;AACD,SAAO7E,OAAP;AACD","sourcesContent":["/*\n * @Author: Huangjs\n * @Date: 2021-12-07 15:02:48\n * @LastEditors: Huangjs\n * @LastEditTime: 2022-03-17 17:29:12\n * @Description: 按需生成HeatMap构造器\n */\n\nimport * as d3 from 'd3';\nimport BaseChart from '../BaseChart';\nimport LineGraph from '../LineGraph';\nimport * as util from '../util';\nimport mixin from '../util/mixin';\n\nconst iconSize = 18;\n\nconst prefixSIFormat = d3.format('~s');\n\nconst searchValIndex = (val, arr) => {\n  let n1 = 0;\n  let n2 = arr.length;\n  let c = 0;\n  const binSize = n2 > 1 ? (arr[n2 - 1] - arr[0]) / (n2 - 1) : 1;\n  let n;\n  let test;\n  if (binSize >= 0) {\n    test = (a, b) => a <= b;\n  } else {\n    test = (a, b) => a > b;\n  }\n  // don't trust floating point equality - fraction of bin size to call\n  const v = val + binSize * 1e-9 * (binSize >= 0 ? 1 : -1);\n  // c is just to avoid infinite loops if there's an error\n  while (n1 < n2 && c < 100) {\n    c += 1;\n    n = Math.floor((n1 + n2) / 2);\n    if (test(arr[n], v)) n1 = n + 1;\n    else n2 = n;\n  }\n  if (c > 90) window.console.log('Long binary search...');\n  return Math.min(Math.max(n1 - 1, 0), arr.length - 1);\n};\n// 计算两值之间任意值占比以及前后值\nconst computeFactor = (val, val0, val1, bin0, bin1) => {\n  const factor = (val - val0) / (val1 - val0) || 0;\n  if (factor <= 0) {\n    return {\n      factor: 0,\n      bin0,\n      bin1: bin0,\n    };\n  }\n  if (factor > 0.5) {\n    return {\n      factor: 1 - factor,\n      bin0: bin1,\n      bin1: bin0,\n    };\n  }\n  return {\n    factor,\n    bin0,\n    bin1,\n  };\n};\n// 计算每个像素对应值的插值计算比例\nconst getInterpFactor = (pixel, valPixs) => {\n  const index0 = searchValIndex(pixel, valPixs);\n  const index1 = index0 + 1;\n  return computeFactor(pixel, valPixs[index0], valPixs[index1], index0, index1);\n};\n// 根据四个点计算中间点的平均值\nconst matrixAverage = (xFactor, val00, val01, yFactor, val10, val11) => {\n  let val = 0;\n  if (val00 !== undefined) {\n    const dx = val01 - val00 || 0;\n    const dy = val10 - val00 || 0;\n    let dxy = 0;\n    if (val01 === undefined) {\n      if (val11 === undefined) dxy = 0;\n      else if (val10 === undefined) dxy = 2 * (val11 - val00);\n      else dxy = ((2 * val11 - val10 - val00) * 2) / 3;\n    } else if (val11 === undefined) {\n      if (val10 === undefined) dxy = 0;\n      else dxy = ((2 * val00 - val01 - val10) * 2) / 3;\n    } else if (val10 === undefined) dxy = ((2 * val11 - val01 - val00) * 2) / 3;\n    else dxy = val11 + val00 - val01 - val10;\n    val = val00 + (xFactor || 0) * dx + (yFactor || 0) * (dy + (xFactor || 0) * dxy);\n  }\n  return val;\n};\n// 将给定值数组中的值映射到给定长度的每一个像素点上\n// 若值数组长度比像素点多，则会均匀抽稀映射\n// 若值数组长度比像素点少，则会平滑插值映射\nconst valueForPixel = (value, pixel, reverse) => {\n  const valPixs = [];\n  const len = value.length;\n  const minVal = value[0];\n  const maxVal = value[len - 1];\n  for (let i = 0; i < len; i += 1) {\n    valPixs[reverse ? len - 1 - i : i] = Math.round(\n      Math.round(100 * pixel * ((value[i] - minVal) / (maxVal - minVal))) / 100\n    );\n  }\n  return valPixs;\n};\n// 矩阵插值上色（根据矩形四个点值，计算矩形内部所有像素点的值，并渲染颜色）\nconst matrixInterp = ({ w, h, d }, { x, y, z }, c) => {\n  const [[x0, y0], [x1, y1]] = d;\n  const cw = x1 - x0;\n  const ch = y1 - y0;\n  const xValPixs = valueForPixel(x, w);\n  const yValPixs = valueForPixel(y, h, true);\n  let pixels;\n  let index = 0;\n  try {\n    pixels = new Uint8Array(cw * ch * 4);\n  } catch (e) {\n    pixels = new Array(cw * ch * 4);\n  }\n  const xInterpArray = [];\n  for (let j = y0; j < y1; j += 1) {\n    const yInterp = getInterpFactor(j, yValPixs);\n    const val0 = z[yInterp.bin0] || [];\n    const val1 = z[yInterp.bin1] || [];\n    // 获取y轴(横向)范围内无效索引集合\n    const yInvalidIndex = y.invalid || [];\n    // 判断当前横向一整条像素的上bin0下bin1都是无效索引，则无效\n    const yInvalid = yInvalidIndex.findIndex((o) => o === yInterp.bin0 || o === yInterp.bin1) !== -1;\n    for (let i = x0; i < x1; i += 1) {\n      let rgba = { r: 0, g: 0, b: 0, opacity: 0 };\n      // 有效才计算颜色\n      if (!yInvalid) {\n        let xInterp = xInterpArray[i];\n        if (!xInterp) {\n          xInterp = getInterpFactor(i, xValPixs);\n          xInterpArray[i] = xInterp;\n        }\n        // 获取x轴(竖向)范围内无效索引集合\n        const xInvalidIndex = x.invalid || [];\n        // 判断当前像素点的左bin0右bin1都是无效索引，则无效\n        const xInvalid = xInvalidIndex.findIndex((o) => o === xInterp.bin0 || o === xInterp.bin1) !== -1;\n        // 有效才计算颜色\n        if (!xInvalid) {\n          rgba = c(\n            matrixAverage(\n              xInterp.factor,\n              val0[xInterp.bin0],\n              val0[xInterp.bin1],\n              yInterp.factor,\n              val1[xInterp.bin0],\n              val1[xInterp.bin1]\n            )\n          );\n        }\n      }\n      pixels[index] = rgba.r;\n      pixels[index + 1] = rgba.g;\n      pixels[index + 2] = rgba.b;\n      pixels[index + 3] = rgba.opacity * 255; // 透明度0-1需要转换成0-255\n      index += 4;\n    }\n  }\n  return pixels;\n};\n\nfunction drawend(zContext, { xScale, yScale }) {\n  zContext.save();\n  // 先清空画布\n  zContext.clearRect(0, 0, this.width$, this.height$);\n  if (this.showHeat$) {\n    const zScale = this.zScale$;\n    let viewRange = null;\n    const { x, y, z } = this.data.heat;\n    // 原始范围\n    // 根据xy轴的刻度变换函数分别计算出原始数据图的上下左右坐标位置\n    const xMinPx = xScale(x[0] || 0);\n    const xMaxPx = xScale(x[x.length - 1] || 0);\n    // 因为y坐标是反转的（domain和range大小反转对应）\n    const yMinPx = yScale(y[y.length - 1] || 0);\n    const yMaxPx = yScale(y[0] || 0);\n    // 原始数据的实际宽高\n    const width = Math.round(xMaxPx - xMinPx);\n    const height = Math.round(yMaxPx - yMinPx);\n    // 如果实际的宽高小于或等于0则表示压根没有数据\n    if (width > 0 && height > 0) {\n      // 画布范围\n      // 画布上下左右坐标位置，this.width$, this.height$是画布的宽高\n      const xcMinPx = 0;\n      const xcMaxPx = this.width$ + xcMinPx;\n      const ycMinPx = 0;\n      const ycMaxPx = this.height$ + ycMinPx;\n      // 真实渲染的数据，是原始数据的范围，配置中筛选的范围以及画布的范围最终确定\n      // 根据以上三个范围计算确定真正需要渲染的范围，要考虑此范围的两个问题：\n      // 1，对于原始数据段转换的像素范围，应该选择哪一段像素去渲染？\n      // 2，对于视图，这一段数据应该渲染在画布上哪一个范围（在画布内部的位置）？\n      // 以下计算需要渲染的像素段在原始数据像素范围内（宽和高）起点和终点的索引\n      const xMin = Math.max(xcMinPx, xMinPx); // 取x最小范围中的最大值\n      const xMax = Math.min(xcMaxPx, xMaxPx); // 取x最大范围中的最小值\n      const yMin = Math.max(ycMinPx, yMinPx); // 取y最小范围中的最大值\n      const yMax = Math.min(ycMaxPx, yMaxPx); // 取y最大范围中的最小值\n      // 实际被裁减后的宽高（可能等于画布宽高，也可能小于，但是不会大于因为被裁掉了）\n      const dataRange = [\n        [Math.round(xMin - xMinPx), Math.round(yMin - yMinPx)], // 筛选后数据在原数据的起点index\n        [Math.round(xMax - xMinPx), Math.round(yMax - yMinPx)], // 筛选后数据在原数据的终点index\n      ];\n      const cWidth = dataRange[1][0] - dataRange[0][0];\n      const cHeight = dataRange[1][1] - dataRange[0][1];\n      // 如果裁剪后的宽高小于或等于0则表示没有可以渲染的数据了\n      if (cWidth > 0 && cHeight > 0) {\n        // 计算出渲染图片的每个像素rgba值\n        const pixelData = matrixInterp(\n          {\n            w: width,\n            h: height,\n            d: dataRange,\n          },\n          { x, y, z },\n          (v) => {\n            // 老版本d3得到的rgba是字符串，新版本d3是对象，这里做个兼容\n            const rgba = zScale(v);\n            return typeof rgba === 'string' ? d3.color(rgba) : rgba;\n          }\n        );\n        // 创建一个空的图片数据（使用裁剪后的宽高）\n        const imageData = zContext.createImageData(cWidth, cHeight);\n        // 将像素数据设置到图片数据内\n        try {\n          imageData.data.set(pixelData);\n        } catch (e) {\n          const cdata = imageData.data;\n          const len = cdata.length;\n          for (let i = 0; i < len; i += 1) {\n            cdata[i] = pixelData[i];\n          }\n        }\n        // 以下计在算在画布上需要渲染的范围起点和终点的位置（相对于画布）\n        viewRange = [\n          [xMin - xcMinPx, yMin - ycMinPx],\n          [xMax - xcMinPx, yMax - ycMinPx],\n        ];\n        // 将计算好的数据放到画布\n        zContext.putImageData(imageData, Math.round(viewRange[0][0]), Math.round(viewRange[0][1]));\n        const { canvas } = this.tempCanvas$;\n        if (canvas) {\n          // 存储渲染后的裁剪数据和图片数据\n          canvas.width = cWidth;\n          canvas.height = cHeight;\n          canvas.getContext('2d').putImageData(imageData, 0, 0);\n        }\n      }\n    }\n    this.tempCanvas$.range = !viewRange\n      ? null\n      : viewRange.map((r) => r.map((v, i) => (i === 0 ? xScale : yScale).invert(v)));\n  }\n  zContext.restore();\n}\n\nfunction drawing(zContext, { xScale, yScale }) {\n  if (this.showHeat$) {\n    const lineMarkX = this.lineMark$[0];\n    if (lineMarkX.node()) {\n      const xp = xScale(lineMarkX.datum()) || (!this.scale.x ? this.width$ : 0);\n      lineMarkX.style('left', `${xp}px`).style('display', xp < 0 || xp >= this.width$ ? 'none' : 'block');\n    }\n    const lineMarkY = this.lineMark$[1];\n    if (lineMarkY.node()) {\n      const yp = yScale(lineMarkY.datum()) || (!this.scale.y ? 0 : this.height$);\n      lineMarkY.style('top', `${yp}px`).style('display', yp < 0 || yp >= this.height$ ? 'none' : 'block');\n    }\n    const { canvas, range } = this.tempCanvas$;\n    if (range) {\n      // 将上一次变换后的图，经过本次变换的变形重新绘制到画布上\n      const [[x0, y0], [x1, y1]] = range.map((r) => r.map((v, i) => (i === 0 ? xScale : yScale)(v)));\n      zContext.save();\n      zContext.clearRect(0, 0, this.width$, this.height$);\n      zContext.drawImage(canvas, x0, y0, x1 - x0, y1 - y0);\n      zContext.restore();\n    }\n  }\n}\n\nfunction tipCompute(prevRes, point, scaleAxis) {\n  const data = this.data.heat;\n  const scaleOpt = this.scale;\n  const { cross, average } = this.tooptip;\n  let [x0, y0] = point;\n  const xyzValue = [];\n  if (this.showHeat$ && cross === 'xy') {\n    const xScale = (scaleAxis.x || scaleAxis.x2).scale;\n    const yScale = (scaleAxis.y || scaleAxis.y2).scale;\n    let xval = xScale.invert(x0);\n    let yval = yScale.invert(y0);\n    let zval = 0;\n    // @ts-ignore\n    const [xi0, xi1] = util.findNearIndex(+xval, data.x);\n    const [yi0, yi1] = util.findNearIndex(+yval, data.y);\n    if (xi0 >= 0 && xi1 >= 0 && yi0 >= 0 && yi1 >= 0) {\n      const xval0 = +data.x[xi0];\n      const xval1 = +data.x[xi1];\n      const yval0 = +data.y[yi0];\n      const yval1 = +data.y[yi1];\n      if (xval0 === xval1 && yval0 === yval1) {\n        // 正好移动到了xy交叉数据点上\n        zval = (data.z[yi0] || [])[xi0];\n      } else if (average) {\n        const xInterp = computeFactor(+xval, xval0, xval1, xi0, xi1);\n        const yInterp = computeFactor(+yval, yval0, yval1, yi0, yi1);\n        const val00 = (data.z[yInterp.bin0] || [])[xInterp.bin0];\n        const val01 = (data.z[yInterp.bin0] || [])[xInterp.bin1];\n        const val10 = (data.z[yInterp.bin1] || [])[xInterp.bin0];\n        const val11 = (data.z[yInterp.bin1] || [])[xInterp.bin1];\n        zval = matrixAverage(xInterp.factor, val00, val01, yInterp.factor, val10, val11);\n      } else {\n        const xi = Math.abs(xval - xval0) > Math.abs(xval - xval1) ? xi1 : xi0;\n        const yi = Math.abs(yval - yval0) > Math.abs(yval - yval1) ? yi1 : yi0;\n        xval = +data.x[xi];\n        yval = +data.y[yi];\n        zval = (data.z[yi] || [])[xi];\n        x0 = xScale(xval);\n        y0 = yScale(yval);\n      }\n      xyzValue.push(\n        {\n          ...scaleOpt[scaleAxis.x ? 'x' : 'x2'],\n          value: xval,\n        },\n        {\n          ...scaleOpt[scaleAxis.y ? 'y' : 'y2'],\n          value: yval,\n        },\n        {\n          ...scaleOpt.z,\n          value: zval,\n        }\n      );\n    }\n  }\n  if (xyzValue.length > 0) {\n    // 去掉第一个因为第一个是标题\n    const prevValue = (prevRes.data || []).slice(1);\n    const ndata = [...xyzValue, ...prevValue];\n    const result = (selection) => {\n      selection\n        .selectAll('div')\n        .data(ndata)\n        .join('div')\n        .attr('style', 'white-space: nowrap;')\n        .html((d, i) =>\n          i === 0\n            ? `${d.label}：${d.format(d.value)}${d.unit}`\n            : `${\n                !d.color\n                  ? ''\n                  : `<span style=\"background: ${d.color}; width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 8px;\"></span>`\n              }<span>${d.label}</span>: <span style=\"display: inline-block; ${\n                !d.color ? '' : 'margin-left: 30px;'\n              }\">${d.format(d.value)}${d.unit}</span>`\n        );\n    };\n    return { x0, y0, data: ndata, result };\n  }\n  return { ...prevRes };\n}\n\nfunction updateScale() {\n  if (this.scale.z) {\n    const zFormat = this.scale.z.format;\n    let [opacity, range, domain] = this.scale.z.domain || [];\n    opacity = opacity || 1;\n    range = range || ['#000', '#fff'];\n    domain = domain || [0, 1];\n    this.zScale$\n      .range(range.map((c) => d3.color(c).copy({ opacity })))\n      .domain(domain)\n      .clamp(true); // 设置true可以卡住所给不在domain中的参数生成的数据仍然在range范围内\n    if (this.colorBar) {\n      const linearGradient = this.rootSelection$.select('linearGradient');\n      const heatColorBar = this.rootSelection$.select('.heatColorBar');\n      const height = this.height$;\n      const startDomain = domain[0];\n      const deltDomain = domain[domain.length - 1] - startDomain;\n      const width = this.colorBar.width;\n      linearGradient\n        .selectAll('stop')\n        .data(domain)\n        .join('stop')\n        .attr('offset', (v) => `${(100 * (v - startDomain)) / deltDomain}%`)\n        .attr('stop-color', (_, i) => range[i]);\n      heatColorBar\n        .selectAll('g')\n        .data(domain)\n        .join(\n          (enter) => {\n            const tick = enter\n              .append('g')\n              .attr('class', 'tick')\n              .attr('transform', (v) => `translate(${width},${height * (1 - (v - startDomain) / deltDomain)})`);\n            tick.append('path').attr('d', 'M0,0 L4,4 L4,-4 Z');\n            tick\n              .append('text')\n              .attr('x', 8)\n              .attr('dy', '0.32em')\n              .attr('text-anchor', 'start')\n              .text((v) => zFormat(v));\n            return tick;\n          },\n          (update) => {\n            update.attr('transform', (v) => `translate(${width},${height * (1 - (v - startDomain) / deltDomain)})`);\n            update.select('text').text((v) => zFormat(v));\n            return update;\n          }\n        );\n    }\n  }\n}\n\nfunction doubleClick(point, { xScale, yScale }) {\n  let result = {};\n  if (this.showHeat$) {\n    const heatData = this.data.heat;\n    let [x0, y0] = point;\n    // @ts-ignore\n    let [xval, yval] = [];\n    const lineMarkX = this.lineMark$[0];\n    if (lineMarkX.node()) {\n      // @ts-ignore\n      xval = Math.max(Math.min(+xScale.invert(x0), heatData.x[heatData.x.length - 1]), heatData.x[0]);\n      x0 = xScale(xval);\n      lineMarkX.style('left', `${x0}px`).style('display', 'block');\n    }\n    const lineMarkY = this.lineMark$[1];\n    if (lineMarkY.node()) {\n      // @ts-ignore\n      yval = Math.max(Math.min(+yScale.invert(y0), heatData.y[heatData.y.length - 1]), heatData.y[0]);\n      y0 = yScale(yval);\n      lineMarkY.style('top', `${y0}px`).style('display', 'block');\n    }\n    this.setLineMark([xval, yval], (res) => {\n      result = res;\n    });\n  }\n  return result;\n}\n\nexport default function generateHeatMap(superName) {\n  class HeatMap extends BaseChart {\n    constructor(...params) {\n      const { data, tooptip, colorBar, scale, ...restOptions } = params[0] || {};\n      const { heat, ...restData } = data || {};\n      let rWidth = restOptions.rWidth;\n      if (colorBar) {\n        colorBar.show = !!colorBar.show;\n        colorBar.left = util.isNumber(colorBar.left) ? colorBar.left : 0;\n        colorBar.width = util.isNumber(colorBar.width) ? colorBar.width : 0;\n        colorBar.right = util.isNumber(colorBar.right) ? colorBar.right : 0;\n        if (colorBar.show) {\n          rWidth = (util.isNumber(rWidth) ? rWidth : 0) + colorBar.left + colorBar.width + colorBar.right;\n        }\n      }\n      super({\n        ...restOptions,\n        rWidth,\n        data: {\n          heat: !heat ? { x: [], y: [], z: [] } : { x: heat.x || [], y: heat.y || [], z: heat.z || [] },\n          ...restData,\n        },\n        tooptip: !tooptip\n          ? false\n          : {\n              cross: 'xy',\n              select: '',\n              average: true,\n              ...tooptip,\n              compute: (res, ...args) => {\n                let result = tipCompute.call(this, res, ...args);\n                if (typeof tooptip.compute === 'function') {\n                  result = tooptip.compute.call(this, result, ...args);\n                }\n                return result;\n              },\n            },\n        scale: {\n          /* z: {\n            type: 'linear', // 坐标类型\n            ticks: 5, // 坐标刻度数目\n            format: (v) => v, // 坐标值格式化函数\n            domain: [0, ['#fff', '#fff'], [0, 0]], // 值的色域范围和透明度\n            label: '', // 坐标名称\n            unit: '', // 坐标值单位\n          }, */\n          z: { format: prefixSIFormat },\n          ...scale,\n        },\n      });\n      this.colorBar = colorBar;\n      this.showHeat$ = true;\n      const tempText = `${this.scale.z.label || ''}${this.scale.z.subLabel ? ` ( ${this.scale.z.subLabel} )` : ''}${\n        this.scale.z.unit ? ` ( ${this.scale.z.unit} )` : ''\n      }`;\n      // @ts-ignore\n      const baselineDelt = this.fontSize + 2;\n      const heatLabel = this.rootSelection$\n        .select('g.group')\n        .append('g')\n        .attr('class', 'heatLabel')\n        .attr('fill', 'currentColor')\n        .attr(\n          'transform',\n          // @ts-ignore\n          `translate(${this.scale.y ? 10 : this.width$ - 10},${\n            // @ts-ignore\n            this.scale.x ? baselineDelt - this.padding[0] : this.height$ + this.padding[2] - iconSize + baselineDelt\n          })`\n        );\n      heatLabel\n        .append('text')\n        .attr('dx', ((this.scale.y ? 1 : -1) * util.measureSvgText(tempText, this.fontSize)) / 2)\n        .text(tempText);\n      if (this.tooptip) {\n        const { select } = this.tooptip;\n        select.split('').forEach((key) => {\n          if (key) {\n            // @ts-ignore\n            this.zoomSelection$\n              .append('div')\n              .attr('class', `${key}-linemark`)\n              .style('background', '#fa9305')\n              .style('display', 'none')\n              .style('position', 'absolute')\n              // @ts-ignore\n              .style('top', !this.scale.y ? 0 : this.height$ - 1)\n              // @ts-ignore\n              .style('left', !this.scale.x ? this.width$ - 1 : 0)\n              .style('width', key === 'x' ? '1px' : '100%')\n              .style('height', key === 'x' ? '100%' : '1px');\n          }\n        });\n      }\n      // @ts-ignore\n      const lineMark = [this.zoomSelection$.select('.x-linemark'), this.zoomSelection$.select('.y-linemark')];\n      this.lineMark$ = lineMark;\n      const zCanvasParent = this.rootSelection$\n        .insert('div', 'svg')\n        .style('position', 'absolute')\n        // @ts-ignore\n        .style('width', `${this.width$}px`)\n        // @ts-ignore\n        .style('height', `${this.height$}px`)\n        // @ts-ignore\n        .style('top', `${this.padding[0]}px`)\n        // @ts-ignore\n        .style('left', `${this.padding[3]}px`);\n      const zCanvas = zCanvasParent\n        .append('canvas')\n        .style('width', '100%')\n        .style('height', '100%')\n        // @ts-ignore\n        .attr('width', this.width$)\n        // @ts-ignore\n        .attr('height', this.height$);\n      if (colorBar) {\n        const gradientId = util.guid('gradient');\n        this.rootSelection$\n          .select('svg')\n          .select('defs')\n          .append('linearGradient')\n          .attr('id', gradientId)\n          .attr('x1', '0%')\n          .attr('y1', '100%')\n          .attr('x2', '0%')\n          .attr('y2', '0%');\n        this.rootSelection$\n          .select('svg')\n          .select('.group')\n          .append('g')\n          .attr('class', 'heatColorBar')\n          .style('display', colorBar.show ? 'block' : 'none')\n          .attr('fill', 'currentColor')\n          // @ts-ignore\n          .attr('transform', `translate(${this.width$ + this.padding[1] + colorBar.left},0)`)\n          .append('rect')\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('width', colorBar.width)\n          // @ts-ignore\n          .attr('height', this.height$)\n          .attr('fill', `url(#${gradientId})`);\n      }\n      const zContext = zCanvas.node().getContext('2d');\n      this.zScale$ = d3.scaleLinear();\n      updateScale.call(this);\n      this.tempCanvas$ = {\n        canvas: document.createElement('canvas'),\n        range: null,\n      };\n      const dblclick$$ = this.dblclick$;\n      this.dblclick$ = (e, ...args) => {\n        dblclick$$.call(null, e, ...args);\n        const { x, x2, y, y2 } = e.scaleAxis;\n        const xScale = (x || x2).scale;\n        const yScale = (y || y2).scale;\n        return doubleClick.call(this, e.sourceEvent ? d3.pointer(e.sourceEvent) : [0, 0], { xScale, yScale });\n      };\n      const contextmenu$$ = this.contextmenu$;\n      this.contextmenu$ = (e, ...args) => {\n        contextmenu$$.call(null, e, ...args);\n        lineMark.forEach((lm) => lm.node() && lm.style('display', 'none'));\n      };\n      const zooming$$ = this.zooming$;\n      this.zooming$ = (e, ...args) => {\n        zooming$$.call(null, e, ...args);\n        const { x, x2, y, y2 } = e.scaleAxis;\n        const xScale = (x || x2).scale;\n        const yScale = (y || y2).scale;\n        drawing.call(this, zContext, { xScale, yScale });\n      };\n      const zoomend$$ = this.zoomend$;\n      this.debounceDrawend$ = util.debounce(drawend, 450, { leading: false, trailing: true });\n      this.zoomend$ = (e, ...args) => {\n        zoomend$$.call(null, e, ...args);\n        const { x, x2, y, y2 } = e.scaleAxis;\n        const xScale = (x || x2).scale;\n        const yScale = (y || y2).scale;\n        this.debounceDrawend$.call(this, zContext, { xScale, yScale });\n        if (!e.sourceEvent || e.sourceEvent.type === 'call') {\n          util.delay(() => {\n            this.debounceDrawend$.flush();\n          }, 1);\n        }\n      };\n      const resize$$ = this.resize$;\n      this.resize$ = (e, { width, height, padding, ...rest }, ...args) => {\n        resize$$.call(null, e, { width, height, padding, ...rest }, ...args);\n        zCanvasParent\n          .style('width', `${width}px`)\n          .style('height', `${height}px`)\n          .style('top', `${padding[0]}px`)\n          .style('left', `${padding[3]}px`);\n        zCanvas.attr('width', width).attr('height', height);\n        heatLabel.attr(\n          'transform',\n          `translate(${this.scale.y ? 10 : width - 10},${\n            this.scale.x ? baselineDelt - padding[0] : height + padding[2] - iconSize + baselineDelt\n          })`\n        );\n        if (colorBar) {\n          const heatColorBar = this.rootSelection$.select('.heatColorBar');\n          heatColorBar.attr('transform', `translate(${width + padding[1] + colorBar.left},0)`);\n          heatColorBar.select('rect').attr('height', height);\n          const ticks = heatColorBar.selectAll('.tick');\n          const domain = ticks.data();\n          const startDomain = domain[0];\n          const deltDomain = domain[domain.length - 1] - startDomain;\n          ticks.attr(\n            'transform',\n            (v) => `translate(${colorBar.width},${height * (1 - (v - startDomain) / deltDomain)})`\n          );\n        }\n      };\n      heatLabel.on('click', () => {\n        if (this.destroyed) return;\n        this.showHeat$ = !this.showHeat$;\n        lineMark.forEach((lm) => lm.node() && lm.style('display', this.showHeat$ ? 'block' : 'none'));\n        heatLabel.attr('fill', !this.showHeat$ ? '#aaaa' : 'currentColor');\n        if (this.rendered) {\n          this.render();\n        }\n      });\n    }\n\n    getLineMark() {\n      const result = [];\n      const lineMarkX = this.lineMark$[0];\n      if (lineMarkX.node()) {\n        const xval = lineMarkX.datum();\n        result[0] = xval;\n      }\n      const lineMarkY = this.lineMark$[1];\n      if (lineMarkY.node()) {\n        const yval = lineMarkY.datum();\n        result[1] = yval;\n      }\n      return result;\n    }\n\n    setLineMark(lm, cb) {\n      const lineMark = lm || [];\n      const { average } = this.tooptip;\n      const heatData = this.data.heat;\n      let xSelect = null;\n      let ySelect = null;\n      // @ts-ignore\n      const lineMarkX = this.lineMark$[0];\n      if (lineMarkX.node()) {\n        const xval = !lineMark[0] && lineMark[0] !== 0 ? heatData.x[0] : lineMark[0];\n        lineMarkX.datum(xval);\n        let zval = [];\n        // xval在数据范围之内才可计算出zval\n        if (xval >= heatData.x[0] && xval <= heatData.x[heatData.x.length - 1]) {\n          let xi = util.findNearIndex(xval, heatData.x, !average);\n          // @ts-ignore\n          if (!average) xi = [xi, xi];\n          let xBin = 0;\n          if (xi[0] !== xi[1]) xBin = (xval - heatData.x[xi[0]]) / (heatData.x[xi[1]] - heatData.x[xi[0]]);\n          zval = heatData.z.map((v) => {\n            const vv = v || [];\n            return xBin * ((vv[xi[1]] || 0) - (vv[xi[0]] || 0)) + (vv[xi[0]] || 0);\n          });\n        }\n        xSelect = { x: xval, y: heatData.y, z: zval };\n      }\n      const lineMarkY = this.lineMark$[1];\n      if (lineMarkY.node()) {\n        const yval = !lineMark[1] && lineMark[1] !== 0 ? heatData.y[0] : lineMark[1];\n        lineMarkY.datum(yval);\n        let zval = [];\n        // yval在数据范围之内才可计算出zval\n        if (yval >= heatData.y[0] && yval <= heatData.y[heatData.y.length - 1]) {\n          let yi = util.findNearIndex(yval, heatData.y, !average);\n          // @ts-ignore\n          if (!average) yi = [yi, yi];\n          let yBin = 0;\n          if (yi[0] !== yi[1]) yBin = (yval - heatData.y[yi[0]]) / (heatData.y[yi[1]] - heatData.y[yi[0]]);\n          zval = (heatData.z[yi[0]] || []).map((v0, i) => {\n            const v1 = (heatData.z[yi[1]] || [])[i] || 0;\n            return yBin * (v1 - v0) + v0;\n          });\n        }\n        ySelect = { x: heatData.x, y: yval, z: zval };\n      }\n      if (typeof cb === 'function') {\n        cb({ xSelect, ySelect });\n      }\n      return this;\n    }\n\n    setData(data, render, computeDomain) {\n      if (!data) return this;\n      const { heat, ...restData } = data || {};\n      super.setData(\n        {\n          heat: !heat ? { x: [], y: [], z: [] } : { x: heat.x || [], y: heat.y || [], z: heat.z || [] },\n          ...restData,\n        },\n        false,\n        !heat\n          ? computeDomain\n          : ({ heat: heatData }, needDomain) => {\n              const domains = {};\n              needDomain.forEach((key) => {\n                if (heatData[key] && heatData[key].length > 0) {\n                  domains[key] = d3.extent([...heatData[key]]);\n                }\n              });\n              return domains;\n            }\n      );\n      // 将linemark归位到起点\n      this.setLineMark();\n      if (render) {\n        this.render();\n      }\n      return this;\n    }\n\n    setDomain(domain, render) {\n      if (!domain) return this;\n      const { z, ...rest } = domain;\n      super.setDomain(rest);\n      if (z && this.scale.z) {\n        this.scale.z.domain = z;\n        updateScale.call(this);\n        if (render) {\n          this.render();\n        }\n      }\n      return this;\n    }\n\n    setLabel(label, render) {\n      if (!label) return this;\n      const { z, ...rest } = label;\n      super.setLabel(rest);\n      if (z && this.scale.z) {\n        this.scale.z.label = z.label;\n        this.scale.z.subLabel = z.subLabel;\n        this.scale.z.unit = z.unit;\n        const tempText = `${this.scale.z.label || ''}${this.scale.z.subLabel ? ` ( ${this.scale.z.subLabel} )` : ''}${\n          this.scale.z.unit ? ` ( ${this.scale.z.unit} )` : ''\n        }`;\n        this.rootSelection$\n          .select('.heatLabel')\n          .select('text')\n          .attr('dx', ((this.scale.y ? 1 : -1) * util.measureSvgText(tempText, this.fontSize)) / 2)\n          .text(tempText);\n        if (render) {\n          this.render();\n        }\n      }\n      return this;\n    }\n\n    downloadImage() {\n      const zCanvas = this.rootSelection$.select('canvas').node();\n      const svgDiv = this.rootSelection$.select('.actions');\n      const left = window.parseInt(svgDiv.style('left'));\n      const top = window.parseInt(svgDiv.style('top'));\n      super.downloadImage((this.scale.z || {}).label, {\n        image: zCanvas,\n        x: left,\n        y: top,\n      });\n    }\n\n    destroy() {\n      if (this.debounceDrawend$) {\n        this.debounceDrawend$.cancel();\n        this.debounceDrawend$ = null;\n      }\n      if (this.zScale$) this.zScale$ = null;\n      // @ts-ignore\n      if (this.tempCanvas$) this.tempCanvas$ = {};\n      super.destroy();\n      return this;\n    }\n  }\n  if (superName === 'LineGraph') {\n    mixin.replace(HeatMap, LineGraph);\n  }\n  return HeatMap;\n}\n"],"file":"generate.js"}