{"version":3,"sources":["../src/BaseChart.js"],"names":["downloadPath","resetPath","lockPath","unlockPath","actionButtons","download","label","path","className","reset","xlock","ylock","axisType","scaleType","cat","d3","scaleBand","timeCat","time","scaleTime","linear","scaleLinear","log","scaleLog","sqrt","scaleSqrt","pow","scalePow","quantize","scaleQuantize","quantile","scaleQuantile","identity","scaleIdentity","timeFormat","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatMonth","formatYear","prefixSIFormat","format","exponentFormat","roundFormat","getDefaultFormat","type","date","ax","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeYear","v","computeSize","element","width","height","padding","w","h","style","getComputedStyle","util","isNumber","clientWidth","parseInt","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","top","right","bottom","left","pad","Array","isArray","pad0","pad1","pad2","pad3","length","Math","max","scaleLable","labelSel","scale","domain","unit","min","select","selectAll","data","join","attr","_","i","text","getScaleAxis","zoomSelection$","datum","xTransform","yTransform","scaleAxis","forEach","key","rescale$","axis","updateScale","axisScale$","dataDomains$","minDomain","maxDomain","range","width$","height$","nice","niceDomain","createScale","axisScale","ticks","tickSize","axisTop","axisLeft","axisRight","axisBottom","defaultFormat","tickFormat","val","call","transform","as","recale","rescaleX","rescaleY","updateZoom","viewExtent","scaleExtent","translateExtent","zoom","xzoom","x","yzoom","y","map","xdomain","ydomain","xMinDomain","xMaxDomain","yMinDomain","yMaxDomain","xDomainEx","yDomainEx","translate","Infinity","xMinTranslate","xMaxTranslate","yMinTranslate","yMaxTranslate","precision","xMinPrecision","xMaxPrecision","yMinPrecision","yMaxPrecision","xRate","yRate","zoomer$","extent","zoomExtent$","createZoom","transform$","tf","deltK","point","point0","tk","k","tx","ty","zoomIdentity","dx0","invertX","dx1","dy0","invertY","dy1","updateElement","size","rootSelection$","node","zw","zh","group","selectChild","x2","y2","svgDiv","offset","createElement","container","svgXmlns","rootSelection","document","append","svgSelection","fontSize","pathClipId","groupSelection","guid","divSelection","zoomSelection","actions","push","action","tooptip","cross","split","resize","debounce","e","destroyed","rendered","resize$","sourceEvent","target","zoomTransform","leading","trailing","window","addEventListener","unBindResize$","removeEventListener","bindEvents","pointX0","pointY0","transform0","on","xCanZoom$","yCanZoom$","pointer","invert","zoomstart$","isCanEmit","changed","p","px0","py0","notZoom","zoomX","zoomY","Object","keys","zooming$","zoomend$","mouseover$","zNode","toElement","parentNode","indexOf","mouseout$","compute","crossX","crossY","x0","y0","x00","y00","result","display","noop","click$","contextmenu$","preventDefault","dblclick$","doubleZoom","reset$","downloadImage","BaseChart","ext","args","mousemove$","noTransition","render","transition","duration","ease","easeLinear","handler","oldHandler","computeDomain","needCompute","filter","isScale","isZoom","remove","createEvent","event","initEvent","dispatchEvent","createEventObject","fireEvent","name","content","svgSel","tempCanvas","tempCxt","getContext","clearRect","drawImage","image","tempImage","Image","src","btoa","unescape","encodeURIComponent","XMLSerializer","serializeToString","onload","a","href","toDataURL","click"],"mappings":"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","sourcesContent":["/*\n * @Author: Huangjs\n * @Date: 2021-03-17 16:23:00\n * @LastEditors: Huangjs\n * @LastEditTime: 2021-11-15 14:09:05\n * @Description: ******\n */\n\nimport * as d3 from 'd3';\nimport * as util from './util';\n\nconst downloadPath =\n  'M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z';\nconst resetPath =\n  'M483.031 380.989v-61.004l-162.969 92.891 162.969 99.24v-64.04c128.025 0.122 157.093 64.052 157.093 94.107 0 33.863-29.068 97.771-157.093 97.771l-98.957 0.011v63.919l98.957-0.011c157.093 0.011 221.105-63.907 221.105-159.017 0.001-96.647-64.012-163.856-221.105-163.867 M511.372 64.548c-247.628 0-448.369 200.319-448.369 447.426S263.744 959.4 511.372 959.4s448.369-200.32 448.369-447.426S758.999 64.548 511.372 64.548z m-0.203 823.564c-207.318 0-375.382-167.71-375.382-374.592s168.064-374.592 375.382-374.592 375.382 167.71 375.382 374.592-168.064 374.592-375.382 374.592z';\nconst lockPath =\n  'M508.3 66.3c-128 0-232.7 104.7-232.7 232.7v188.5h94.5V333.3c0-98.7 62-179.5 137.8-179.5 75.8 0 137.8 80.8 137.8 179.5v154.2H741V299c0-128-104.7-232.7-232.7-232.7zM792.3 485.5H223.6c-31.3 0-56.6 25.3-56.6 56.6v408.1c0 31.3 25.3 56.6 56.6 56.6h568.7c31.3 0 56.6-25.3 56.6-56.6V542.1c0-31.3-25.4-56.6-56.6-56.6zM537.8 758.4v98h-59.4v-98.2c-23.6-11.2-40-35.2-40-63.1 0-38.6 31.3-69.9 69.9-69.9 38.6 0 69.9 31.3 69.9 69.9-0.1 28.1-16.6 52.2-40.4 63.3z';\nconst unlockPath =\n  'M508.3 66.3c-128 0-232.7 104.7-232.7 232.7v188.5h94.5V333.3c0-98.7 62-179.5 137.8-179.5 75.8 0 137.8 80.8 137.8 179.5v0H741V299c0-128-104.7-232.7-232.7-232.7zM792.3 485.5H223.6c-31.3 0-56.6 25.3-56.6 56.6v408.1c0 31.3 25.3 56.6 56.6 56.6h568.7c31.3 0 56.6-25.3 56.6-56.6V542.1c0-31.3-25.4-56.6-56.6-56.6zM537.8 758.4v98h-59.4v-98.2c-23.6-11.2-40-35.2-40-63.1 0-38.6 31.3-69.9 69.9-69.9 38.6 0 69.9 31.3 69.9 69.9-0.1 28.1-16.6 52.2-40.4 63.3z';\nconst actionButtons = {\n  download: {\n    label: '下载视图',\n    path: downloadPath,\n    className: 'download',\n  },\n  reset: {\n    label: '重置视图',\n    path: resetPath,\n    className: 'reset',\n  },\n  xlock: {\n    label: 'X轴缩放开关',\n    path: unlockPath,\n    className: 'xlock',\n  },\n  ylock: {\n    label: 'Y轴缩放开关',\n    path: unlockPath,\n    className: 'ylock',\n  },\n};\nconst axisType = ['x', 'x2', 'y', 'y2'];\nconst scaleType = {\n  cat: () => d3.scaleBand(),\n  timeCat: () => d3.scaleBand(),\n  time: () => d3.scaleTime(),\n  linear: () => d3.scaleLinear(),\n  log: () => d3.scaleLog(),\n  sqrt: () => d3.scaleSqrt(),\n  pow: () => d3.scalePow(),\n  // sequential: () => d3.scaleSequential(),\n  quantize: () => d3.scaleQuantize(),\n  quantile: () => d3.scaleQuantile(),\n  identity: () => d3.scaleIdentity(),\n};\nconst timeFormat = d3.timeFormat('%Y-%m-%d %H:%M:%S');\nconst formatMillisecond = d3.timeFormat('.%L');\nconst formatSecond = d3.timeFormat(':%S');\nconst formatMinute = d3.timeFormat('%H:%M');\nconst formatHour = d3.timeFormat('%H:00');\nconst formatDay = d3.timeFormat('%m-%d');\nconst formatMonth = d3.timeFormat('%m月');\nconst formatYear = d3.timeFormat('%Y年');\nconst prefixSIFormat = d3.format('.4~s');\nconst exponentFormat = d3.format('.4~g');\nconst roundFormat = d3.format('.4~r');\nconst getDefaultFormat = (type) => {\n  if (type === 'time') {\n    return (date, ax) => {\n      if (!ax) {\n        return timeFormat(date);\n      }\n      if (d3.timeSecond(date) < date) {\n        return formatMillisecond(date);\n      }\n      if (d3.timeMinute(date) < date) {\n        return formatSecond(date);\n      }\n      if (d3.timeHour(date) < date) {\n        return formatMinute(date);\n      }\n      if (d3.timeDay(date) < date) {\n        return formatHour(date);\n      }\n      if (d3.timeMonth(date) < date) {\n        return formatDay(date);\n      }\n      if (d3.timeYear(date) < date) {\n        return formatMonth(date);\n      }\n      return formatYear(date);\n    };\n  }\n  if (type === 'log') {\n    return exponentFormat;\n  }\n  if (type === 'sqrt') {\n    return roundFormat;\n  }\n  if (type === 'linear' || type === 'pow') {\n    return prefixSIFormat;\n  }\n  return (v) => v;\n};\nconst computeSize = (element, { width, height, padding }) => {\n  let w = width;\n  let h = height;\n  const style = getComputedStyle(element);\n  if (!(util.isNumber(width) && width > 1)) {\n    w =\n      (element.clientWidth || parseInt(style.width, 10)) -\n      parseInt(style.paddingLeft, 10) -\n      parseInt(style.paddingRight, 10);\n  }\n  if (!(util.isNumber(height) && height > 1)) {\n    h =\n      (element.clientHeight || parseInt(style.height, 10)) -\n      parseInt(style.paddingTop, 10) -\n      parseInt(style.paddingBottom, 10);\n  }\n  let [top, right, bottom, left] = [];\n  const pad = Array.isArray(padding) ? padding : [];\n  let [pad0, pad1, pad2, pad3] = pad;\n  pad0 = !util.isNumber(pad0) || pad0 < 0 ? 0 : pad0;\n  pad1 = !util.isNumber(pad1) || pad1 < 0 ? 0 : pad1;\n  pad2 = !util.isNumber(pad2) || pad2 < 0 ? 0 : pad2;\n  pad3 = !util.isNumber(pad3) || pad3 < 0 ? 0 : pad3;\n  if (!pad.length) {\n    top = 0;\n    right = top;\n    bottom = top;\n    left = top;\n  } else if (pad.length === 1) {\n    top = pad0;\n    right = top;\n    bottom = top;\n    left = top;\n  } else if (pad.length === 2) {\n    top = pad0;\n    right = pad1;\n    bottom = top;\n    left = right;\n  } else if (pad.length === 3) {\n    top = pad0;\n    right = pad1;\n    bottom = pad2;\n    left = right;\n  } else {\n    top = pad0;\n    right = pad1;\n    bottom = pad2;\n    left = pad3;\n  }\n  return {\n    width: Math.max(util.isNumber(w) ? w : 1, 1),\n    height: Math.max(util.isNumber(h) ? h : 1, 1),\n    padding: [top, right, bottom, left],\n  };\n};\nconst scaleLable = (labelSel, [scale, domain]) => {\n  let { type, format, label, unit } = scale;\n  type = type || 'linear';\n  label = label || '';\n  unit = !label || !unit ? '' : ` ( ${unit} )`;\n  format = format || getDefaultFormat(type);\n  let [min, max] = domain;\n  min = min || 0;\n  max = max || 0;\n  labelSel\n    .select('text')\n    .selectAll('tspan')\n    .data([0, 1])\n    .join('tspan')\n    .attr('dx', (_, i) => {\n      if (!label) return 0;\n      return i === 0 ? -12 : 12;\n    })\n    .text((_, i) => (i === 0 ? `${label}${unit}` : `${format(min)} - ${format(max)}`));\n};\nfunction getScaleAxis() {\n  const [xTransform, yTransform] = this.zoomSelection$.datum();\n  const scaleAxis = {};\n  axisType.forEach((key) => {\n    if (this.scale[key]) {\n      const { scale, axis } = this.rescale$(key === 'x' || key === 'x2' ? xTransform : yTransform, key);\n      scaleAxis[key] = {\n        axis,\n        scale,\n      };\n    }\n  });\n  return scaleAxis;\n}\nfunction updateScale() {\n  axisType.forEach((key) => {\n    if (this.axisScale$[key]) {\n      const [minDomain, maxDomain] = this.scale[key].domain || this.dataDomains$[key] || [0, 1];\n      this.axisScale$[key].scale\n        .range(key === 'x' || key === 'x2' ? [0, this.width$] : [this.height$, 0])\n        .domain([minDomain || 0, maxDomain || 1]);\n      if (this.scale[key].nice) {\n        this.axisScale$[key].scale.nice();\n        const niceDomain = this.axisScale$[key].scale.domain();\n        if (this.scale[key].domain) {\n          this.scale[key].domain = niceDomain;\n        }\n        if (this.dataDomains$[key]) {\n          this.dataDomains$[key] = niceDomain;\n        }\n      }\n    }\n  });\n}\nfunction createScale() {\n  const axisScale = {};\n  axisType.forEach((key) => {\n    if (this.scale[key]) {\n      const { type = 'linear', ticks = 5, tickSize, format } = this.scale[key];\n      const scale = scaleType[type]();\n      let axis = null;\n      if (key === 'x2') {\n        axis = d3.axisTop(scale);\n      } else if (key === 'y') {\n        axis = d3.axisLeft(scale);\n      } else if (key === 'y2') {\n        axis = d3.axisRight(scale);\n      } else {\n        axis = d3.axisBottom(scale);\n      }\n      if (ticks) {\n        axis = axis.ticks(ticks);\n      }\n      if (tickSize) {\n        axis = axis.tickSize(tickSize);\n      }\n      const defaultFormat = getDefaultFormat(type);\n      if (!format) {\n        this.scale[key].format = defaultFormat;\n      }\n      axis = axis.tickFormat(format || ((val) => defaultFormat(val, true)));\n      axisScale[key] = { scale, axis };\n    }\n  });\n  this.axisScale$ = axisScale;\n  updateScale.call(this);\n  this.rescale$ = (transform, key) => {\n    const as = this.axisScale$[key];\n    if (as) {\n      const { scale, axis } = as;\n      const recale = key === 'x' || key === 'x2' ? transform.rescaleX(scale) : transform.rescaleY(scale);\n      return {\n        scale: recale,\n        axis: axis.scale(recale),\n      };\n    }\n    return as;\n  };\n}\nfunction updateZoom() {\n  const viewExtent = [\n    [0, 0],\n    [this.width$, this.height$],\n  ];\n  let scaleExtent = [\n    [1, 1],\n    [1, 1],\n  ];\n  let translateExtent = [\n    [0, 0],\n    [0, 0],\n  ];\n  const { x: xzoom, y: yzoom } = this.zoom;\n  if (xzoom || yzoom) {\n    const [xdomain, ydomain] = [xzoom, yzoom].map((zoom, i) => {\n      const key = zoom.domain || (i === 0 ? 'x' : 'y');\n      let domain = [0, 1];\n      if (this.scale[key]) {\n        domain = this.scale[key].domain || this.dataDomains$[key] || [0, 1];\n      }\n      return domain;\n    });\n    const [xMinDomain, xMaxDomain] = xdomain;\n    const [yMinDomain, yMaxDomain] = ydomain;\n    const xDomainEx = (xMaxDomain || 1) - (xMinDomain || 0);\n    const yDomainEx = (yMaxDomain || 1) - (yMinDomain || 0);\n    const [xMinTranslate = 0, xMaxTranslate = 0] = xzoom.translate || [-Infinity, Infinity];\n    const [yMinTranslate = 0, yMaxTranslate = 0] = yzoom.translate || [-Infinity, Infinity];\n    const [xMinPrecision = xDomainEx / 10, xMaxPrecision = xDomainEx * 10] = xzoom.precision || [\n      xDomainEx / 10,\n      xDomainEx * 10,\n    ];\n    const [yMinPrecision = yDomainEx / 10, yMaxPrecision = yDomainEx * 10] = yzoom.precision || [\n      yDomainEx / 10,\n      yDomainEx * 10,\n    ];\n    const xRate = this.width$ / xDomainEx;\n    const yRate = this.height$ / yDomainEx;\n    scaleExtent = [\n      [xDomainEx / xMaxPrecision || 1, yDomainEx / yMaxPrecision || 1],\n      [xDomainEx / xMinPrecision || 1, yDomainEx / yMinPrecision || 1],\n    ];\n    translateExtent = [\n      [\n        (xMinTranslate - (xMinDomain || 0)) * xRate || xMinDomain || 0,\n        ((yMaxDomain || 1) - yMaxTranslate) * yRate || yMinDomain || 0,\n      ],\n      [\n        (xMaxTranslate - (xMinDomain || 0)) * xRate || xMaxDomain || 1,\n        ((yMaxDomain || 1) - yMinTranslate) * yRate || yMaxDomain || 1,\n      ],\n    ];\n  }\n  this.zoomer$\n    .extent(viewExtent)\n    .scaleExtent([(scaleExtent[0][0] * scaleExtent[0][1]) ** 2, (scaleExtent[1][0] * scaleExtent[1][1]) ** 2])\n    .translateExtent(translateExtent);\n  this.zoomExtent$ = { viewExtent, scaleExtent, translateExtent };\n}\nfunction createZoom() {\n  this.zoomExtent$ = null;\n  updateZoom.call(this);\n  this.transform$ = (axis, tf, deltK, point, point0) => {\n    let transform = tf;\n    if (this.zoomExtent$) {\n      const { viewExtent, translateExtent, scaleExtent } = this.zoomExtent$;\n      const tk = Math.max(\n        axis === 'x' ? scaleExtent[0][0] : scaleExtent[0][1],\n        Math.min(axis === 'x' ? scaleExtent[1][0] : scaleExtent[1][1], transform.k * deltK)\n      );\n      const tx = point[0] - tk * point0[0];\n      const ty = point[1] - tk * point0[1];\n      if (tk !== transform.k || tx !== transform.x || ty !== transform.y) {\n        transform = d3.zoomIdentity.translate(tx, ty).scale(tk);\n        const dx0 = transform.invertX(viewExtent[0][0]) - translateExtent[0][0];\n        const dx1 = transform.invertX(viewExtent[1][0]) - translateExtent[1][0];\n        const dy0 = transform.invertY(viewExtent[0][1]) - translateExtent[0][1];\n        const dy1 = transform.invertY(viewExtent[1][1]) - translateExtent[1][1];\n        transform = transform.translate(\n          dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n          dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n        );\n      }\n    }\n    return transform;\n  };\n}\nfunction updateElement(size) {\n  const { width, height, padding } = computeSize(this.rootSelection$.node(), size);\n  let zw = width - padding[3] - padding[1];\n  let zh = height - padding[0] - padding[2];\n  if (zw < 1) zw = 1;\n  if (zh < 1) zh = 1;\n  const group = this.rootSelection$\n    .select('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .select('g.group')\n    .attr('transform', `translate(${padding[3]},${padding[0]})`);\n  this.rootSelection$.select('clipPath').selectChild().attr('x', 1).attr('y', 0).attr('width', zw).attr('height', zh);\n  if (this.scale.x) {\n    group.select('.xAxis').attr('transform', `translate(0,${zh})`);\n    group.select('.xLabel').attr('transform', `translate(${zw / 2} ${zh + padding[2] - 14}) rotate(0)`);\n  }\n  if (this.scale.x2) {\n    group.select('.x2Label').attr('transform', `translate(${zw / 2} ${-padding[0]}) rotate(0)`);\n  }\n  if (this.scale.y) {\n    group.select('.yLabel').attr('transform', `translate(${-padding[3]} ${zh / 2}) rotate(-90)`);\n  }\n  if (this.scale.y2) {\n    group.select('.y2Axis').attr('transform', `translate(${zw},0)`);\n    group.select('.y2Label').attr('transform', `translate(${zw + padding[1] - 14} ${zh / 2}) rotate(-90)`);\n  }\n  const svgDiv = this.rootSelection$\n    .select('div.actions')\n    .style('width', `${zw}px`)\n    .style('height', `${zh}px`)\n    .style('top', `${padding[0]}px`)\n    .style('left', `${padding[3] + 1}px`);\n  if (this.zoom.x) {\n    svgDiv\n      .select('.xlock')\n      .style('top', `${zh + padding[2] - 21}px`)\n      .style('left', `${zw - 12}px`);\n  }\n  if (this.zoom.y) {\n    svgDiv.select('.ylock').style('top', '-20px').style('left', `${-padding[3]}px`);\n  }\n  let offset = 5;\n  if (this.zoom.x || this.zoom.y) {\n    svgDiv\n      .select('.reset')\n      .style('top', `${-padding[0] - 3}px`)\n      .style('left', `${this.scale.y ? zw - offset - 18 : offset}px`);\n    offset += 23;\n  }\n  if (this.download) {\n    svgDiv\n      .select('.download')\n      .style('top', `${-padding[0] - 3}px`)\n      .style('left', `${this.scale.y ? zw - offset - 18 : offset}px`);\n    offset += 23;\n  }\n  group\n    .select('.zLabel')\n    .attr('transform', `translate(${this.scale.y ? zw - offset : offset} ${this.scale.x2 ? 0 : -padding[0]})`);\n  this.width = width;\n  this.height = height;\n  this.padding = padding;\n  this.width$ = zw;\n  this.height$ = zh;\n}\nfunction createElement(container, size) {\n  const svgXmlns = 'http://www.w3.org/2000/svg';\n  const rootSelection = d3\n    .select(container || document.createElement('div'))\n    .append('div')\n    .attr('class', 'd3chart')\n    .style('position', 'relative')\n    // .style('overflow', 'hidden')\n    .style('width', '100%')\n    .style('height', '100%');\n  const svgSelection = rootSelection\n    .append('svg')\n    .attr('xmlns', svgXmlns)\n    .attr('width', 1) // 清除默认宽高\n    .attr('height', 1) // 清除默认宽高\n    .attr('fill', 'none')\n    .attr('text-anchor', 'middle')\n    .attr('font-size', this.fontSize)\n    .attr('stroke', 'none')\n    .attr('stroke-width', 1)\n    .attr('stroke-linejoin', 'round')\n    .attr('stroke-linecap', 'round')\n    .style('position', 'absolute');\n  svgSelection.append('defs').append('svg:clipPath').attr('id', pathClipId).append('rect');\n  const groupSelection = svgSelection.append('g').attr('class', 'group');\n  axisType.forEach((key) => {\n    if (this.scale[key]) {\n      groupSelection.append('g').attr('class', `${key}Axis`);\n      groupSelection\n        .append('g')\n        .attr('class', `${key}Label`)\n        .attr('fill', 'currentColor')\n        .attr('dominant-baseline', 'text-before-edge')\n        .append('text');\n    }\n  });\n  const pathClipId = util.guid('clip');\n  groupSelection.append('g').attr('class', 'zAxis').attr('clip-path', `url(#${pathClipId})`);\n  groupSelection\n    .append('g')\n    .attr('class', 'zLabel')\n    .attr('fill', 'currentColor')\n    .attr('dominant-baseline', 'text-before-edge');\n  const divSelection = rootSelection\n    .append('div')\n    .attr('class', 'actions')\n    .style('position', 'absolute')\n    .style('top', 0)\n    .style('left', 0);\n  const zoomSelection = divSelection\n    .append('div')\n    .attr('class', 'xyzoom')\n    .style('position', 'absolute')\n    // .style('overflow', 'hidden')\n    .style('background', 'rgba(0,0,0,0)') // IE9,10的层级（z-index）不起作用，需要加个背景使鼠标事件生效\n    .style('width', '100%')\n    .style('height', '100%')\n    .style('top', 0)\n    .style('left', 0);\n  const actions = [];\n  if (this.zoom) {\n    if (this.zoom.x) {\n      actions.push(actionButtons.xlock);\n    }\n    if (this.zoom.y) {\n      actions.push(actionButtons.ylock);\n    }\n    if (this.zoom.x || this.zoom.y) {\n      actions.push(actionButtons.reset);\n    }\n  }\n  if (this.download) {\n    actions.push(actionButtons.download);\n  }\n  actions.forEach((action) => {\n    divSelection\n      .append('div')\n      .attr('class', action.className)\n      .style('position', 'absolute')\n      .attr('title', action.label)\n      .style('font-size', '18px')\n      .append('svg')\n      .attr('xmlns', svgXmlns)\n      .attr('fill', 'currentColor')\n      .attr('viewBox', '0 0 1024 1024')\n      .attr('width', '1em')\n      .attr('height', '1em')\n      .append('path')\n      .attr('d', action.path);\n  });\n  if (this.tooptip) {\n    const { cross } = this.tooptip;\n    zoomSelection\n      .append('div')\n      .attr('class', 'tooptip')\n      .style('display', 'none')\n      .style('z-index', '999')\n      .style('border-radius', '8px')\n      .style('transition', 'none')\n      .style('padding', '10px 14px')\n      .style('font-size', `${this.fontSize}px`)\n      .style('line-height', '22px')\n      .style('position', 'absolute')\n      .style('top', 0)\n      .style('left', 0);\n    cross.split('').forEach((key) => {\n      if (key) {\n        zoomSelection\n          .append('div')\n          .attr('class', `${key}-cross`)\n          .style('display', 'none')\n          .style('position', 'absolute')\n          .style('transition', 'none')\n          .style('width', key === 'x' ? '1px' : '100%')\n          .style('height', key === 'x' ? '100%' : '1px')\n          .style('top', 0)\n          .style('left', 0);\n      }\n    });\n  }\n  this.rootSelection$ = rootSelection;\n  this.zoomSelection$ = zoomSelection;\n  updateElement.call(this, size);\n  if (!(util.isNumber(size.width) && size.width > 1 && util.isNumber(size.height) && size.height > 1)) {\n    const resize = util.debounce(\n      (e) => {\n        if (this.destroyed) return;\n        updateElement.call(this, size);\n        updateScale.call(this);\n        updateZoom.call(this);\n        if (this.rendered) {\n          this.reset();\n        }\n        this.resize$.call(\n          null,\n          {\n            sourceEvent: e || null,\n            target: this.rootSelection$,\n            transform: [...this.zoomSelection$.datum(), d3.zoomTransform(this.zoomSelection$.node())],\n            scaleAxis: getScaleAxis.call(this),\n            type: 'resize',\n          },\n          {\n            width: this.width$,\n            height: this.height$,\n            padding: this.padding,\n          }\n        );\n      },\n      250,\n      { leading: false, trailing: true }\n    );\n    window.addEventListener('resize', resize);\n    this.unBindResize$ = () => {\n      window.removeEventListener('resize', resize);\n    };\n  }\n}\nfunction bindEvents() {\n  let pointX0 = [0, 0];\n  let pointY0 = [0, 0];\n  let point0 = [0, 0];\n  let transform0 = d3.zoomIdentity;\n  this.zoomSelection$.datum([d3.zoomIdentity, d3.zoomIdentity]);\n  this.zoomer$\n    .on('start', (e) => {\n      if (this.destroyed || !this.rendered) return;\n      const [xTransform, yTransform] = this.zoomSelection$.datum();\n      const { transform, sourceEvent } = e;\n      if (sourceEvent.type !== 'call') {\n        if (!this.xCanZoom$ && !this.yCanZoom$) return;\n        const point = d3.pointer(e, this.zoomSelection$.node());\n        if (this.xCanZoom$) {\n          pointX0 = xTransform.invert(point);\n        }\n        if (this.yCanZoom$) {\n          pointY0 = yTransform.invert(point);\n        }\n        point0 = point;\n        transform0 = transform;\n      }\n      this.zoomstart$.call(null, {\n        ...e,\n        transform: [xTransform, yTransform, transform],\n        scaleAxis: getScaleAxis.call(this),\n      });\n    })\n    .on('zoom', (e) => {\n      if (this.destroyed || !this.rendered) return;\n      let [xTransform, yTransform] = this.zoomSelection$.datum();\n      const { transform, sourceEvent } = e;\n      // sourceEvent存在表示事鼠标触发，如滚轮和移动\n      if (sourceEvent.type !== 'call') {\n        if (!this.xCanZoom$ && !this.yCanZoom$) return;\n        const point = d3.pointer(e, this.zoomSelection$.node());\n        if (sourceEvent.type === 'mousemove' && !util.isCanEmit(point0, point)) return;\n        const deltK = transform.k / transform0.k;\n        const changed = point[0] !== point0[0] || point[1] !== point0[1];\n        let p = point;\n        if (sourceEvent.type === 'wheel') {\n          p = changed ? point : point0;\n        }\n        if (this.xCanZoom$) {\n          let px0 = pointX0;\n          if (sourceEvent.type === 'wheel') {\n            px0 = changed ? xTransform.invert(point) : pointX0;\n          }\n          xTransform = this.transform$('x', xTransform, deltK, p, px0);\n        }\n        if (this.yCanZoom$) {\n          let py0 = pointY0;\n          if (sourceEvent.type === 'wheel') {\n            py0 = changed ? yTransform.invert(point) : pointY0;\n          }\n          yTransform = this.transform$('y', yTransform, deltK, p, py0);\n        }\n        transform0 = transform;\n      } else if (sourceEvent.transform) {\n        // 跳到指定的transform，则直接赋值到xy\n        // 如果存在xy缩放，则会有补间调用，万一补间一半，触发了滚轮或移动，则补间会停止，造成无法到达指定缩放位置，所以xy锁定的时候应该忽略补间\n        const notZoom = !this.xCanZoom$ && !this.yCanZoom$;\n        if (sourceEvent.zoomX) {\n          xTransform = notZoom ? sourceEvent.transform : transform;\n        }\n        if (sourceEvent.zoomY) {\n          yTransform = notZoom ? sourceEvent.transform : transform;\n        }\n      }\n      this.zoomSelection$.datum([xTransform, yTransform]);\n      const scaleAxis = getScaleAxis.call(this);\n      Object.keys(scaleAxis).forEach((key) => {\n        const { axis, scale } = scaleAxis[key];\n        this.rootSelection$.select(`.${key}Axis`).call(axis);\n        this.rootSelection$.select(`.${key}Label`).call(scaleLable, [this.scale[key], scale.domain()]);\n      });\n      this.zooming$.call(null, {\n        ...e,\n        transform: [xTransform, yTransform, transform],\n        scaleAxis,\n      });\n    })\n    .on('end', (e) => {\n      if (this.destroyed || !this.rendered) return;\n      const { transform, sourceEvent } = e;\n      if (sourceEvent.type !== 'call') {\n        if (!this.xCanZoom$ && !this.yCanZoom$) return;\n        const point = d3.pointer(e, this.zoomSelection$.node());\n        if (sourceEvent.type === 'mousemove' && !util.isCanEmit(point0, point)) return;\n        pointX0 = [0, 0];\n        pointY0 = [0, 0];\n        point0 = [0, 0];\n        transform0 = d3.zoomIdentity;\n      }\n      this.zoomend$.call(null, {\n        ...e,\n        transform: [...this.zoomSelection$.datum(), transform],\n        scaleAxis: getScaleAxis.call(this),\n      });\n    });\n\n  this.zoomSelection$\n    .call(this.zoomer$)\n    .on('mouseover', (e) => {\n      if (this.destroyed) return;\n      this.mouseover$.call(null, {\n        sourceEvent: e,\n        target: this.zoomSelection$,\n        transform: [...this.zoomSelection$.datum(), d3.zoomTransform(this.zoomSelection$.node())],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'mouseover',\n      });\n    })\n    .on('mouseout', (e) => {\n      if (this.destroyed) return;\n      if (this.tooptip) {\n        const { cross } = this.tooptip;\n        const zNode = this.zoomSelection$.node();\n        const { toElement } = e;\n        if (!toElement || (toElement.parentNode !== zNode && toElement.parentNode.parentNode !== zNode)) {\n          if (cross.indexOf('x') !== -1) {\n            this.zoomSelection$.select('.x-cross').style('display', 'none');\n          }\n          if (cross.indexOf('y') !== -1) {\n            this.zoomSelection$.select('.y-cross').style('display', 'none');\n          }\n          this.zoomSelection$.select('.tooptip').style('display', 'none');\n        }\n      }\n      this.mouseout$.call(null, {\n        sourceEvent: e,\n        target: this.zoomSelection$,\n        transform: [...this.zoomSelection$.datum(), d3.zoomTransform(this.zoomSelection$.node())],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'mouseout',\n      });\n    })\n    .on('mousemove', (e) => {\n      if (this.destroyed) return;\n      const scaleAxis = getScaleAxis.call(this);\n      if (this.tooptip) {\n        const { cross, compute } = this.tooptip;\n        const crossX = cross.indexOf('x') !== -1;\n        const crossY = cross.indexOf('y') !== -1;\n        if (crossX || crossY) {\n          const [x0, y0] = d3.pointer(e);\n          let { x0: x00, y0: y00, result } = compute([x0, y0], scaleAxis);\n          x00 = x00 || x00 === 0 ? x00 : x0;\n          y00 = y00 || y00 === 0 ? y00 : y0;\n          let display = 'none';\n          if (typeof result !== 'function') {\n            result = util.noop;\n          } else {\n            display = 'block';\n          }\n          if (crossX) {\n            this.zoomSelection$.select('.x-cross').style('left', `${x00}px`).style('display', display);\n          }\n          if (crossY) {\n            this.zoomSelection$.select('.y-cross').style('top', `${y00}px`).style('display', display);\n          }\n          const tooptip = this.zoomSelection$.select('.tooptip');\n          tooptip.style('display', display).call(result);\n          if (display !== 'none') {\n            const width = tooptip.node().clientWidth;\n            const height = tooptip.node().clientHeight;\n            let left = x0 + 10;\n            let top = y0 - height - 10;\n            if (this.width$ - left < width) {\n              left = x0 - 10 - width;\n            }\n            left = left <= -60 ? -60 : left;\n            top = top <= -20 ? -20 : top;\n            tooptip.style('left', `${left}px`).style('top', `${top}px`);\n          }\n        }\n      }\n      this.mouseout$.call(null, {\n        sourceEvent: e,\n        target: this.zoomSelection$,\n        transform: [...this.zoomSelection$.datum(), d3.zoomTransform(this.zoomSelection$.node())],\n        scaleAxis,\n        type: 'mousemove',\n      });\n    })\n    .on('click', (e) => {\n      if (this.destroyed) return;\n      this.click$.call(null, {\n        sourceEvent: e,\n        target: this.zoomSelection$,\n        transform: [...this.zoomSelection$.datum(), d3.zoomTransform(this.zoomSelection$.node())],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'click',\n      });\n    })\n    .on('contextmenu', (e) => {\n      if (this.destroyed) return;\n      this.contextmenu$.call(null, {\n        sourceEvent: e,\n        target: this.zoomSelection$,\n        transform: [...this.zoomSelection$.datum(), d3.zoomTransform(this.zoomSelection$.node())],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'contextmenu',\n      });\n      e.preventDefault();\n    })\n    .on('dblclick', (e) => {\n      if (this.destroyed) return;\n      this.dblclick$.call(null, {\n        sourceEvent: e,\n        target: this.zoomSelection$,\n        transform: [...this.zoomSelection$.datum(), d3.zoomTransform(this.zoomSelection$.node())],\n        scaleAxis: getScaleAxis.call(this),\n        type: 'dblclick',\n      });\n    });\n  if (!this.zoom.doubleZoom) {\n    // 取消双击放大\n    this.zoomSelection$.on('dblclick.zoom', null);\n  }\n  if (this.zoom.x) {\n    const xlock = this.rootSelection$.select('.xlock');\n    xlock.on('click', () => {\n      this.xCanZoom$ = !this.xCanZoom$;\n      xlock.select('path').attr('d', this.xCanZoom$ ? unlockPath : lockPath);\n    });\n  }\n  if (this.zoom.y) {\n    const ylock = this.rootSelection$.select('.ylock');\n    ylock.on('click', () => {\n      this.yCanZoom$ = !this.yCanZoom$;\n      ylock.select('path').attr('d', this.yCanZoom$ ? unlockPath : lockPath);\n    });\n  }\n  if (this.zoom.x || this.zoom.y) {\n    this.rootSelection$.select('.reset').on('click', () => {\n      this.reset$();\n      this.reset();\n    });\n  }\n  if (this.download) {\n    this.rootSelection$.select('.download').on('click', () => {\n      if (this.download.action) {\n        this.download.action(() => {\n          this.downloadImage();\n        });\n      } else {\n        this.downloadImage();\n      }\n    });\n  }\n}\nclass BaseChart {\n  constructor(...params) {\n    const {\n      container,\n      width,\n      height,\n      padding = [0, 0, 0, 0],\n      fontSize = 12,\n      download,\n      tooptip,\n      zoom,\n      scale,\n      data,\n    } = params[0] || {};\n    this.destroyed = false;\n    this.rendered = false;\n    if (typeof download === 'function') {\n      this.download = { action: download };\n    } else if (typeof download === 'string') {\n      this.download = { ext: download };\n    } else {\n      this.download = download || false;\n    }\n    this.tooptip = !tooptip\n      ? false\n      : {\n          cross: '',\n          ...tooptip,\n          compute: (...args) => {\n            let result = {};\n            if (typeof tooptip.compute === 'function') {\n              result = tooptip.compute.call(this, result, ...args);\n            }\n            return result;\n          },\n        };\n    this.zoom = {\n      /* x: {\n\t\t\t\t\t// 一旦domain设置了x或x2的某一类型，则translate和precision都要按照这一类型数据设置\n\t\t\t\t\tdomain: 'x', // 坐标缩放为1，位移为0时的坐标范围（会默认取scale的x或x2的domain)\n\t\t\t\t\ttranslate: [-Infinity, Infinity], // 坐标标尺可以拖动的范围值\n\t\t\t\t\tprecision: [(1 - 0) / 10, (1 - 0) * 10], // 坐标标尺缩到最小和最大的跨度值\n\t\t\t\t}, */\n      x: null,\n      y: null,\n      doubleZoom: false,\n      ...zoom,\n    };\n    this.scale = {\n      /* x: {\n\t\t\t\t\ttype: 'linear', // 坐标类型\n\t\t\t\t\tticks: 5, // 坐标刻度数目\n\t\t\t\t\tformat: (v) => v, // 坐标值格式化函数\n\t\t\t\t\tdomain: [0, 1], // 横坐标缩放为1，位移为0时的坐标范围\n\t\t\t\t\tlabel: '', // 坐标名称\n\t\t\t\t\tunit: '', // 坐标值单位\n\t\t\t\t}, */\n      x: null,\n      x2: null,\n      y: null,\n      y2: null,\n      ...scale,\n    };\n    this.fontSize = fontSize;\n    this.data = data || {};\n    this.dataDomains$ = {};\n    this.zoomer$ = d3.zoom();\n    this.xCanZoom$ = !!this.zoom.x;\n    this.yCanZoom$ = !!this.zoom.y;\n    createElement.call(this, container, { width, height, padding });\n    createScale.call(this);\n    createZoom.call(this);\n    bindEvents.call(this);\n    this.click$ = util.noop;\n    this.dblclick$ = util.noop;\n    this.contextmenu$ = util.noop;\n    this.mouseover$ = util.noop;\n    this.mousemove$ = util.noop;\n    this.mouseout$ = util.noop;\n    this.zoomstart$ = util.noop;\n    this.zooming$ = util.noop;\n    this.zoomend$ = util.noop;\n    this.resize$ = util.noop;\n    this.reset$ = util.noop;\n  }\n\n  reset(noTransition) {\n    this.render(d3.zoomIdentity, 'xy', noTransition);\n    return this;\n  }\n\n  render(tf, ax = 'xy', noTransition) {\n    this.rendered = true;\n    const transform = tf || d3.zoomTransform(this.zoomSelection$.node());\n    // 对this.zoomSelection$调用this.zoomer$.transform函数变换到指定的transform\n    // 变换过程中用240ms及ease函数进行transition\n    (noTransition ? this.zoomSelection$ : this.zoomSelection$.transition().duration(240).ease(d3.easeLinear)).call(\n      this.zoomer$.transform,\n      transform,\n      null,\n      {\n        type: 'call',\n        transform: tf,\n        zoomX: ax.indexOf('x') !== -1,\n        zoomY: ax.indexOf('y') !== -1,\n      }\n    );\n    return this;\n  }\n\n  setEvent(type, handler) {\n    if (typeof handler === 'function') {\n      const oldHandler = this[`${type}$`];\n      this[`${type}$`] = (...args) => {\n        handler.call(null, ...args, oldHandler.call(null, ...args));\n      };\n    }\n  }\n\n  setData(data, render, computeDomain = util.noop) {\n    if (!data) return this;\n    this.rendered = false;\n    this.data = data;\n    // 根据data计算domain\n    const needCompute = axisType.filter((key) => this.scale[key] && !this.scale[key].domain);\n    if (needCompute.length > 0) {\n      this.dataDomains$ = computeDomain(this.data, needCompute) || {};\n      updateScale.call(this);\n      updateZoom.call(this);\n    }\n    if (render) {\n      this.render();\n    }\n    return this;\n  }\n\n  setDomain(domain, render) {\n    if (!domain) return this;\n    let isScale = false;\n    axisType.forEach((key) => {\n      if (this.scale[key] && domain[key]) {\n        this.scale[key].domain = domain[key];\n        isScale = true;\n      }\n    });\n    if (isScale) {\n      this.rendered = false;\n      updateScale.call(this);\n      let isZoom = false;\n      ['x', 'y'].forEach((key) => {\n        isZoom = this.zoom[key] && ((this.scale[key] && domain[key]) || (this.scale[`${key}2`] && domain[`${key}2`]));\n      });\n      if (isZoom) {\n        updateZoom.call(this);\n      }\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setTranslate(translate, render) {\n    if (!translate) return this;\n    let isZoom = false;\n    ['x', 'y'].forEach((key) => {\n      if (this.zoom[key]) {\n        this.zoom[key].translate = translate[key];\n        isZoom = true;\n      }\n    });\n    if (isZoom) {\n      this.rendered = false;\n      updateZoom.call(this);\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setPrecision(precision, render) {\n    if (!precision) return this;\n    let isZoom = false;\n    ['x', 'y'].forEach((key) => {\n      if (this.zoom[key]) {\n        this.zoom[key].precision = precision[key];\n        isZoom = true;\n      }\n    });\n    if (isZoom) {\n      this.rendered = false;\n      updateZoom.call(this);\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  setLabel(label, render) {\n    if (!label) return this;\n    let isScale = false;\n    axisType.forEach((key) => {\n      if (this.scale[key] && label[key]) {\n        this.scale[key].label = label[key].label;\n        this.scale[key].unit = label[key].unit;\n        isScale = true;\n      }\n    });\n    if (isScale) {\n      this.rendered = false;\n      if (render) {\n        this.render();\n      }\n    }\n    return this;\n  }\n\n  destroy() {\n    this.destroyed = true;\n    this.rendered = false;\n    this.data = {};\n    this.zoomer$.on('start', null).on('zoom', null).on('end', null);\n    this.zoomSelection$\n      .on('mouseover', null)\n      .on('mouseout', null)\n      .on('mousemove', null)\n      .on('dblclick.zoom', null)\n      .on('click', null)\n      .on('contextmenu', null);\n    if (this.unBindResize$) this.unBindResize$();\n    this.rootSelection$.remove();\n    this.rootSelection$ = null;\n  }\n\n  resize() {\n    if (document.createEvent) {\n      const event = document.createEvent('Event');\n      event.initEvent('resize', true, true);\n      window.dispatchEvent(event);\n    } else if (document.createEventObject) {\n      const event = document.createEventObject();\n      event.type = 'onresize';\n      window.fireEvent('onresize', event);\n    }\n    return this;\n  }\n\n  downloadImage(name, content) {\n    const svgSel = this.rootSelection$.select('svg');\n    const width = +svgSel.attr('width');\n    const height = +svgSel.attr('height');\n    const tempCanvas = document.createElement('canvas');\n    tempCanvas.width = width;\n    tempCanvas.height = height;\n    const tempCxt = tempCanvas.getContext('2d');\n    tempCxt.clearRect(0, 0, width, height);\n    if (content) {\n      tempCxt.drawImage(content.image, content.x, content.y);\n    }\n    const tempImage = new Image();\n    tempImage.src = `data:image/svg+xml;base64,${window.btoa(\n      window.unescape(\n        window.encodeURIComponent(\n          `<?xml version=\"1.0\" standalone=\"no\"?>\n          ${new XMLSerializer().serializeToString(svgSel.node())}`\n        )\n      )\n    )}`;\n    const ext = this.download.ext || 'png';\n    tempImage.onload = () => {\n      tempCxt.drawImage(tempImage, 0, 0);\n      const a = document.createElement('a');\n      a.download = `${name || 'basechart'}.${ext}`;\n      a.href = tempCanvas.toDataURL(`image/${ext}`);\n      a.click();\n    };\n  }\n}\n\nexport default BaseChart;\n"],"file":"BaseChart.js"}